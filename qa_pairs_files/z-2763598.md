# Difficulty Rating of Sudoku Puzzles: An Overview and Evaluation

CorpusID: 2763598 - [https://www.semanticscholar.org/paper/901c7f0cbf7701c66921c918e553d2ecfbb4df34](https://www.semanticscholar.org/paper/901c7f0cbf7701c66921c918e553d2ecfbb4df34)

Fields: Mathematics, Computer Science

## (s0) Introduction
(p0.0) What determines difficulty of problems for humans? Is there any relation between difficulty for humans and computational complexity for computers? Can we predict difficulty of problems algorithmically? Answers to these questions can give us an insight into human cognition and provide impulses for development of artificial intelligence. Moreover, these questions have important practical applications in human-computer collaboration and in training of problem solving skills, e.g., for developing intelligent tutoring systems [2,3,4].

(p0.1) Constraint satisfaction problems (CSP) are well suited for this kind of research, because many popular puzzles have natural CSP formulation. This is particularly the case of Sudoku puzzle, which is at the same time a "textbook example" of CSP and very popular puzzle.
## (s5) Constraint Satisfaction Problems and the Sudoku Puzzle
(p5.0) The Sudoku puzzle can be formulated as a constraint satisfaction problems. A constraint satisfaction problem is given by a set of variables X = {x 1 , . . . , x n }, a set of domains of variables {D 1 , . . . , D n }, and a set of constraints {C 1 , . . . , C m }. Each constraint involves some subset of variables and specifies allowed combinations of variable values (usually given in a symbolic form, e.g., x 1 = x 2 ). A solution of a constraint satisfaction problem is an assignment of values to all variables such that all constraints are satisfied. The class of CSPs contains many puzzles (e.g., the eight queen problem, the cryptarithmetic puzzle) as well as many important practical problems (map coloring problems, timetabling problems, transportation scheduling).

(p5.1) Sudoku puzzle is a grid of 9 × 9 cells, which are divided into nine 3 × 3 sub-grids, partially filled with numbers 1 to 9. The solution of the puzzle is a complete assignment of numbers 1 to 9 to all cells in the grid such that each row, column and sub-grid contains exactly one occurrence of each number from We study only well-posed puzzles.

(p5.2) Sudoku puzzle can be easily generalized for any grid size of n 2 × n 2 and values from 1 to n 2 [37]. Moreover, there are many variants of Sudoku which use non-regular sub-grids (e.g, pentomino), or additional constraint (e.g., arithmetic comparison of values). In this work we use 4 × 4 Sudoku puzzle (Fig. 1) as a small illustrating example, otherwise we consider solely the classical 9×9 Sudoku puzzles.

(p5.3) Sudoku can be easily expressed as a constraint satisfaction problem [37]. Consider an example of a 4 × 4 Sudoku given in Fig. 1; each cell corresponds to one variable, the domain of each variable is a set {1, 2, 3, 4} and the constraints express non-equality of variables and constants in the same row, column or subgrid, e.g., for variable j we have the following constraints: j = b, j = h, j = i, j = k, j = 3, j = 1.

(p5.4) Sudoku can also be viewed as a special case of a graph coloring problem, which is a particularly well-studied CSP. Given a graph G, the problem is to decide whether its vertices can be colored by k colors in such a way that no two vertices connected by an edge share a color. For the Sudoku puzzle, we can construct a "Sudoku graph" G S (see Fig. 1). The Sudoku puzzle thus becomes 9-colorability problem for the graph G S with an initial color assignment 1 . The connection between Sudoku and graph coloring is further elaborated by Herzberg and Murty [12].
## (s9) Predicting Human Behaviour
(p9.0) Our main aim is the difficulty rating, i.e., predicting the time to solve a puzzle. But we are also interested in predicting human behaviour during problem solving, i.e., predicting the order of cell filling. Such prediction can be useful for example for application in tutoring systems [4] or for detection of cheating in Internet Sudoku competitions (if the user fills repeatedly cells in wrong order, then it is probable that he did use computer solver to solve the puzzle).
## (s12) Constraint Relaxation
(p12.0) Now we describe completely different approach to difficulty rating -an approach inspired by research about computational difficulty of problems. This issue is well-studied for random CSP, where the structure of problems undergoes a sharp phase transition. This phenomenon was studied particularly for the SAT problem (satisfiability of boolean formulae) and the graph coloring problem [5,28,1]. Since Sudoku can be viewed as a graph coloring problem, we try to apply the ideas from this research and we study "random constraint relaxations" of Sudoku problems and evaluate their connections to difficulty for humans.

(p12.1) Phase Transition in the Random CSPs Consider a random graph with n vertices and with average connectiveness c. The graph coloring problem undergoes sharp phase transition: when c is low, the graph is colorable with very high probability and it is easy to find the coloring; when c is high, the graph is noncolorable with high probability and it is easy to find a proof of non-colorability; between these two regions there is a sharp transition where it is difficult to decide colorability 6 . For example, for 9 colors the threshold of connectiveness is around 35. During the phase transition, it is even possible to distinguish several "sub-phases" called condensation, clustering, and freezing (there is an analogy with physical processes in spin glasses) [20].

(p12.2) A particular inspiration that we use is the concept of freezing. During this phase the set of all solutions can be divided into clusters in which colors of some vertices are frozen (i.e., they are the same in all solutions in that cluster) [20]. Another similar notion is a "backbone" variable [28], which is a variable frozen in all solutions.
## (s13) Constraint Relaxation in Sudoku
(p13.0) In the study of phase transition, researchers focused on dependence of problem solutions and their properties on graph connectiveness. We apply this principle to Sudoku (viewed as a graph coloring problem). Sudoku graph, of course, is not a random graph, but rather a highly structured grid with a fixed connectiveness. Nevertheless, we can change its connectiveness and randomize it by relaxing some of the constraints, i.e., by randomly removing k edges in the underlying graph G S . As we relax constraints, the Sudoku puzzle will no longer have a unique solution. How fast does the number of solutions increase with k? Is there a relation to human problem solving? Is there any analogy to "freezing"? Fig. 8 illustrates some aspects of behaviour of Sudoku problems with k constraints relaxed. The figure shows results for only 6 selected puzzles, nevertheless the trends are representative.

(p13.1) The first graph shows that the mean number of solutions 7 grows exponentially with k -it can be fitted well by the function c · e k/6 , where c depends on the particular puzzle and ranges between 0.02 and 0.2. Results shown in the figure illustrate a general trend -more difficult puzzles have more solutions. We interpret this result as follows: easy puzzles have more "redundancy", i.e., more ways how to reach a solution, this causes both the slower increase in number of solutions and simplifies solution for humans. The probability that a problem has a unique solution decreases nearly linearly with k, it gets close to zero for k = 50. Difficult puzzles have lower probability of a unique solution than easy puzzles.

(p13.2) As an analogy to the concept of freezing, we propose to study fixedness of cells. A cell is fixed in problem S with k removed constraints if it has the same value in all solutions (i.e., this is the same as "backbone variable" [28]). The second graph shows for each puzzle the mean number of fixed cells with k constraints removed. This property shows the largest difference between difficult and easy problems -it declines more slowly for easy problems.

(p13.3) Further, we define a fixedness of a particular cell with respect to a puzzle S and parameter k as a probability that the cell has fixed value in S with k constraints randomly removed. Fixedness of cells can be used as a predictor of order of filling -cells with higher fixedness are filled earlier. Predictions of order of cell filling are only only slightly worse than for the computational model; in few cases the prediction is even better than for the model.

(p13.4) Due to the exponential growth of number of solutions, it is not feasible to perform extensive analysis for values of k over 50. In the evaluation we use the value k = 45 -it is high enough so that differences among individual puzzles appear and yet the extensive analysis is still amenable.
