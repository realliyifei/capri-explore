# A Survey of Communication Protocols for Internet of Things and Related Challenges of Fog and Cloud Computing Integration

CorpusID: 4635292 - [https://www.semanticscholar.org/paper/8d0efc6da17d5bf01446ce48ed9e9ac7e32d6565](https://www.semanticscholar.org/paper/8d0efc6da17d5bf01446ce48ed9e9ac7e32d6565)

Fields: Engineering, Computer Science, Environmental Science

## (s3) COMMUNICATION PROTOCOLS OVERVIEW
(p3.0) This section describes the above mentioned protocols based on their main features, as summarized in Table 1.In a nutshell, Table 1   a client and a server occurs via a request/response messaging, with client sending an HTTP request message and server then returning a response message, containing the resource that was requested in case the request was accepted.Recently, HTTP has been associated with REST [48], a guideline for developing web services based on a specific architectural style in order to define the interaction between different components.Because of the success of RESTful Web services, there has been a lot of effort in bringing this architecture into IoT based systems by combining HTTP and REST.

(p3.1) The combination of HTTP protocol with REST is commendable, because the devices can make their state information easily available, due to a standardized way to create, read, update, and delete data (the so-called CRUD operations).According to this mapping, the operations for creating, updating, reading and deleting resources correspond to the HTTP POST, GET, PUT and DELETE methods, respectively.For developers, the fact that REST establishes a mapping of these CRUD operations with HTTP methods, means that they can easily build a REST model for different IoT devices [49].The presentation of the data is not pre-defined and as such, the type is arbitrary, with the most common being JSON and XML.In most cases, IoT standardizes around JSON over HTTP.Fig. 4 illustrates an example of a REST HTTP request/reply interaction between two clients and one server .First one of the REST HTTP client wants to add a resource on a server side.For this it is necessary to specify, in the header of the POST method, the root of the resource that will be added /resources, the HTTP version, the Content-type, which in this case is a JSON file that represents a specific resource, and finally the JSON object itself.The response from the server specifies whether the request was successful, by specifying the HTTP standard status codes (e.g., 201, resource created).For the second client to get this new resource, the GET method has to be specified with the specific URI (e.g./resources/1), which contains the root of the resource and the id of the resource itself.The server will return the JSON object representing the resource.It is worth to mention that beside the simple communication which REST HTTP offers it also has the abundant support and available frameworks making it a default way of web communication, and all servers and client side drivers support it.
## (s10) Latency
(p10.0) When comparing different parameters for communication protocols, especially for IoT related application, latency comes as one of the priorities.In [95], authors have analyzed the behavior of two HTTP and MQTT in a fog-to-cloud IoT based architecture scenarios.The results of the experiments have shown that the measured response times for the requests were shorter for MQTT then the ones for HTTP.In [96], a Raspberry Pi based home automation system was used along with a web server and smart phones to measure latency generated by the MQTT (Mosquitto) and HTTP (REST) based architectures.As a result, MQTT-based architecture produced lower latency.In [97], it was shown that MQTT messages had experienced lower delays than CoAP for lower packet loss and higher delays than CoAP for higher packet loss.The comparison of these two protocols has also been conducted in [98] where authors assessed latency by measuring RTT.The results have shown that the average CoAP RTT was more than 20% shorter than MQTT.Another comparison of RTT in MQTT and CoAP [99] was conducted in two scenarios, local area network and an IoT network, with average RTT being from two to three times higher in the IoT network scenario.The results showed that MQTT with QoS0 had lower RTT in comparison with CoAP, while MQTT with QoS1 had the higher RTT due to the presence of both transport and application layer ACKs.In [100], the latency of MQTT and CoAP was analyzed for different QoS levels in a network without congestion.These conditions favored CoAP because it required fewer bytes to transfer the same message with a shorter delay regardless of the QoS level.Regarding the latency, MQTT latencies were measured in the order of milliseconds, and CoAP latencies as low as hundreds of microseconds.However, it is important to notice that in the cases of less reliable networks, MQTTÅ› underlying TCP protocol will be an important advantage and the results would be different.
## (s11) Bandwidth consumption and throughput
(p11.0) In [97] MQTT and CoAP have been analysed using the common middleware in terms of bandwidth consumption that was measured as total data transferred per message.In the cases where message size was small, and independently of the increase of packet loss rate, CoAP consumed less bandwidth than MQTT.The authors in [87] calculated protocol efficiency, as as the ratio between the number of useful information bytes and the total number of bytes exchanged at application and transport layers, and used it to compare MQTT and CoAP.The results showed higher efficiency for CoAP.An emulation-based quantitative performance assessment of CoAP in comparison with HTTP was conducted in [103] in the dynamic network environment.This scenario included a large amount of devices transferring data at the same time, which is a typical case in IoT environments.In order to achieve a higher utilization results have shown that it is better to use CoAP.Alongside latency, the authors in [104] compared bandwidth consumption for three protocols MQTT, DDS (with TCP as a transport protocol) and CoAP once as a function of a network packet loss and once as A function of network latency.CoAP generally showed a comparably lower bandwidth consumption that did not increase with increased network packet loss or increased network latency, unlike MQTT and DDS, where bandwidth consumption increased in mentioned scenarios.Also DDS consumed approximately twice the bandwidth of MQTT.In another study, [107], authors have also compared three protocols, this time MQTT (taking into consideration all three QoS level options), CoAP and REST HTTP in terms of bandwidth measurements.The scenario in question covered IoT to cloud communication and the results heavily depended on the size of the payloads that were being transferred.In the case of small payloads CoAP used the least amount of bandwidth, followed by MQTT and REST HTTP.However, when the size of payloads increased, the best performances were measured for REST HTTP.
## (s12) Energy consumption
(p12.0) The power/energy consumption is essential in every IoT based system, and the choice of protocols affects the same.In [96] along with latency analysis, authors have compared the energy consumption between MQTT and HTTP, with the results that energy consumed by HTTP was much larger than with MQTT.In [108] authors have analysed average energy consumed by MQTT and CoAP for a constrained gateway device with experimental results showing that CoAP is more efficient in terms of energy, though both of them proved to be efficient.A similar conclusion can be found in [109] where authors have shown that in the simple scenarios MQTT was more suitable for IoT messaging and nodes with no power constraints.CoAP on the other hand has proved to have efficient power management capabilities.In [110] authors provides an evaluation of CoAP compared to HTTP which demonstrated that thanks to the smaller headed and packet size in CoAP results in it having a lower energy consumption.In [111] authors compared the capabilities of AMQP and MQTT under a mobile or unstable wireless network testbed with the conclusion that AMQP offered more aspects related to security and MQTT was more energy efficient.Similar to other performance measures presented in this survey, most of the papers compare a pair of protocols in one study, and no study has evaluated and compared the energy consumption of all candidate communication protocols.
