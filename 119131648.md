# Higher and derived stacks: a global overview

CorpusID: 119131648
 
tags: #Mathematics

URL: [https://www.semanticscholar.org/paper/9fa8d8d9d613f06762aa63f0d57897072ccd0df5](https://www.semanticscholar.org/paper/9fa8d8d9d613f06762aa63f0d57897072ccd0df5)
 
| Is Survey?        | Result          |
| ----------------- | --------------- |
| By Classifier     | False |
| By Annotator      | (Not Annotated) |

---

Higher and derived stacks: a global overview
13 May 2006 December 2005

Bertrand Toën 
Laboratoire Emile Picard
UMR CNRS 5580
Université Paul Sabatier
ToulouseFrance

Higher and derived stacks: a global overview
13 May 2006 December 2005arXiv:math/0604504v3 [math.AG]
These are expended notes of my talk at the summer institute in algebraic geometry (Seattle, July-August 2005), whose main purpose is to present a global overview on the theory of higher and derived stacks. This text is far from being exhaustive but is intended to cover a rather large part of the subject, starting from the motivations and the foundational material, passing through some examples and basic notions, and ending with some more recent developments and open questions.to me important to emphasis the following principle:Principle 1: As 1-stacks appear as soon as objects must be classified up to isomorphism, higher stacks appear as soon as objects must be classified up to a notion of equivalence which is weaker than the notion of isomorphism.

# Introduction

The notion of algebraic (1-)stack was introduced in the late sixties, and since then it has been highly developed and has now become a full theory by its own: it is based on solid foundational material (existence of a nice 2-category of algebraic stacks, notion of sheaves and derived categories . . . ), it contains many interesting and geometrically meaningful examples (the stack of stable maps, the stack of coherent sheaves on a variety . . . ), many theories have been developed for stacks themselves (intersection theory, l-adic formalism, vanishing theorems, motivic cohomology, Riemann-Roch formula, motivic integration . . . ) and these theories have applications to several other contexts (Gromov-Witten invariants, birational geometry, arithmetic geometry, Hodge theory . . . ). I think everyone would agree today that the theory of algebraic stack is an important theory.

Approximately ten years ago C. Simpson introduced in [S3] a notion of algebraic n-stack, and more recently notions of derived scheme and of derived algebraic n-stacks have been introduced in [To-Ve3, HAGII,Lu1]. The purpose of this text is to give an overview on the recent works on the theories of higher algebraic stacks and of higher derived algebraic stacks, and to show that although these theories are not as developed as the theory of algebraic 1-stacks, they are based on solid foundational material, contain interesting and geometrically meaningful examples, and also have interesting developments and applications.

This work is organized in three sections. The first part ( §2) is devoted to the general theory of higher stacks (which is used all along this work), in which I tried to explain the motivations and to give some ideas of the foundations of the theory. As there exist several ways to motivate the theory of higher stacks I had to make a choice and have decided to take the point of view of moduli theory, but contemplating the theory from another point of view would maybe emphasis different motivations. I also had to make a choice concerning the foundations of the theory of higher stacks, as there also exist several possible approaches. I have decided to use the theory of Segal categories (as it seems to me the best model for higher categories available today) but also have tried to systematically make a bridge with model category theory which provides another approach to higher stacks.

In the second part of this work ( §3) I discuss higher Artin stacks (or algebraic n-stacks). I first present the basic notions of the theory, such as the definition of higher Artin stacks and some fundamental notions such as different properties of morphisms (etale, smooth, flat), some sheaf theory (quasi-coherent and l-adic) . . . . Then some examples are discussed, trying to present the most significant ones. Finally I present some developments and applications of higher Artin stacks. Most of them appear already in the literature but some of them are only ideas of possible applications and have not been fully investigated. The third part of this work ( §4) is devoted to derived Artin stacks. It starts by some motivations, and then follows the same presentation as the part on higher Artin stacks.

To finish this short introduction I would like to thank C. Simpson, G. Vezzosi and J. Lurie for numerous conversations about this subject and from which I have learned a lot. I am also grateful to J. Kock and to H.H. Tseng for their comments.

Conventions: The expression stacks always refer to the notion of ∞-stacks (in groupoids). To denote the usual notion of stacks in groupoids as presented in [La-Mo] we will use the expression 1-stacks.

All along this text we assume that the reader knows some basic notions of algebraic (1-)stacks (e.g. as presented in the first chapters of [La-Mo]), and also has some intuitive knowledge of higher category theory (see e.g. the introduction of [Le2]).


# Higher stacks

The main references for this section are [S1,HAGI,Lu2] (see also [Br] for a different approach to 2-stacks).


## Why higher stacks ?

Moduli theory is about classification of objects and families of objects. Its fundamental concept is that of a moduli problem. A moduli problem is a (contravariant) functor F , defined on a certain category C of geometric objects (e.g. schemes, smooth manifolds, topological spaces . . . ), and whose value F (S) is a structure which is supposed to classify families of objects parametrized by the geometric object S ∈ C. In the ancient times the values F (S) of a moduli problem were taken to be sets, and thus it was implicitly assumed that objects were classified up to equality (two points in a sets are or are not equal). However, many moduli problems intend to classify objects non only up to equality but also up to isomorphisms, and it was early recognized that the existence of objects having non trivial automorphisms makes the set of isomorphism classes of objects badly behaved. Because of this, many interesting moduli problems could not be representable by conventional geometric objects such as schemes, smooth manifolds, topological spaces . . . . The theory of 1stacks (in groupoids) proposes a solution to this problem by enhancing the classical notion of moduli functors from set valued functors into groupoid valued functors.

One possible starting point of higher stack theory is the observation that there exist natural and interesting moduli problems for which objects are classified up to a notion of equivalence which is weaker than the notion of isomorphisms. Typical examples are complexes of abelian groups (or sheaves of abelian groups) up to quasi-isomorphisms, topological spaces up to weak homotopy equivalences, or abelian categories up to equivalences of categories. These moduli problems naturally arise as functors F : C op −→ Cat, for which F (S) must be thought as the category of objects parametrized by S and equivalences between them. In these new situations, the values of the moduli functor F are not sets or groupoids anymore but categories. Moreover, the morphisms in these categories must be "inverted", or "localized", in some sense in order to truly classify objects up to equivalences. There exist well known constructions to "invert" a set of morphisms in a category, characterized by universal problems in a 2-categorical context. For instance, the Gabriel-Zisman localization is a solution of a universal problem in the 2-category of categories. There also exists a localization as a solution to a universal problem in the 2-category of "dérivateurs" (see [Cis]). However, in the same way that the construction sending a groupoid to its set of objects is badly behaved, none of these 2-categorical constructions are well behaved. It turns out that the meaningful way to "invert" a set of morphisms in a category is by stating a universal problem in the context of ∞-categories (the precise meaning of this, which requires to fix a theory of ∞-categories, will be discussed in the next paragraph, and the motivated reader can also consult [To1] for a general discussion of the localization problem). In particular, "inverting" the equivalences in our moduli functor F provides an ∞-groupoid valued functor. As a conclusion of this short discussion it seems vertical morphism above is an isomorphism (as well as similar conditions for the higher structures), and thus Segal categories generalize S-categories. In fact, the two notions are equivalent in some sense (see [Ber1]) and the reader can think only in terms of S-categories, keeping in mind that Segal categories behave better for certain purposes and that using S-categories could be rather technical at some point.

The theory of Segal categories works in a very similar manner to usual category theory and most (if not all) of the standard categorical notions can be reasonably defined in the Segal setting.

Here follows a sample of examples (once again we refer to the overview [To-Ve1] for more details).

1. Categories, S-categories and Segal categories: Segal categories form a category SeCat for the obvious notion of morphisms. We will use interchangeably the expression morphisms between Segal categories and functors between Segal categories.

There is a fully faithful functor S − Cat −→ SeCat from the category of S-categories into the category of Segal categories, and thus any S-category will be considered as a Segal category. Moreover, as there is a fully faithful functor Cat −→ S − Cat, we also get a full embedding of the category of categories to the category of Segal categories, and will consider categories as a special kind of Segal categories (they are the ones for which the simplicial sets of morphisms are discrete).

2. Homotopy categories: Any Segal category A possesses a homotopy category Ho(A) (which is a category in the usual sense), having the same objects as A, and for two objects a and b morphisms in Ho(A) are given by Ho(A)(a, b) = π 0 (A(a, b)). The composition is induced by the diagram π 0 (A(a, b, c)) / / ≃ π 0 (A(a, c)) π 0 (A(a, b)) × π 0 (A(b, c)).

The fact that this composition is associative follows from the higher structures on A. The functor SeCat −→ Cat sending A to Ho(A) is left adjoint to the embedding Cat −→ SeCat.

A morphism (between two objects a and b) in a Segal category A is a zero simplex of the simplicial set A(a, b). A morphism is an equivalence in A if its image in Ho(A) is an isomorphism.

3. Equivalences of Segal categories: For a morphism of Segal categories f : A −→ B, we say that f is essentially surjective (resp. fully faithful ) if the induced functor Ho(f ) : Ho(A) −→ Ho(B) is essentially surjective (resp. if for any two objects a and b in A the induced morphism f a,b : A(a, b) −→ B(f (a), f (b)) is an equivalence of simplicial sets). We say that f is an equivalence if it is both fully faithful and essentially surjective. When A and B are categories, and thus Ho(A) = A and Ho(B) = B, this notion of equivalence is the usual notion of equivalences of categories.


## The model category of Segal categories:

The foundational result about Segal categories is the existence of a model structure whose weak equivalences are the equivalences above (see Pe,Ber1]). To be precise this model structure does not exist on the category of Segal categories itself but on a slightly larger category of Segal precategories, but I will simply neglect this fact. For this model structure, every object is cofibrant, but not every Segal category is a fibrant object, and in general fibrant objects are quite difficult to describe (see however [Ber2]). The existence of this model structure is far from being formal and has many consequences. First of all it can be used to state that the theory of S-categories and of Segal categories are equivalent in some sense, as it is known that their model categories are Quillen equivalent (see [Ber1]). The model category of Segal categories can be shown to be enriched over itself (i.e. is an internal model category in the sense of [H-S, §11], see also [Pe,Ber1]). This implies that given two Segal categories A and B it is possible to associate a Segal category of morphisms
RHom(A, B) := Hom(A, RB),
where RB is a fibrant model for B and Hom denotes the internal Hom's in the category of Segal categories. From the point of view of ∞-categories, RHom(A, B) is a model for the ∞category of (lax) functors from A to B. In general, the expression f : A −→ B is a morphism of Segal categories will mean that f is an object in RHom(A, B), or equivalently a morphism in the homotopy category Ho(SeCat). In other words we implicitly allow ourselves to first take a fibrant replacement of B before considering morphisms into B.


## 5.

The 2-Segal category of Segal categories: Considering fibrant Segal categories and their internal Homs as above provides a category enriched over SeCat, denoted by SeCat. This is a 2-Segal category (see [H-S]), and is a model for the ∞-category of (1, ∞)-categories. I will not really use the 2-Segal category SeCat in the sequel, but it is a good idea to keep in mind that it exists.

6. Segal groupoids and delooping: There is a notion of Segal groupoid : by definition a Segal category A is a Segal groupoid if its homotopy category Ho(A) is a groupoid in the usual sense.

For any Segal category A, we can define its geometric realization |A|, which is the diagonal simplicial set of the underlying bi-simplicial of A (see [H-S, §2], where |A| is denoted by R ≥0 (A)). The construction A → |A| has a right adjoint, sending a simplicial set X to its fundamental Segal groupoid Π ∞ (X) (it is denoted by Π 1,se (X) in [H-S, §2]). By definition, the set of objects of Π ∞ (X) is the set of 0-simplex in X, and for two points (x, y) ∈ X 2 0 the simplicial set of morphisms Π ∞ (X)(x, y) is the subsimplicial set of X ∆ 1 sending the two vertices of ∆ 1 to x and y. A fundamental theorem states that the constructions A → |A| and X → Π ∞ (X) provide an equivalence between the homotopy theories of Segal groupoids and of simplicial sets (see [Pe,§6.3]). This last equivalence is a higher categorical version of the well known equivalence between the homotopy theories of 1-truncated homotopy types and of groupoids.

7. Localization of Segal categories: Given a Segal category A and a set of morphisms S in Ho(A), there exists a Segal category L(A, S) obtained by inverting the arrows in S. This construction is the Segal analog of the Gabriel-Zisman localization for categories. By definition, the Segal category L(A, S) comes with a localization morphism l : A −→ L(A, S) satisfying the following universal property: for any Segal category B, the induced morphism
l * : RHom(L(A, S), B) −→ RHom(A, B)
is fully faithful, and its essential image consists of morphisms A −→ B sending morphisms of S into equivalences in B (i.e. isomorphisms in Ho(B)). The fact that L(A, S) always exists is not an easy result (see e.g. [H-S], or [To2] for a linear analog). When applied to the case where A is a category considered as a Segal category, the construction L(A, S) described above coincides, up to an equivalence, with the simplicial localization construction of . It is important to note that Ho(L(A, S)) is naturally equivalent to the Gabriel-Zisman localization S −1 A, but that in general the natural morphism
L(A, S) −→ S −1 A
is not an equivalence (examples will be given below). 
LM int / / LM Ho(M ) int / / Ho(M ),
where Ho(M ) int is the maximal subgroupoid of Ho(M ). As LM int is a Segal groupoid it is determined by its geometric realization by the formula LM int ≃ Π ∞ (|LM int |). It is possible to show that there exists a natural equivalence of simplicial sets |LM int | ≃ |W |, where |W | is the nerve of the category W (it is also its geometric realization as a Segal category). Thus, we have LM int ≃ Π ∞ (|W |), and the Segal groupoid LM int is essentially the same thing as the simplicial set |W |. This fact explains that topologists often refer to the simplicial set |W | as the classifying space of objects in M : it truly is a model for the ∞-groupoid obtained from M by inverting the morphisms in W . This fact will be highly used in the construction and the description of higher stacks.

10. The Yoneda embedding: Given a Segal category A there is a Yoneda embedding morphism
h : A −→ RHom(A op , T op),
which is known to be fully faithful (this is the Segal version of the Yoneda lemma). Any morphism A op −→ T op in the essential image of this morphism is called representable. Dually, there is a notion of corepresentable morphism.


## 11

. Adjunctions: Given a morphism of Segal categories f : A −→ B, we say that f has a right adjoint if there exists a morphism g : B −→ A and a point h ∈ RHom(A, A)(Id, gf ), such that for any two objects a ∈ A and b ∈ B the natural morphism induced by h
A(f (a), b) g * / / A(gf (a), g(b)) h * / / A(a, g(b))
is an equivalence of simplicial sets. This definition permits to talk about adjunction between Segal categories. An important fact is that a Quillen adjunction between model categories
f : M −→ N M ←− N : g
gives rise to a natural adjunction of Segal categories
Lf : LM −→ LN LM ←− LN : Lg.
12. Limits: Given two Segal categories A and I, we say that A has limits (resp. colimits) along I if the constant diagram morphism A −→ RHom(I, A) has a right adjoint (resp. left adjoint). This gives a notion of Segal categories having (small) limits (resp. colimits), or finite limits (resp. colimits). In particular we can talk about fibered and cofibered squares, final and initial objects, left and right exactness . . . .

13. The strictification theorem: Let M be a cofibrantly generated model category, and C a category with a subcategory S ⊂ C. We consider the category M C of functors from C to M , and M (C,S) the subcategory of functors sending morphisms in S to equivalences in M . The notion of equivalences in M induces a levelwise notion of equivalences in M (C,S) . An important theorem, called the strictification theorem, states that there exists a natural equivalence of Segal categories L(M (C,S) ) ≃ RHom(L(C, S), LM ).

A proof can be found in [H-S] (see also [To2] in the context of dg-categories that can easily be translated to the simplicial setting). This theorem is very important as it provides a rather good dictionary between constructions in the context of model categories and constructions in the context of Segal categories. For instance, for a model category M the existence of homotopy limits and colimits in M implies that the Segal category LM possesses limits and colimits in the sense of (12).

Another important consequence of the strictification theorem and of the Yoneda lemma (12) [S4]).

Finally, the strictification theorem also possesses a relative version, for presheaves of model categories on C op (the absolute version above being for the constant presheaf with values M ), but we will not reproduce it here. This generalized strictification theorem is important for stack theory as it allows to describe certain homotopy limits (see e.g. [HAGII, App. B]) of Segal categories in terms of model categories, and is often a key statement to check that something is a stack.

The previous list of facts shows that through the construction M → LM , model category theory is somehow an approximation of Segal category theory, and thus of the theory of (1, ∞)-catgeories. The main advantage of passing from model categories to Segal categories is the existence of the internal Hom object RHom, as well as a gain of functoriality. However, model categories are 1-categorical structures, and thus it is reasonable to say that model categories are in some sense strict forms of (1, ∞)-categories. We finish this paragraph by stipulated this as another important principle:

Principle 2: Model categories are strict forms of (1, ∞)-categories, and model category theory is a strict form of the theory of (1, ∞)-catgeories.

This principle is not only a conceptual one, and it can be verified dramatically in practice. Typically, general constructions are done using Segal categories as they are more functorial, but explicit computations are usually done using model category techniques. I personally like to think that chosing a model category which is a model for a given Segal category (i.e. strictifying the Segal category) is very much like chosing a system of local coordinates on a manifold: the intrinsic object is the Segal category, but the model category is useful to have hands on it. For an example of application of the principle 2 to the construction of higher stacks see the end of the next section.

To finish this part on Segal categories we introduce the following notations for a Segal category A and two objects a and b
M ap A (a, b) := A(a, b) [a, b] A := π 0 (A(a, b)) = Ho(A)(a, b).
When A is clear from the context we will simply write M ap(a, b) for M ap A (a, b) and [a, b] for [a, b] A .


## Higher stacks

We are now ready to explain what are higher stacks (in groupoids). For this let me first remind the following characterization of the category Sh(C) of sheaves of sets on a Grothendieck site C.

There exists a functor, which is the Yoneda embedding followed by the associated sheaf functor, h : C −→ Sh(C). This functor can be characterized by a universal property in the following way. First of all for two categories A and B with colimits we will denote by Hom c (A, B) the category of functors commuting with colimits ("c" stands for "continuous"). Also, recall from [DHI] the notion of an hypercovering in C (and noticed that an hypercovering in C is not a simplicial object in C but only in presheaves of sets over C). Then the functor h : C −→ Sh(C) is characterized up to equivalence by the following properties.

• The category Sh(C) has colimits.

• For any category with colimits B, the induced functor
h * : Hom c (Sh(C), B) −→ Hom(C, B)
is fully faithful and its image consists of functors F : C −→ B such that for any object X ∈ C and any hypercovering U * → X in C the natural morphism in B
Colim [n]∈∆ op F (U n ) −→ F (X) is an isomorphism 3 .
Such a characterization also exists for the 2-category of 1-stacks, but in the setting of 2categories. The definition of the Segal category of stacks on C is simply the Segal anolog of these two properties.

Definition 2.1 Let C be a Grothendieck site. A Segal category of stacks on C is a Segal category A together with a morphism h : C −→ A such that the following two properties are satisfied.

1. The Segal category A has colimits.


## For any Segal category with colimits B, the induced morphism
h * : RHom c (A, B) −→ RHom(C, B)
is fully faithful and its image consists of morphisms F : C −→ B such that for any object X ∈ C and any hypercovering U * → X in C the natural morphism in B
Colim [n]∈∆ op F (U n ) −→ F (X)
is an equivalence (i.e. an isomorphism in Ho(B)).

When it exists a Segal category of stacks over C will be denoted by St(C).

A fundamental result states that for any Grothendieck site C a Segal category of stacks on C exists and is unique up to equivalence. Once enough of the basic categorical constructions are extended to the Segal category setting and proved to behave correctly, this theorem is not difficult to prove and is proved in a similar way as the corresponding statement for categories of sheaves. We start by considering the Segal category of prestacks C := RHom(C op , T op), and we define St(C) a localization of C in order to invert all the morphisms of the form
colim [n]∈∆ op U n −→ X
for all hypercovering U * −→ X in C. The fact that this satisfies the correct universal property follows from the definition of the localization and from the fact that the Yoneda embedding C −→ C induces for any cocomplete Segal category B an equivalence
RHom c ( C, B) ≃ RHom(C, B),
(this last equivalece can be proved from the strictification theorem, point (13) of §2.2).

The Segal category of stacks St(C) possesses of course a model category counter part, which is extremely useful in practice. By definition, we start by the projective model structure on SP r(C), the category of simplicial presheaves on C (equivalences and fibrations are levelwise). We then define the model category SP r τ (C) of stacks over C as being the left Bousfield localization of SP r(C) along the set of morphisms U * −→ X for any hypercovering U * → X (here U * is considered as simplicial presheaf and thus as an object in SP r(C), and is a model for Hocolim [n]∈∆ op U n computed in SP r(C)). Using the strictification theorem (point (13) of §2.2) it is possible to prove that there are natural equivalences of Segal categories
L(SP r(C)) ≃ C L(SP r τ (C)) ≃ St(C).
This last equivalences explain that stacks are modeled by simplicial presheaves. This important fact has been first stressed by C. Simpson in [S1], and then has been used by several author (see e.g. [Hol,Ja2]). Another model for St(C) is the model category of simplicial sheaves, originally introduced by A. Joyal and revisited by J. Jardine (see [Joy,Ja1]). This last model shows that the Segal category St(C) only depends on the topos Sh(C), and not of the choice of the site C. By universal properties there exists a natural morphism π 0 : St(C) −→ Sh(C) which can be thought of as a trunction functor. This morphism has a fully faithful right adjoint Sh(C) −→ St(C) identifying Sh(C) with the full sub-Segal category of St(C) consisting of discrete objects (i.e. objects x for which for any other object y the simplicial set St(C)(y, x) is equivalent to a set). In the same way, the 2-category of 1-stacks can be seen as a full sub-Segal category of St(C) consisting of 1-truncated objects (see [Hol, HAGI]). More generally, the full sub-Segal category St ≤n (C) of St(C) consisting of n-truncated objects is a model for the (n+1)-category of n-stacks in groupoids, and the inclusion St ≤n (C) −→ St(C) possesses a right adjoint t ≤n : St(C) −→ St ≤n (C) called the n-th truncation functor (of course t ≤0 coincides with π 0 described above).

As for categories of sheaves the localization morphism (which must be considered as the associated stack functor)
a : C −→ St(C),
has a fully faithful right adjoint i : St(C) −→ C. Concrete models for St(C) and C can then be described as follows. A model for C is the S-category SP r(C) cf of cofibrant and fibrant objects in SP r(C). A model for St(C) is the full sub-S-category of SP r(C) cf consisting of functors F : C op −→ SSet such that for any hypercovering U * −→ X in C the natural morphism
F (X) −→ Holim [n]∈∆ F (U n )
is an equivalence. Even more concrete models for the homotopy categories Ho( C) and Ho(St(C)) are given by the homotopy category of presheaves of simplicial sets on C and its full subcategory consisting of functors satifying the descent condition above. With this models, the functor π 0 : Ho(St(C)) −→ Sh(C) mentioned above simply sends a simplicial presheaf F to its sheaf of connected component (i.e. the sheaf associated to the presheaf X → π 0 (F (X))).

An important fact is that the morphism a is left exact (i.e. commutes with finite limits). This has many interesting exactness consequences on the Segal catgeory St(C), as for instance the existence of internal Hom objects (i.e. existence of stacks of morphisms). These exactness properties are formally the same as the one satisfied by the Segal category T op, and can be summarized as Segal category versions of the standard Giraud's axioms for Grothendieck topos. The three fundamental properties are (see [HAGI,):

1. The Segal category St(C) has colimits and a set of small generators (this implies that it also has limits, which can also be seen directly).

2. Sums in St(C) are disjoints: for any family of objects {x i } i∈I in St(C) and any i 1 = i 2 in I the following diagrams
∅ / / x i2 x i1 / / x i1 x i1 / / i∈I x i x i1 / / i∈I x i are cartesian.
3. Equivalence relations are effective in St(C): for any groupoid object X 1 ⇒ X 0 with quotient |X * |, the natural morphism X 1 −→ X 0 × |X * | X 0 is an equivalence in St(C).

These three properties can be taken as the definition of a Segal topos. I refer to [To-Ve1, Lu2] for more on this notion. It can be proved that Segal topos are precisely the Segal categories which are exact localizations of Segal categories of the form RHom(T, T op) for some Segal category T . An important remark however is that there exists Segal topos which are not exact localizations of Segal categories of the form RHom(C, T op) for some category C, showing that there exists exotic Segal topos (i.e. which are not determined by a topos in the usual sense). Such an exotic Segal topos will be used to develop the theory of derived stacks later in this paper. Another example is the Segal category St(k)/F , for a stack F which is not a sheaf, which is a Segal topos not generated by a Grothendieck site in general.

To finish this section on higher stacks I would like to give one particular example of principle 2 of §2.2 in action, concerned with the construction of higher stacks from model category data.

Let C be a Grothendieck site. We are looking for a general procedure to construct stacks over C, i.e. simplicial presheaves with the descent conditions. From the point of view of moduli theory, a stack F , which is modeled by a simplicial presheaf F : C op −→ SSet, represents a moduli problem: for an object X ∈ C, the simplicial set F (X) is a classifying space of families of objects over X. From the dictionnay between Segal categories and model categories (see points (8) and (9) of §2.2), we can expect F (X) to be the nerve of the subcategory of equivalences in a model category M (X), depending on X, and being a model for the homotopy theory of families of objects parametrized by X 4 . The starting point is thus a presheaf of model categories M on C, also called a Quillen presheaf : it consists for any X ∈ C of a model category M (X), and for any morphism f : X −→ Y of a left Quillen functor f * : M (Y ) −→ M (X) satisfying f * • g * = (g • f ) * (there is of course a dual notion with right Quillen functors). From such a Quillen presheaf we construct a prestack sending X to F (X) := |W M (X) c |, the nerve of equivalences in M (X) c (i.e. between cofibrant objects), and f : X −→ Y to the induced morphism f * : F (Y ) −→ F (X). Note that the restriction to cofibrant objects is necessary to insure that f * preserves equivalences. However, as for any model category N the nerve of equivalences in N and in N c are naturally equivalent to each others, F (X) is a classifying space of objects in M (X), as required.

In this way, for any presheaf of model categories M we obtain a simplicial presheaf F , which by point (9) of §2.2 can be see as the ∞-prestack of objects in M up to equivalences. The next step is to add conditions on M to insure that the prestack F is a stack, i.e. satisfies the descent condition for hypercoverings. For any hypercovering U * −→ X in C, we can consider the the cosimplicial diagram of model categories n → M (U n ) (we make here the same abuse of notation as before, as U n is not an object in C but only a formal disjoint union of such, and M (U n ) means the product of the values of M over the various components of U n ). We consider Sect(U * , M ), the category of global section of this cosimplicial category: its objects are families of objects x n ∈ M (U n ) for any n, together with morphisms u * (x m ) → x n in M (U n ) for any simplicial map u : U n −→ U m , satisfying the usual cocycle condition (see [HAGII, App. B]). There exists a natural Quillen model structure on Sect(U * , M ) for which the equivalences and fibrations are defined levelwise. It is then possible to construct a natural adjunction
φ : Ho(M (X)) −→ Ho(Sect(U * , M )) Ho(M (X)) ←− Ho(Sect(U * , M )) : ψ.
We say that M satisfies homotopical descent (the reader will notice the analogy with usual cohomological descent for complexes of sheaves) if the above adjunction satisfies the following two conditions:

• The functor φ : Ho(M (X)) −→ Ho(Sect(U * , M )) is fully faifthul.

• An object x * ∈ Ho(Sect(U * , M )) is in the essential image of φ if and only if for any u :
U n −→ U m the induced morphism Lu * (x m ) −→ x n is an isomorphisms in Ho(M (U n )).
An important consequence of the strictification theorem (see point (13) of §2.2 as well as [HAGII, App. B]) states that with the notations above, the prestack F is a stack if M satisfies homotopical descent. As far as I know this is the most powerful way to construct examples of stacks, and many of the examples of stacks presented in the sequel are based on this construction.


# Higher Artin stacks

Let k be a commutative ring and k − Af f the category of affine k-schemes endowed with the faithfuly flat and quasi-compact topology. The Segal category of stacks St(k − Af f ) will simply be denoted by St(k), and its objects called k-stacks. The ffqc topology being subcanonical the natural morphism k − Af f −→ St(k) is fully faithful, and we will simply identify k − Af f with its essential image in St(k) (so any stack equivalent to an affine scheme will be called an affine scheme).

Recall that a model for St(k) is the model category of presheaves of simplicial sets with the local model structure as in [Ja1,DHI], and thus that objects in St(k) might be described concretely as functors
F : k − Af f op = k − CAlg −→ SSet,
from the opposite of the category of affine k-schemes or equivalently the category of commutative k-algebras, such that for any ffqc hypercovering of affine schemes U * −→ X the natural morphism
F (X) −→ Holim [n]∈∆ F (U n )
is an equivalence (once again we make the abuse of notation, as U n is only a formal disjoint union of affine schemes). We will often use this description in terms of simplicial presheaves in order to construct explicit objects in the Segal category St(k).

Recall also that we have introduced the following notations
M ap St(k) (F, G) := St(k)(F, G) [F, G] St(k) := π 0 (M ap(F, G)).
Moreover, the subscrite St(k) will not be mentioned when there are no ambiguities. From a model category theory point of view, if F and G are represented by simplicial presheaves we have
M ap(F, G) ≃ RHom(F, G) = Hom(QF, RG),
where Hom are the natural simplicial Hom's of the category of simplicial presheaves, and Q and R are cofibrant and fibrant replacement functors inside the category of simplicial presheaves endowed with its local projective model structure (see [Ja1,DHI]) The main references for higher Artin stacks are [S3] and [HAGII,§2.1]. The approach of [HAGII] uses model categories, and concerning notation the homotopy category of the Segal category St(k) is denoted by St(k) = Ho(St(k)) in [HAGII]. In the sequel we will work with the Segal category St(k), but the constructions and statements given below can also be translated into a model category language and considered in St(k) (e.g. the fiber product in the Segal category St(k) corresponds to the homotopy fiber products in St(k), denoted in [HAGII] by × h ).


## Basic notions

Higher Artin stacks will form a certain sub-Segal category of St(k) of objects obtained as nice quotients from affine schemes. The definition of an n-Artin stack goes by induction on n as follows.

• A (-1)-Artin stack is an affine scheme. A morphism f : F −→ G between stacks is (-1)representable, or affine, if for any affine scheme X and any morphism X −→ G the pull back F × G X is a (-1)-Artin stack.

• Let us assume that the notion of (n-1)-Artin stacks has been defined, as well as the notion of (n-1)-representable morphisms (one also says (n-1)-geometric morphisms) and smooth (n-1)-representable morphisms.

-A stack F is an n-Artin stack if there exists a disjoint union of affine schemes X and a smooth (n-1)-representable and surjective morphism X −→ F (here surjective must be understood in a sheaf-like sense, that for any affine scheme Y , any morphism Y −→ F factors through X locally on the ffqc on Y ). Such a morphism X −→ F is called a smooth n-atlas for F .

-A morphism f : F −→ G between stacks is called n-representable (or n-geometric) if for any affine scheme X and any morphism X −→ G the pull back F × G X is an n-Artin stack.

-An n-representable morphism f : F −→ G between stacks is called smooth if for any affine scheme X and any morphism X −→ G, there exists a smooth n-atlas U −→ F × G X such that the composition U −→ X is a smooth morphism of schemes.

• A stack F which is an n-Artin stack for some n is simply called an Artin stack. If furthermore F is n-truncated (i.e. its values as a simplicial presheaf are n-truncated simplicial sets, π i (F (X)) = 0 for all i > n and all X ∈ k − Af f ) then F is called an Artin n-stack. In the same way, a morphism f : F −→ G between stacks is called representable (or geometric) if it is n-representable for some n.

The reader is warned that there is a small discrepancy for the indices in the notions of n-Artin stack and Artin n-stack. For example a scheme is always an Artin 0-stack, but is only a 1-Artin stack. It is a 0-Artin stack if and only if its diagonal is an affine morphism (see [HAGII] for more details on this). To avoid confusion we will not use the terminology n-Artin stack which has been introduced only for the need of the inductive definition, and we will stay with the notion of Artin stack and Artin n-stack which are the pertinent ones for our purpose.

Most of the very basic properties of Artin 1-stacks can be shown to extend to the case of Artin stacks. Here follows a sample of results.

1. Properties of morphisms: Any property P of morphisms of schemes which is local for the smooth topology extends naturally to a property P of morphisms between Artin stacks (see [HAGII,1.3.6]). This provides notions of unramified, smooth, etale and flat morphisms. A morphism of Artin stacks F −→ G is an open (resp. closed) immersion if for any affine scheme X and any morphism X −→ G the stack F × G X is a scheme and the induced morphism F × G X −→ X is an open (resp. closed) immersion.

An Artin stack F is quasi-compact if it can be covered by an affine scheme (i.e. there exists a surjective morphism of stacks X −→ F with X affine). A morphism f : F −→ G between Artin stacks is quasi-compact if for any affine scheme X and any morphisms X −→ G the stack F × G X is quasi-compact. Finally, by induction on n, we say that an n-geometric stack F is strongly quasi-compact if it is quasi-compact and if the diagonal F −→ F × F is strongly quasi-compact (with the convention that a 0-geometric stack is strongly quasi-compact if it is quasi-compact).

Finally, an Artin stack F is locally of finite presentation if it has a smooth atlas U −→ F such that the scheme U is locally of finite presentation. An Artin stack F is strongly of finite presentation if it is strongly quasi-compact and locally of finite presentation.

2. Presentation as quotient stacks: The full sub-Segal category of St(k) consisting of Artin stacks is stable by finite limits and disjoint unions. Moreover, a stack F is an Artin n-stack if and only it is equivalent to the quotient stack of a groupoid object X 1 ⇒ X 0 with X 0 and X 1 being Artin (n-1)-stacks and the morphisms X 1 −→ X 0 being smooth (see [HAGII,§1.3.4]). As in the usual case of Artin 1-stacks, the geometry of such a quotient stack is the equivariant geometry of the groupoid X 1 ⇒ X 0 . This also provides a systematic way to construct examples of higher stacks by taking quotient of schemes by Artin group stacks. For instance, the quotient stack of a scheme by an action of an Artin group 1-stack is in general an Artin 2-stack.

3. Gerbes: An Artin stack F is a gerbe if its 0-truncation π 0 (F ) is an algebraic space and if the natural morphism F −→ π 0 (F ) is flat. It can be shown that an Artin stack F is a gerbe if and only if the projection
I F := F × F ×F F −→ F
is flat (I F is called the inertia stack of F , and is the stack of morphisms from the constant stack S 1 := K(Z, 1) to F ) (see [To3]).

By generic flatness it can thus been shown that any Artin n-stack F strongly of finite presentation over Spec k possesses a finite decreasing sequence of closed substacks
F r = ∅ / / F r−1 / / . . . F 1 / / F 0 = F, such that each stack F i − F i+1 is a gerbe.
4. Deligne-Mumford stacks: An Artin stack F is a Deligne-Mumford stack if there exists a smooth altas U −→ F which is an etale morphism. This is equivalent to the fact that the diagonal morphism F −→ F × F is unramified. However, the notion of a Deligne-Mumford n-stack is not very interesting for n > 1, as the 1-truncation τ ≤1 F is always a Deligne-Mumford 1-stack and the natural morphism F −→ τ ≤1 F is an etale morphism. Indeed, we can write F as the quotient of a groupoid object X 1 ⇒ X 0 where X 0 is a scheme, X 1 is a Deligne-Mumford (n-1)-stack and the morphism X 1 −→ X 0 is etale. The morphism X 1 −→ X 0 being etale, it is easy to check that the 0-truncation π 0 (X 1 ) is an algebraic space etale over X 0 , and that furthermore π 0 (X 1 ) ⇒ X 0 defines an etale groupoid whose quotient is equivalent to τ ≤1 F . This shows that τ ≤1 F is a Deligne-Mumford 1-stack, and the diagram
X 0 −→ F −→ τ ≤1 F shows that the projection F −→ τ ≤1 F is etale.

## Flat and smooth atlases:

A stack F is an Artin stack if and only there exists a scheme X and a a faithfully flat and locally finitely presented representable morphism p : X −→ F . This means that we would not gain anything by defining a generalized notion of being an Artin stack by only requiring the existence of a flat atlas. To show this we define X to be the stack of quasi-sections of the morphism p, as follows: for an affine scheme S a morphism S −→ X is by definition given by a commutative diagram in St(k)
S ′ f / / X S / / F,
where f is a finite flat morphism. The stack X can be seen to be an Artin stack together with a natural projection X −→ F . We denote by X lci the open substack of consisting of points for which the relative cotangent complex of the morphism S ′ −→ X is perfect of amplitude contained in [−1, 0]. Then, an argument of obstruction theory shows that the morphism X lci −→ F is smooth (note that it is automatically representable because of the condition on the diagonal of F ). Finally, the morphism X lci −→ F is surjective as it is so on points with values in algebraically closed fields (because any scheme locally of finite type over an algebraically closed field contains a point which is Cohen MacCauley).

6. Homotopy groups schemes: For any affine scheme and any morphism X −→ F of stacks we define the loop stack at x to be
Ω x F := X × F X,
which is a stack over X. The natural morphism
Ω x F × X Ω x F ≃ X × F X × F X −→ X × F X
makes Ω x F into a group stack over X. The n-th iterated loop stack is defined by induction
Ω (n) x F := Ω x (Ω (n−1) x F ),
which is again a group stack over X. The n-th homotopy sheaf of F at the point x is defined to be π n (F, x) := π 0 (Ω (n) x F ) and is a sheaf of groups (abelian for n > 1) on X.

It can be shown that if F is an Artin stack strongly of finite presentation then for any k-field K and any morphism x : Spec K −→ F , the sheaf of groups π n (F, x) is representable by a group scheme of finite presentation over Spec K (see [To3]). The group scheme π n (F, x) is the group of n-automorphisms of the points x in F , and are higher analogs of the isotropy groups of Artin 1-stacks. However, the notion of derived category of a ringed Segal topos is bit beyond the scope of this overview and we will rather give an explicit description of L(F, O F ) as follows. The stack F can be writen as a colimit (in St(k)) of a simplicial scheme X * . For any n, the category C(X, O Xn ) of complexes of (big) O Xn -modules on X n can be endowed with a cofibrantly model category structure for which the equivalences are the quasi-isomorphisms (see [Ho2]). Moreover, for any transition morphism a : X n −→ X m the adjunction
a * : C(X, O Xm ) −→ C(X, O Xn ) C(X, O Xm ) ←− C(X, O Xn ) : a *
is a Quillen adjunction. Passing to the localizations (in the sense of point (7) of §2.2) of the subcategories of cofibrant objects we obtain a cosimplicial diagram of Segal categories
∆ −→ SeCat n → L(C(X, O Xn ) c ).
The homotopy limit of this diagram, taken in the homotopy theory of Segal categories gives a Segal category L(F, O) which is the derived Segal category of O F -modules. Its homotopy category is by definition To1], and thus its homotopy category D(F, O F ) inherits a natural triangulated structure.
D(F, O F ). The Segal category L(F, O F ) is stable in the sense of [To-Ve2,
It is important to note that D(F, O F ) is in general not the derived category of a ringed topos (as soon as F is not 0-truncated, i.e. a sheaf of sets), and this is directly related to the fact that the topos St/F is in general not generated by a Grothendieck topos. The derived category D(F, O F ) can also be identified with the full sub-category of the derived category of the simplicial scheme X * consisting of objects satisfying the cohomological descent condition. When F is a scheme, L(F, O F ) is the Segal category of complexes of big O F -modules, and thus D(F, O F ) is the usual derived category of sheaves of O F on the big ffqc site of F .

We define a full sub-Segal category L qcoh (F ) of L(F, O F ) consisiting of objects E such that for any affine scheme X and any morphism u : X −→ F , the object u * (E) ∈ D(X, O X ) is a quasi-coherent complex. Objects in L qcoh (F ) will be called quasi-coherent complexes of O F -modules. When F is an Artin stack, it is possible to define a t-structure on L qcoh (F ), by defining objects with non positive amplitude to be E ∈ L qcoh (F ) such that for any affine scheme X and any morphism u : X −→ F , the complex u * (E) has no non zero positive cohomology sheaves. Dually, an object E is of non negative amplitude if for any affine scheme and flat morphism u : X −→ F , the quasi-coherent complex u * (E) on X has no non zero negative cohomology sheaves (as sheaves on the small Zariski site of X). The heart of this t-structure is denoted by QCoh(F ), and is called the abelian category of quasi-coherent sheaves on F .

For any morphism of stacks f : F −→ F ′ there exists an adjunction of Segal categories
f * : L(F ′ , O F ′ ) −→ L(F, O F ) L(F ′ , O F ′ ) ←− L(F, O F ) : f *
The functor f * preserves quasi-coherent complexes, and induces a functor
f * : L qcoh (F ′ ) −→ L qcoh (F ).
It can be shown that this functor admits a right adjoint f qoch *
f qcoh * : L qcoh (F ′ ) −→ L qcoh (F ).
However, in general f * does not preserves quasi-coherent complexes and thus f qcoh * is not induced by the functor f * in general. However, if f : F −→ F ′ is a strongly quasi-compact morphisms between Artin stacks, and if E L qcoh (F ) is bounded below, then there exists a natural equivalence in L(F ′ , O F ′ ) between f * (E) and f qcoh * (E). (see [To-Va-Ve]). Once again, the notion of a derived Segal category of ringed Segal topos is outside of the scope of this overview, so it is preferable to give the following more explicit description of L(F et , Z/l i ). We write F as the colimit in St(k) of a simplicial diagram of schemes X * . For each n, we consider the category C((X n ) et , Z/l i ) of (unbounded) complexes of sheaves of Z/l i -modules on the small etale site of X. The localization of C((X n ) et , Z/l i ) along the quasi-isomorphisms is by definition the Segal category L((X n ) et , Z/l i ). For each simplicial morphism X n −→ X m there is a natural pull back morphism
L((X m ) et , Z/l i ) −→ L((X n ) et , Z/l i ).
We get that way a cosimplicial diagram n → L((X n ) et , Z/l i ) of Segal categories and we set
L(F et , Z/l i ) = Holim n∈∆ L((X n ) et , Z/l i ),
where the homotopy limit in taken in the model category of Segal categories. Finally, the natural morphisms Z/l i −→ Z/l i−1 induce natural morphisms of Segal categories
L(F et , Z/l i ) −→ L(F et , Z/l i−1 ),
and by definition the l-adic derived Segal category of F is
L(F et , Z l ) = Holim i L(F et , Z/l i ).
As for the case of complexes of O F -modules, the associated homotopy category
D(F et , Z/l i ) := Ho(L(F et , Z/l i ))
is not the derived category of a Grothendieck topos, and this related to the fact that Et/F is not generated by a Grothendieck site except when F is an algebraic space.

For any morphism of Artin stacks f : F −→ F ′ there exists a natural adjunction
f * : L(F ′ et , Z l ) −→ L(F et , Z l ) L(F ′ et , Z l ) ←− L(F et , Z l ) : f * .
It is also possible to define a direct image with compact supports
f ! : L(F et , Z l ) −→ L(F ′ et , Z l ),
at least when the morphism f is strongly of finite type. This morphism has a right adjoint
f ! : L(F ′ et , Z l ) −→ L(F et , Z l ).
These four operations can be completed into six operations by introducing a tensor product and a corresponding internal Hom operations. The six operations can then be used to prove a base change formula as well as a trace formula for certain kind of l-adic complexes satisfying some finiteness conditions. These results are out of the scope of the present overview, and the reader will find the details in the forthcoming work [To-Va-Ve]. I would also like to mention [Be] and [La-Ol] where the l-adic formalism has been studied for Artin 1-stacks, and [To3] for a particular case of the trace formula for special Artin stacks (see below for the definition).

9. Tangent and cotangent spaces: Let F be an Artin stack, X = Spec A an affine scheme and x : X −→ F be a morphism of stacks. We define a morphism of Segal categories
Der F (X, −) : A − M od −→ T op
in the following way. For an A-module M we consider the trivial square zero extension A⊕M , and the natural closed embedding of affine schemes X −→ X[M ] := Spec A ⊕ M . We set
Der F (X, M ) := M ap X/St(k) (X[M ], F ).
It can be shown that there exists a unique objects Ω 1 F,x ∈ D ≥0 (A), in the positive derived category of A-modules with natural equivalences
Der F (X, M ) ≃ M ap(Ω 1 F,x , M )
, where the mapping space on the right hand side is taken in the model category of unbounded complexes of A-modules (see [Ho1]). The complex Ω 1 F,x is called the cotangent space of F at x, thought its not an A-module but only a complex of A-modules. The negative part of the dual complex of A-modules is called the tangent space of F at x and is denoted by
T x F := RHom(Ω 1 F,x , A) ≤0 ∈ D ≤0 (A). The relation between Ω 1
F,x and the tangent stack is the following. We define a stack T F −→ F by setting
T F := Map(Spec k[ǫ], F ), where k[ǫ]
is the k-algebra of dual numbers and where Map are the internal Homs of St(k) (i.e. the stacks of morphisms). For a point x : X −→ F as above we have a natural equivalence of stacks over X
X × F T F ≃ V(Ω 1 F,x ), where V(Ω 1 F,x )
is the linear stack associated to Ω 1 F,x as defined in the example (2) of the section §3.2 below.

It is also possible to glue all the complexes Ω 1 F,x for x : X −→ F varying in the Segal category of smooth morphisms to F and to obtain an object Ω F ∈ L ≥0 qcoh (F ), called the cotangent sheaf of F , thought its not a sheaf but a complexes of sheaves. The negative part of the dual of Ω F , as a complex of O F -modules, is called the tangent sheaf of F and is denoted by T F . In general T F is not quasi-coherent anymore (except when Ω 1 F is perfect). There is of course a natural equivalence of stacks over F
T F ≃ V(Ω F ).
Finally, in the section on derived stacks (see §4) we will see that Ω F is only the truncated version of a cotangent complex encoding important informations about the deformation theory of F . 10. Complex Artin stacks and analytic stacks: Assume now that k = C. We can define a Segal category St(C) an of analytic stacks, as well as a notion of Artin analytic n-stacks. We start with Stein, the site of Stein analytic spaces endowed with natural transcendent topology. The Segal category of stacks on Stein is denoted by St(C) an . The notion of Artin n-stacks in St(C) an is defined using a straightforward analog of the algebraic notion.

The analytification functor provides a functor a : C − Af f −→ Stein, which is a continuous morphism of sites. It induces an adjunction on the Segal categories of stacks
a ! : St(C) −→ St(C) an St(C) ←− St(C) an : a * ,
where on the level of simplicial presheaves the functor a * is defined by the formula a * (F )(X) := F (X an ). The functor a ! is denoted by F → F an and is called the analytification functor.

Being an inverse image functor induced from a continuous morphism of sites it commutes with finite limits. Moreover, as it sends smooth morphisms between affine C-schemes it is easy to check that it preserves Artin n-stacks.


## Some examples

1. Eilenberg-MacLane stacks: For a sheaf of abelian groups A (on the site of affine kschemes), we can consider the stack K(A, n) ∈ St(k). The stack K(A, n) is characterized, up to equivalence in St(k), by the following universal property: for any affine k-scheme X there are functorial bijections π 0 (M ap(X, K(A, n))) ≃ H n f f qc (X, A).

More generally, there exist functorial equivalences of simplicial sets
M ap(X, K(A, n)) ≃ DK(H f f qc (X, A))
,

where H f f qc (X, A) is the complex of cohomology of X with coefficients in the sheaf A, and DK is the Dold-Kan functor from complexes to simplicial sets. This implies in particular that we have π i (M ap(X, K(A, n))) ≃ H n−i f f qc (X, A). The Eilenberg-MacLane stacks can be used to define the cohomology groups of any stack F ∈ St(k) with coefficients in the sheaf of abelian groups A by the formula
H n (F, A) := π 0 (M ap(F, K(A, n)) = [F, K(A, n)].
This gives a good notion of cohomology for any Artin stacks with coefficients in some sheaf of abelian groups. Of course, as we use the ffqc topology this is ffqc cohomology, and for a scheme X and a sheaf of groups A we have H n (X, A) = H n f f qc (X, A). Finally, when the sheaf of groups A is represented by a an algebraic space which is flat and locally of finite presentation over Spec k, then K(A, n) is an Artin n-stack. In this case the stack K(A, n) is moreover smooth over Spec k, as this can been checked inductively on n (the case n = 1 being treated in [La-Mo]).

2. Linear stacks: Let F be an Artin stack and let E ∈ L(F, O F ) be a quasi-coherent complex over F . We define a stack V(E) over F by
V(E) : St(k)/F −→ T op (f : F ′ → F ) → M ap L(F ′ ,O F ′ ) (f * (E), O F ′ ).
The stack V(E) is an generalization of the total affine space associated to a quasi-coherent sheaf, and is called the linear stack associated to E. By construction, it is characterized by the following universal property The stack V(E) is an Artin stack if E is a perfect complex (i.e. its pull-backs to any affine scheme is quasi-isomorphic to a bounded complex of vector bundles of finite rank), and the morphism V(E) −→ F is then strongly of finite presentation. If moreover E is perfect with amplitude contained in [a, b] then V(E) is an Artin (b+1)-stack. Finally, if E is perfect and of positive amplitude then the morphism V(E) −→ F is smooth (see [To-Va]).
π 0 (M ap St(k)/F (F ′ , V(E))) ≃ Ext 0 (f * (E), O F ′ ), for any f : F ′ −→ F in St(k)/F ,
3. The stack of abelian categories: (see [An]) For any k ′ ∈ k − CAlg we consider k ′ − Ab the category whose objects are abelian k ′ -linear categories A which are equivalent to B − M od, for some associative k ′ -algebra B which is projective and of finite type as a module over k ′ . The morphisms in k ′ − Ab are taken to be the k ′ -linear equivalences. For a morphism k ′ → k ′′ in k − CAlg, there exists a base change functor
k ′ − Ab −→ k ′′ − Ab
sending a category A to the category of k ′′ -modules in A. This defines a presheaf of categories on k − Af f , and passing to the nerve provides a simplicial presheaf
Ab : k − CAlg −→ SSet k ′ → Ab(k ′ ) := N (k ′ − Ab).
The homotopy groups of the simplicial set Ab(k ′ ) can been described explicitely in the following way. The set π 0 (Ab(k ′ )) is the set of equivalences classes of abelian k ′ -linear categories in k ′ −Ab. For a given A ∈ Ab(k ′ ), the group π 1 (Ab(k ′ ), A) is naturally isomorphic to the group of isomorphisms classes of autoequivalences of A. The group π 2 (Ab(k ′ ), A) is the group of invertible elements in the center of A (i.e. the automorphism group of the identity functor of A). Finally, for any i > 2 we have π i (Ab(k ′ ), A) = 0.

The object Ab is considered as a simplicial presheaf over k − Af f , and thus as a stack Ab ∈ St(k). The simplicial presheaf itself is not a stack, and thus the natural morphism
Ab(k ′ ) −→ M ap St(k) (Spec k ′ , Ab)
is not an equivalence in general. This is due to the fact that there exist non trivial twisted form of abelian categories for the etale topology. The object Ab ∈ St(k) should therefore be truly considered as the associated stack to the simplicial presheaf described above.

It has been proved by M. Anel that Ab is an Artin 2-stack locally of finite presentation over Spec k (see [An]). Moreover, for an abelian k-linear category A, considered as a global point A ∈ Ab(k), then the tangent space of Ab at A is given by
T A Ab ≃ HH(A)[2] ≤0 ,
where HH(A) is the complex of Hochschild cohomology of A. Therefore, the Artin 2-stack Ab is a global geometric counter part of the formal moduli of abelian categories studied in [Lo-VdB1, Lo-VdB2].

4. The stack of perfect complexes: For any k ′ ∈ k − CAlg, we consider P arf (k ′ ) the category of flat perfect complexes of k ′ -modules and quasi-isomorphisms between them. As we restricted to flat complexes for any morphism k ′ → k ′′ there exists a well defined base change functor
− ⊗ k ′ k ′′ : P arf (k ′ ) −→ P arf (k ′′ ).
Passing to the nerve we get a simplicial presheaf
Parf : k − CAlg −→ SSet k ′ → N (P arf (k ′ )),
that we consider as an object in St(k). Using the techniques of left Quillen presheaves presented at the end of §2.3, it is possible to prove that the above simplicial presheaf is already a stack, and therefore that Parf (k ′ ) is equivalent to M ap(Spec k ′ , Parf ), and is a classifying space for perfect complexes of k ′ -modules. The set π 0 (Parf (k ′ )) is in natural bijection with the set of isomorphisms classes of D parf (k ′ ), the perfect derived category of k ′ . For a given perfect complex E ∈ Parf (k ′ ), the group π 1 (Parf (k ′ ), E) is naturally isomorphic to the automorphism group of the object E ∈ D parf (k ′ ). Moreover, the higher homotopy group π i (Parf (k ′ ), E) can be identified with Ext 1−i (E, E) for any i > 1. This provides a rather complete understanding of the stack Parf .

The stack Parf is not truncated as it classifies perfect complexes of abitrary amplitude, and thus can not be an Artin n-stack for any n. However, it can be written as a union of substacks Parf [a,b] of complexes of amplitude contained in [a, b]. It is a theorem that the stacks Parf [a,b] are Artin n-stacks for n = (b − a + 1) and locally of finite presentation over Spec k (see [To-Va] 
T E Parf ≃ REnd(E, E)[1] ≤0 .
The stack Parf can be generalized in the following way. Let B be an associative and unital dg-algebra over k. We assume that B is saturated, i.e. that it is perfect as complex of k-modules, but also as a bi-dg-module over itself. Then, for any k ′ ∈ k − CAlg we define Parf B (k ′ ) to be the nerve of the category of quasi-isomorphisms between perfect B ⊗ L k k ′ -dgmodules (see [To-Va]). This defines a stack Parf B ∈ St(k). As above, the set π 0 (Parf B (k ′ )) is in natural bijection with the set of isomorphisms classes of D parf (B ⊗ L k k ′ ), the perfect derived category of B ⊗ L k k ′ . For a given E ∈ Parf B (k ′ ), the group π 1 (Parf B (k ′ ), E) is naturally isomorphic to the automorphism group of the object E ∈ D parf (B ⊗ L k k ′ ). The higher homotopy groups π i (Parf (k ′ ), E) can be identified with Ext 1−i (E, E) for any i > 1, where the Ext-groups are computed in the triangulatd category D parf (B ⊗ L k k ′ ). It is useful to note that the stack Parf B only depends on the dg-category T of perfect B-dg-modules (i.e. is invariant under derived Morita equivalences). Therefore if T is a dg-category equivalent to the dg-category of perfect B-dg-modules for a saturated dg-algebra B we will simply write Parf T instead of Parf B . Using the notations of [To-Va], Parf T is the truncation of the derived stack M T .

The stack Parf B can be proved to be locally geometric (see [To-Va]). An important consequence of this theorem is the existence of a locally geometric stack of perfect complexes on a smooth and proper scheme X over k. Indeed, the derived category D qcoh (X) is known to have a compact generator E (see [Bo-VdB]). Therefore, if we set B := REnd(E), B is a saturared dg-algebra such that D parf (X) ≃ D parf (B), and thus Parf B can be identified with Parf (X) the moduli stack of perfect complexes on X. An important corollary of the geometricity of Parf B is thus the geometricity of Parf (X).

As a remark, the maximal sub-1-stack Parf (X) 1−rig ⊂ Parf (X), consisting of perfect complexes on X with non negative Ext-groups between themselves, is easily seen to be an open substack. The stack Parf (X) 1−rig is therefore an Artin 1-stack. The stack Parf (X) 1−rig has previously been shown to be an Artin 1-stack by M. Leiblich in [Lie].


## 5.

Mapping stacks: The Segal category of stacks St(k) possesses internal Homs: for any two objects F and G in St(k), the morphism
St(k) −→ T op H → M ap(H × F, G)
is representable by an object Map(F, G) ∈ St(k).

For a smooth and proper scheme X, and an Artin n-stack F locally of finite presentation, it can be proved that the stack Map(X, F ) is again an Artin n-stack locally of finite presentation. The proof of this general fact follows from a generalization of Artin's representability criterion to higher stacks which can be found in [Lu1]. In some cases (i.e. for some particular choices of X and/or F ), it can be proved directly that Map(X, F ) is an Artin n-stack. This is for instance the case when F = Parf [a,b] as we mentioned in the last example. Also, when X is finite over Spec k, the geometricity of Map(X, F ) can be proved by an explicit construction of an atlas.

A much easier situation is for K a finite simplicial set (weakly equivalent to a finite simplicial set is enough), considered as a constant simplicial presheaf over k−Af f and thus as an object in St(k). For any Artin n-stack F the stack Map(K, F ) can be written as a finite limit of the stack F itself, and thus is again an Artin n-stack. When K represents the homotopy type of a compact CW complex X, then Map(K, F ) should be understood as the stack of non-abelian cohomology of X with coefficients in F . The fact that Map(K, F ) is an Artin n-stack when F is so is in some sense a generalization of the fact that the 1-stack of local systems of X is an Artin 1-stack.

6. The stack of saturated dg-categories: Recall from [To-Va] and from the point 4 above the notion of a saturated dg-category over the ring k. They are the dg-categories quasiequivalent to the dg-category of perfect B-dg-module for an associative dg-algebra B which is perfect as a complex of k-module and as (B ⊗ L k B op )-dg-module. For k ′ ∈ k − CAlg we consider dgCat k ′ the category of small dg-categories over k ′ . There exists a model category structure on dgCat k ′ whose equivalences are the quasi-equivalences (see [Tab]). We consider dgCat cof k ′ the subcategory of dgCat k ′ consisting of cofibrant objects. We set dgCat sat (k ′ ) to be the nerve of the category of quasi-equivalences between saturated dg-categories over k ′ . This defines a simplicial presheaf over k − Af f and thus an object dgCat sat ∈ St(k).

Question 3.1 Is the stack dgCat sat locally geometric ?

I believe that the answer to this question is positive. For an integer n > 0, we define a substack dgCat sat,n ⊂ dgCat sat of dg-categories T such that HH i (T ) = 0 for all i ≤ −n (here HH(T ) denotes the Hochschild cohomology of the dg-category T ). It follows from the results of [To2] that the substack dgCat sat,n is an (n + 2)-stack. Moreover, as for a given saturated dg-category T the Hochschild complex HH(T ) is perfect, we clearly have that dgCat sat is the union of dgCat sat,n . To answer positively the above question it is then enough to show that dgCat sat,n is an Artin (n + 2)-stack. This can be approached for example by a direct application of the Artin's representability criterion, or even better by its extension by J. Lurie to the derived case (see [Lu1]). As expected, the tangent complex should be given by
T T dgCat sat ≃ HH(T )[2] ≤0 .

## Some developments

1. Some representability statements: Recall from the example (4) of §3.2 that for any saturated dg-category T of the form P arf (B) for a saturated dg-algebra B, there exists a locally geometric stack Parf B classifying perfect B-dg-modules (or equivalently objects in T ). As the stack Parf B only depends on T and not on B itself we will denote it by Parf T .

As a first consequence of the geometricity of Parf T , if k is a field then the group aut(T ) of self-equivalences of T up to homotopy (aut(T ) is really a sheaf of groups) can be seen to be representable by an algebraic group scheme locally of finite type over k. Moreover, it can be shown that this group only has a countable number of connected components and thus can be written as an extension
1 / / aut(T ) e / / aut(T ) / / Γ / / 1
where Γ is a countable discrete group and aut(T ) e is a connected algebraic group of finite type over k (see [To-Va]).

Another interesting consequence is the existence of an algebraic space of simple objects in T . For this, we consider the open substack Parf simp We now suppose that k = C. When T is the dg-category of perfect complexes on a smooth and proper variety X, the algebraic space M simp T contains X as a closed and open subalgebraic space. Indeed, an embedding X ֒→ M simp T consists of sending a point x ∈ X to the class of the skyscraper sheaf k(x). Assume now that T is a dg-model for the Fukaya category of a Calabi-Yau variety X. It is expected that T is saturated, and thus the algebraic space M simp T is expected to exist. If a mirror X ′ of X exists, then by what we have just seen X ′ is a sup-space of M simp T . Therefore, it might be tempting to try to construct X ′ has a well chosen sub-space of M simp T . In order to be able to say exactly which sub-space X ′ is it is needed to have a reasonable stability condition on T , and to try to define X ′ as the sub-space of M simp T classifying stable simple objects E in T such that Ext * (E, E) ≃ Sym(Ext 1 (E, E)[−1]). This approach suggests that the construction of the mirror only depends on a good understanding of the Fukaya category of X (i.e. showing that it is saturated and constructing a meaningful stability structure on it).
T ⊂ Parf T consisting of objects E in T such that Ext i (E, E) = 0 ∀ i < 0 Ext 0 (E, E) = k,

## Motivic invariants:

We will say that an Artin stack F is special if it is strongly of finite presentation and if for any field K and any point x : Spec K −→ F the sheaf π i (F, x) is represented by an affine group scheme which is unipotent when i > 1. The class of special Artin stacks already contains several interesting examples, and they seem to be the reasonable coefficients for non-abelian Hodge cohomology (see [S1]).

We define an abelian group K(CH sp (k)) by taking the quotient of the free abelian group over equivalence classes of special Artin stacks by the following three relations: (c) LetF 0 be stack which is either an affine scheme, or K(G a , n) for some n > 0. Let f : F −→ F ′ be a morphism between Artin special stacks such that for any morphism X −→ F ′ with X an affine scheme, there exists a Zariski open covering U −→ X such that F × F U is equivalent as a stack over U to F 0 × U −→ U (we say that f is a Zariski locally trivial F 0 -fibration).
(a) [F F ′ ] = [F ] + [F ′ ] (b) Let f : F −→ F ′ beThen [F ] = [F ′ × F 0 ].
The group K(CH sp (k)) is made into a ring by setting
[F ].[F ′ ] := [F × F ′ ].
The ring K(CH sp (k)) is called the Grothendieck ring of special Artin stacks. It receives a natural morphism from the Grothendieck ring of varieties K(V(k)) −→ K(CH sp (k)). Here we define K(V(k)) to be the quotient of the free abelian group over isomorphism classes of schemes of finite type over Spec k by the following two relations:
(a) [X Y ] = [X] + [Y ]
(b) Let f : X −→ Y be a morphism between special Artin stacks, such that for any algebraically closed field K the induced morphism X(K) −→ Y (K) is an equivalence.


## Then we have [X] = [Y ].

This definition of the Grothendieck ring K(V(k)) only differs from the usual one in non-zero characteristic. In general our group K(V(k)) is the quotient of the usual Grothendieck group obtained by also inverting the purely inseparable morphisms.

It can be proved, that if L = [A 1 ] then the natural inclusion morphism
K(V(k))[L −1 , {(L i − 1) −1 } i>0 ] −→ K(CH sp (k))[L −1 , {(L i − 1) −1 } i>0 ]
is an isomorphism (see [To3]). As a consequence we obtain that any additive invariant for schemes (i.e. an invariant factorizing through the ring K(V(k))) extends uniquely as an additive invariant of special Artin stacks). It is possible this way to define the motivic Euler characteristic χ mot (F ) of any special Artin stack as a class in the Grothendieck ring of motives (suitably localized). Taking the Hodge realization we obtain a definition of the Hodge numbers for any special Artin stack. Taking the l-adic realization we obtain a version of the trace formula expression the number of rational point of special Artin stacks over finite field in termes of the trace of the Frobenius acting on some complex of l-adic cohomology with compact supports.

As an example, for any compact CW complex X, represented by a finite simplicial set K, and for any special Artin stack F , the stack Map(K, F ) is again a special Artin stack. The Hogde numbers of Map(K, F ) provide interesting homotopy invariants of X, mesuring in some sense the size of the space of non-abelian cohomology of X with coefficients in F .


## 3.

Hall algebras for dg-categories: We let F be a stack and we assume that it is locally special in the sense that it is the union of its open special Artin sub-stacks. We define a relative Grothendieck ring K(CH sp (F )) by taking the free abelian group over equivalence classes of morphisms F ′ −→ F with F ′ a special Artin stack, and imposing the same three relations. The fiber product over F makes K(CH sp (F )) into a commutative ring (without unit unless F itself special and not only locally special).

For any morphism f : F −→ G between locally special stacks there exists a natural pushforward f ! : K(CH sp (F )) −→ K(CH sp (G)), obtained by sending F ′ −→ F to the composite with f , which is a morphism of abelian groups. When f is strongly of finite type, then there also exists a pull-back
f * : K(CH sp (G)) −→ K(CH sp (F )), sending F ′ −→ G to F ′ × G F −→ F ,
which is a morphism of rings. The functorialities f ! and f * satisfy the base change formula when this makes sense.

Let T be a saturated dg-category and Parf T the stack of objects in T as presented in example (4) of §3.2. The stack Parf T is locally special, and thus we can consider its Grothendieck group K(CH sp (Parf T )). We will use the notation H abs (T ) := K(CH sp (Parf T )).

We also consider the dg-category T (1) of morphisms in T , which is again a saturated dgcategory (see [To-Va]). There exists a diagram of stacks
Parf T (1) c / / π Parf T Parf T × Parf T .
The morphism c sends a morphism x → y in T to the object y. The morphism π sends a morphism x → y to the pair (x, y/x), where y/x is the cone of the morphism. The morphism π can be seen to be strongly of finite type and thus we obtain a natural morphism
K(CH sp (Parf T × Parf T )) c ! •π * / / K(CH sp (Parf T )) ,
and therefore a multiplication µ : H abs (T ) ⊗ H abs (T ) −→ H abs (T ).

It can be checked that this multiplication makes H abs (T ) into an associative and unital algebra (by the same argument as in [To4]). The algebra H abs (T ) is called the absolute Hall algebra of T .

The algebra H abs (T ) is a two-fold generalization of the usual Hall algebra studied in the context of representation theory (see e.g. [De-Xi]). First of all it is defined for dg-categories instead of abelian categories, and moreover the base ring k needs not to be a finite field anymore. But it is also defined by geometric methods and is in some sense a universal object mapping to several possible incarnations by means of realization functors. As an example, if k = F q is a finite field, then there exists a morphism of algebras (surjective up to torsion)
H abs (T ) −→ DH(T ),
where DH(T ) is the derived Hall algebra defined in [To4]. This morphism simply sends an object p : F ′ −→ Parf T to the function on Parf T (F q ) which counts the number of rational points in the fiber of p. When T is a dg-model for the bounded derived category of an abelian category A, then DH(T ) contains a copy of the usual Hall algebra of A. This explains how H abs (T ) is a geometric counter-part of DH(T ), and thus how it generalizes usual Hall algebras. An important advantage of H abs (T ) compare to DH(T ) is that it is defined over Z.

It is expected that a suitable generalization of the construction T → H abs (T ) to the case of 2-periodic dg-categories (i.e. dg-categories for which the translation functor x → x[2] comes equiped with an equivalence with the identity) would give a direct construction of quantum enveloppping algebras, generalizing the fact that Hall algebras can be used to reconstruct the positive nilpotent part of quantum envopping algebras (see To4] for more on the subject).

4. The Riemann-Hilbert correspondence: Let X be a smooth and projective complex variety. We associate to it two stacks X B and X DR in St(C) as follows. The stack X B is the constant stack with values Sing(X(C)), the simplicial sets of singular simplicies of the topological space of complex points of X. The stack X DR is defined by its functor of points by X DR (A) := X(A red ) for any A ∈ C − CAlg. We assume that F is a special Artin stack (as defined above in point (2)) which is connected (i.e. the sheaf π 0 (F ) is isomorphic to * ). By example (5) of §3.2 we know that the stack Map(X B , F ) is an Artin stack strongly of finite type. It can also be proved that the stack Map(X DR , F ) is an Artin stack strongly of finite type (e.g. by using a Postnikov decomposition of F ). A version of the Riemann-Hilbert correspondence states that there exists a natural equivalence of analytic stacks (see [S1])
φ : Map(X B , F ) an ≃ Map(X DR , F ) an .
This equivalence is the starting point of a theory of higher non-abelian Hodge structures: the stack Map(X DR , F ) is considered as the de Rham non-abelian cohomology of X with coefficients in F , and the morphism φ as some kind of integral structure on it (at least when F is defined over Z). It is then possible to say what are the Hodge and weight filtrations on Map(X DR , F ), and to state a definition of a non-abelian mixted Hodge structure (see [Ka-Pa-Si]).

5. Schematic homotopy types: Let us assume that k is now a field. We let CH sp (k) ⊂ St(k) be the full sub-Segal category consisting of special Artin stacks (as defined in point (2)). For any connected simplicial set K, we consider the functor between Segal categories CH sp (k) −→ T op sending F to M ap(K, F ). This morphism is not corepresentable by a special Artin stack in general, but it can be proved to be corepresentable by an object (K ⊗ k) sch ∈ St(k) which is local with respect to the set of objects CH sp (k). In other words, there exists a morphism of stacks u : K −→ (K ⊗ k) sch satisfying the following two conditions:

(a) For any F ∈ CH sp (k), the induced morphism
u * : M ap((K ⊗ k) sch , F ) −→ M ap(K, F )
is an equivalence.

(b) If f : G −→ G ′ is a morphism of stacks such that for any F ∈ CH sp (k), the induced morphism
f * : M ap(G ′ , F ) −→ M ap(G, F )
is an equivalence, then the induced morphism
f * : M ap(G ′ , (K ⊗ k) sch ) −→ M ap(G, (K ⊗ k) sch )
is also an equivalence.

The existence of such a morphism K −→ (K ⊗ k) sch can easily be deduced from the results of [To5], and the two above properties characterizes (K ⊗ k) sch uniquely as a stack under K. The stack (K ⊗ k) sch is called the schematization of K over Spec k, and is somehow an envelope of K with respect to the objects of CH sp (k).

The stack (K ⊗ k) sch can be proved to satisfy the following properties.

(a) We have π 0 ((K ⊗ k) sch ) = * , and for any point x ∈ K, the sheaf π i ((K ⊗ k) sch , x) is representable by an affine group scheme which is unipotent for i > 1. Therefore, thought (K ⊗ k) sch is not an Artin stack (its diagonal is not locally of finite type in general), it is rather close to be a special Artin stack. In fact it can be shown that (K ⊗ k) sch is a limit of special Artin stacks, and in some sense it can be considered as a pro-object in CH sp (k).

(b) The affine group scheme π 1 ((K ⊗ k) sch , x) is isomorphic to the pro-algebraic completion of the discrete group π 1 (K, x) over the field k. Moreover, for a finite dimension linear representation V of π 1 ((K ⊗ k) sch , x), corresponding to a local system L of k-vector spaces on K, we have
H * ((K ⊗ k) sch , V ) ≃ H * (K, L).
(c) When K is simply connected and finite (i.e. each K n is finite), then there are isomorphisms
π i ((K ⊗ k) sch ) ≃ π i (K) ⊗ G a if char(k) = 0 π i ((K ⊗ k) sch ) ≃ π i (K) ⊗ Z p if char(k) = p > 0.
This shows that in this case (K ⊗ k) sch is a model for the rational homotopy type when k = Q and for the p-adic homotopy type when k = F p .

In [To5] the construction K → (K ⊗ k) sch has been proposed as a solution to the schematization problem stated in [Gr]. In [Ka-Pa-To] the schematization construction over C has been used in order to give an alternative to non-abelian Hodge theory. More precisely, for a smooth and projective complex manifold X, we take K to be the simplicial set of singular simplicies of the underlying topological space X top of X. The schematization of K is simply denoted by (X top ⊗ C) sch = (K ⊗ C) sch . The main theorem of [Ka-Pa-To] states that there exists an action of the discrete group C * on the stack (X top ⊗ C) sch , called the Hodge filtration. This action can be used to recover all previously known constructions of the Hodge filtration on cohomology, fundamental group and rational homotopy groups. It is also possible to prove a purity condition for this action, that have rather strong consequences on the stack (X top ⊗ C) sch and thus on the homotopy type of X top . New examples of homotopy types which are not realizable by smooth projective varieties can be constructed that way. I should also mention [Ol1,Ol2] in which a crystalline and a p-adic analog of the constructions above have been studied.

6. The period map to the moduli of dg-categories: Let Var smp be the stack of smooth and proper schemes over Spec k. It is a 1-stack and thus an object in St(k). The construction sending a smooth and proper scheme X to the dg-category L parf (X) of perfect complexes on X induces a morphism of stacks
φ : Var smp −→ dgCat sat .
This morphisms factors through the maximal sub-2-stack dgCat sat,0 and thus provides a morphism φ : Var smp −→ dgCat sat,0 .

When k is a field of characteristic zero, the tangent of the stack dgCat sat,0 at the point φ(X) can be identified with Hochschild cohomology of X shifted by 2, and thus we have
T φ(X) dgCat sat,0 ≃ p,q H p (X, ∧ q T X )[2 − p − q].
The map induced on the zero-th cohomology of the tangent spaces by φ is the natural embedding
H 1 (X, T X ) −→ H 0 (X, ∧ 2 T X ) ⊕ H 1 (X, T X ) ⊕ H 2 (X, O X ).
This suggests that the morphism φ is somehow unramified, and thus is a local immersion at least locally on Var smp where Var smp is an Artin 1-stack. In particular we should get that the fibers of φ are discrete (this is not really true because of stacky phenomenon, but anyway). I think this is a possible geometric approach to a conjecture (attributed to J. Kawamata) stating that given a given triangulated category T there exists a most finitely many smooth and projective varieties having T as perfect derived category.


# Derived stacks

The main references for derived stacks are [To-Ve3, HAGII, Lu1].


## Why derived stacks ?

We suppose that we are given a moduli functor
F : k − Af f op −→ SSet,
which is represented by a scheme X, or even an Artin n-stack also denoted by X. The classical problem of obstruction theory can be stated as follows: given any surjective morphism A −→ A 0 in k − CAlg, with kernel I such that I 2 = 0, study the fibers of the induced morphism
F (A) −→ F (A 0 ).
When F is given by a concrete moduli problem, there exists a complex L ∈ D(A 0 ), which is somehow "natural" (in the psycological sense of the word), and for any point x ∈ F (A 0 ) a class e ∈ Ext 1 (L, I), such that the fiber at x is non-empty if and only if e = 0. The first observation is that the complex L is by no means unique. In fact, there are situations for which there exist different possible choices for L, all of them being "natural" in some sense. Once again, they are natural only in the psyclolgical sense of the word and are definitely not natural in any mathematical sense, unless there will not be any choices. For instance, a morphism between moduli functors might not induce morphisms on the corresponding complexes. Moreover, forgetting the moduli functor F and only keeping the scheme, or Artin stack, X, there also exists the cotangent complex of X at the point x, L X,x ∈ D(A 0 ), and a natural obstruction class e ∈ Ext 1 (L X,x , I), such that the fiber at x is non-empty if and only if e = 0. A striking remark is that in practice, when F is a concrete moduli problem, then the two objects L and L X,x are in general not the same. Even more striking is the fact that for a concrete moduli problem F the complex L X,x is in general very hard (if not impossible) to compute in terms of F , whereas L has very concrete geometrical description.

Here is a typical example: let S be a smooth and proper scheme over k, and F = Vect(S) be the 1-stack of vector bundles on S, which is an Artin 1-stack. For a point x : X 0 := Spec A 0 −→ Vect(S), corresponding to a vector bundle E on S ×X 0 , the natural candidate for L is the complex REnd(E, E) ∨ [−1] ∈ D(A 0 ). However, REnd(E, E) ∨ [−1] being perfect and not of amplitude contained in [−1, ∞[ in general, it can not be the cotangent complex of any Artin stack locally of finite presentation. Moreover, the cotangent complex of the stack Vect(S) at the point x is not known. This example is not a pathology, and reflects the general situation.

What this example, and many other examples, shows is that in general the right complex to consider to understand osbtruction theory is L, not L X,x , but also that L is not the cotangent complex of any Artin stack (locally of finite presentation). One purpose of the notion of derived Artin stack is precisely to provide a new geometric context in which the complex L is truly the cotangent complex of some geometric object. In this new context, L being the cotangent complex of some geometric object will be natural, now in the mathematical sense of the word, and thus obstruction theory will become unambiguous.

Principle 3: Derived algebraic geometry is a generalization of algebraic geometry for which obstruction theory becomes natural.

Of course the price to pay is that the correct moduli space associated to F can not be a scheme or an Artin stack anymore, and other kind of geometrical objects are needed, called derived Artin stacks. In order to guess what these are I would like to come back to our example of a moduli functor F and to the infinitesimal lifting problem.

The problem is to understand the obstruction class e ∈ Ext 1 (L, I) from a geometric point of view. For this, recall that for any does not make sense in rings anymore, but can be defined as a commutative dg-algebra, or better as a simplicial commutative algebra with π 0 (A 0 ⊕ I[1]) = A 0 , π 1 (A 0 ⊕ I[1]) = I and π i (A 0 ⊕ I[1]) = 0 for i > 1. Therefore we already see that the obstruction space Ext 1 (L, I) will have a functorial description in terms of F as soon as F is extended from commutative rings to simplicial commutative rings. Moreover, there exists a homotopy pull back diagram of simplicial rings
A / / A 0 A 0 / / A 0 ⊕ I[1],
suggesting that when F is reasonable there exists a pull back diagram
F (A) / / F (A 0 ) F (A 0 ) / / F (A 0 ⊕ I[1]). sk − CAlg derived stacks / / SSet. Π1 O O
In this picture, sk −CAlg is the category of simplicial objects in k −CAlg, j is the natural inclusion functor seeing a k-algebra as a constant simplicial object, π 0 is the functor sending a groupoid to its set of isomorphism classes and Π 1 sends a simplicial set to its fundamental groupoid. An important new feature in the theory of derived stacks is that the category sk − CAlg of commutative simplicial k-algebras has a natural model category structure, and naturally the weak equivalences have to be "inverted" or "localized". Therefore, derived stacks should truly be morphisms of Segal categories L(sk − CAlg) −→ T op, and are not modeled by simplicial presheaves on some Grothendieck site anymore. We will see however that the Segal category L(sk − CAlg) has a natural extension of the usual ffqc topology, and that derived stacks can then be viewed as stacks on the Segal site (L(sk − CAlg), f f qc).


## Basic notions

We start with the category sk − CAlg of simplicial commutative k-algebras. There is a natural notion of weak equivalences between objects in sk − CAlg, defined as the morphisms inducing weak equivalences on the underlying simplicial sets (by forgetting the ring structure). The Segal category L(sk − CAlg) op , obtained by localizing the equivalences in sk − CAlg op is defined to be the Segal category of derived affine schemes and is denoted by
dk − Af f := L(sk − CAlg) op .
As there exists a simplicial model category structure on sk − CAlg, for which the equivalences and fibrations are defined on the underlying simplicial sets, the Segal category dk − Af f can be concretely described as Int(sk − CAlg) op (see point (8)  Using the dictionnary between model categories and Segal categories (see point (8) of §2.2) the Segal category dk − Af f can be described by the homotopy theory of equivalence preserving functors sk − CAlg −→ SSet. More precisely, we can define a model category M , by first considering the model category of functors SSet sk−CAlg endowed with the levelwise projective model structure, and then define M as the left Bousfield localization of SSet sk−CAlg along the equivalences in sk − CAlg (see [HAGI] for details). We then have a natural equivalence between dk − Af f and Int(M ). The next step is to endow dk − Af f with a topology. It can be shown that the natural notion of a Grothendieck topology on a Segal category A is nothing else than a Grothendieck topology on its homotopy category Ho(A) (see [HAGI, for a justification). For this we wil need the following important definitions. The fact that these definitions are reasonable extensions of the usual notions is explained in [HAGII,§2.2.2].
Definition 4.1 A morphism f : A −→ B in sk − CAlg is flat (resp. smooth, resp. etale, resp. a
Zariski open immersion) if it satisfies the following two conditions:

1. The induced morphism of affine scheme Spec π 0 (B) −→ Spec π 0 (A) is flat (resp. smooth, resp, etale, resp. a Zariski open immersion).

2. For any i > 0, the natural morphism
π i (A) ⊗ π0(A) π 0 (B) −→ π i (B)
is an isomorphism.

A finite family of morphisms {f i : A −→ B i } in sk − CAlg is a ffqc covering, if each f i is flat and if the induced morphism of affine schemes
Spec π 0 (B i ) −→ Spec π 0 (A)
is surjective.

We now define a Grothendieck topology on Ho(dk − Af f ) = Ho(sk − CAlg) op by defining a sieve to be a covering sieve if it contains a ffqc covering in the sense of the definition above. It can be checked that this defines a topology on Ho(dk − Af f ) and thus by definition a topology on the Segal category dk − Af f . The ffqc topology on dk − Af f induces a notion of hypercoverings in dk − Af f , and the Segal category of stacks over dk − Af f can then be defined in the following way.

Definition 4.2 The Segal category of derived stacks (also called D − -stacks) is the full sub-Segal category of dk − Af f consisting of morphisms
F : dk − Af f op −→ T op
such that for any ffqc hypercovering U * −→ X in dk − Af f , the induced morphism
F (X) −→ Lim n∈∆ F (U n )
is an equivalence in T op 5 . It is denoted by dSt(k).

Like in the case of Segal categories of stacks over a Grothendieck site (see §2.3), the Segal category dSt(k) can be characterized by a universal property. Also, using the dictionnary between Segal categories and model categories (see point (8)  2. For any coaugmented co-simplicial object A −→ B * in sk − CAlg, which correspond to a ffqc hypercovering in dk − Af f , the induced morphism
F (A) −→ Holim n∈∆ F (B n )
is an equivalence of simplicial sets.


## For any finite family of objects
{A i } in sk − CAlg, the natural morphism F ( A i ) −→ F (A i )
is an equivalence of simplicial sets.

The homotopy theory of these functors can be described by a natural model category, called the model category of derived stacks and which is denoted by D − k − Af f ∼,f f qc in [HAGII,§2.2].

To construct derived stacks we will often construct explicit objects in D − k − Af f ∼,f f qc and then consider them as objects in dSt(k) through the equivalence
dSt(k) ≃ L(D − k − Af f ∼,f f qc ).
The natural inclusion morphism dSt(k) ֒→ dk − Af f has an exact left adjoint a : dk − Af f −→ dSt(k), called the associated derived stacks functor. The exactness of a implies that dSt(k) does have the same exactness properties as the Segal category T op and that it is a Segal topos (see ). As a consequence it possesses all small limits and colimits, and has internal Homs.

Moreover, the ffqc topology can be seen to be subcanonical, and thus the Yoneda embedding provides a fully faithful functor dk − Af f ≃ L(sk − CAlg) op ֒→ dSt(k). 5 We make here the same abuse of notations as at the beginning of §2.3

On the level of simplicial commutative k-algebras this functor will be denoted by
RSpec : L(sk − CAlg) op ֒→ dSt(k).
For any A ∈ sk − CAlg, the derived stack RSpec A is explicitly given by
RSpec A : sk − CAlg −→ SSet B → M ap sk−CAlg (A, B).
The natural embedding i : k − CAlg ֒→ sk − CAlg, sending a commutative k-algebra to the associated constant simplicial object, induces a morphism on Segal categories of stacks
t 0 := j * : dSt(k) −→ St(k)
called the truncation functor (it is not the same as the truncation t ≤0 defined from (underived) stacks to sheaves and discussed in §2.3). This functor has a left adjoint
i := j ! : St(k) −→ dSt(k)
which can be shown to be fully faithful. In particular, any stack can be seen as a derived stack. However, the functor i is not compatible with finite limits, and therefore certain construction (such as fiber products or internal Homs) will not preserve stacks inside the Segal category of derived stacks. Because of this it is important to keep the notation i(F ), when a stack F is considered as a derived stack.
Definition 4.3 Let F be a stack. A derived enhancement of F is a derived stack F together with an equivalence t 0 F ≃ F .
Of course, a given stack F has many different derived enhancement, including the trivial one i(F ).

Using the notion of smooth morphism defined in def. 4.2, the notion of n-geometric stack can be naturally extended to the notion of n-geometric derived stack. As this is a formal generalization we will not give the precise definition here (the reader can consult [HAGII] for more details on the general notion of n-geometric stacks in various contexts). The two functors i and t 0 above are compatible with the geometricity notions in the sense that i sends n-geometric stacks to ngeometric derived stacks, and t 0 sends n-geometric derived stacks to n-geometric stacks. Moreover, a stack F is n-geometric if and only if i(F ) is an n-geometric derived stack. Finally, i and t 0 are also compatible with the notions of flat morphisms, smooth morphisms, etale morphisms and open Zariski morphisms.

Definition 4.4 A derived stack is a derived Artin n-stack if it is an m-geometric derived stack for some m, and if t 0 (F ) is an (Artin) n-stack. A derived Artin stack is an Artin n-stack for some n.

Here is a sample of basic notions and results concerning derived Artin stacks.

1. Properties of morphisms and presentations by groupoids: Both points (1) and (2) of the general properties stated in §3.1 generalize immediatly to the case of derived Artin stacks. Only two remarks have to be made concerning unramified morphisms and closed immersions. First of all, the notion of formally unramified morphisms in the context of derived Artin stacks is equivalent to the notion of formally etale morphism (see [HAGII,Prop. 2.2.2.9]). Also, the closed immersions of derived Artin stacks are not monomorphisms. In fact, a monomorphism of derived Artin stacks is automatically formally unramified and thus formally etale, which explains why it would not be reasonable that closed immersions be monomorphisms. As a consequence the notion of closed sub-stack does not make very much sense in the derived setting.

2. Truncation: For any derived Artin stack F , the adjonction morphim it 0 F −→ F is a closed immersion. If fact, if F is locally of the form RSpec A, for some A ∈ sk − CAlg, then it 0 is locally of the form i(Spec π 0 (A)). Therefore, any derived Artin stack F can be thought of as some kind of derived thickening of its truncation it 0 (F ). This derived thickening truly behaves as a formal thickening, and for instance the small etale sites of F and it 0 (F ) coincide (see [HAGII,Cor. 2.2.2.13]). According to definition 4.3, a derived enhancement of a stack can then be thought of as the data of a formal derived thickening.

3. Derived schemes and Deligne-Mumford stacks: A derived Artin stack F is a derived scheme (resp. a a derived Deligne-Mumford stack ) if there exists a smooth atlas U −→ F which is a Zariski open immersion (resp. etale). It can be shown that if F is a derived Artin stack then F is a derived scheme (resp. a derived Deligne-Mumford stack) if and only if its truncation t 0 is a scheme (resp. a Deligne-Mumford stack) in the non derived sense.


## Derived categories of O-modules:

Like We also have a sub-Segal category L qcoh (F ) ⊂ L(F, O F ) of quasi-coherent complexes, which can be described in the following way. We write F as the colimit of affine derived schemes F ≃ ColimX i , where X i = RSpec A i . For any i, we can consider the commutative dgalgebra N (A i ) obtained by normalizing A i , and thus its unbounded Segal category of modules L(N (A i ) − M od). One possible definition is
L qcoh (F ) = Holim i L(N (A i ) − M od),
where this homotopy limit is taken in the model category of Segal categories (see [To-Va] where this is done using dg-categories). Like in the underived situation, any morphism f : F −→ F ′ induces an adjunction
f * : L qcoh (F ′ ) −→ L qcoh (F, O F ) L qcoh (F ′ ) ←− L qcoh (F, O F ) : f qcoh *
, but again f qcoh * is not the functor induced by the direct image on the level of all complexes of O-modules.

When F is a derived Artin stack then the Segal category L qcoh (F ) has a natural t-structure. By definition, an object E ∈ L qcoh (F ) is of non positive amplitude if for any flat morphism u : X = RSpec A −→ F with A ∈ sk − CAlg, the corresponding object u * (E) ∈ L qcoh (X) ≃ L(N (A)−M od) is cohomolgically concentrated in non positive degrees (as a complex over k). The heart of this t-structure is denoted by QCoh(F ) is called the category of quasi-coherent sheaves over F . The natural morphism it 0 (F ) −→ F induces by direct images an equivalence QCoh(F ) ≃ QCoh(t 0 (F )).

In particular we see that the two Segal categories L qcoh (F ) and L qcoh (t 0 F ) are both endowed with a t-structure and have the same heart, but are different in general. In this way, the derived enhancement F of t 0 F can also be considered as a modification of the derived category D qcoh (t 0 F ), keeping the heart unchanged.

Let us assume that we have a pull-back square of derived Artin stacks
F ′ q / / v G ′ u F ′ p / / G.
Then there exists a base change natural transformation
α : u * • p qcoh * ⇒ q qcoh * • v * .
The natural transformation α is an equivalence in many interesting examples, for instance when F , G, F ′ and G ′ are all quasi-compact derived schemes with an affine diagonal (more generally when F , G, F ′ and G ′ are all strongly quasi-compact and p qcoh * and q qcoh * are of finite t-amplitude). That the base change formula is satisfied without any flatness assumptions on u is an important feature of derived algebraic geometry. Of course, when F = i(X) for X a scheme, then L X ∈ D qcoh (X) is the usual cotangent complex of X (e.g. as defined in [Il]). For x :
X = RSpec A −→ F we define the tangent complex of F at x to be T x F := RHom(x * (L F ), A), the dual of x * (L F ).
For any morphism of derived Artin stacks f : F −→ F ′ we define a relative cotangent complex by the following triangle in L qcoh (F )
f * (L F ′ ) −→ L F −→ L F/F ′ .
It can be shown that f is smooth if and only if it is locally of finite presentation and if L F/F ′ is of non negative t-amplitude (i.e. if [L F/F ′ , E[i]] = Ext i (L F/F ′ , E) = 0 for all i > 0 and for all E belonging to the non positive part of the t-structure on L qcoh (F )). In the same way f is etale if and only if it is locally of finite presentation and L F/F ′ ≃ 0 (see [HAGII,2.2.5]).

6. The virtual structure sheaf: Let F be a derived Artin stack and t 0 F its truncation. For a smooth morphism U = RSpec A −→ F , we can consider the graded π 0 (A)-module π * (A) as a graded quasi-coherent sheaf on Spec π 0 (A). When U varies over smooth morphisms to F , the various graded quasi-coherent sheaves π * (A) glue together and descend to a global graded quasi-coherent sheaf π * (O virt ) on the stack t 0 F . This graded sheaf is called the virtual structure sheaf of F . In any case it is an important invariant living on t 0 F and remembering some information about the derived enhancement F of t 0 F .


## Some examples

1. Derived fiber products of schemes and stacks: As we have said the natural inclusion functor i :
St(k) −→ dSt(k)
is not left exact an in particular does not preserve fiber products. Therefore, a very first example of derived Artin stacks is given by considering a diagram of Artin stacks
F G / / H, and then considering i(F ) × i(H) i(G). The natural morphism i(F × H G) −→ i(F ) × i(H) i(G)
is in general not an equivalence, thought the induced morphism on the truncations
t 0 (i(F × H G)) −→ t 0 (i(F ) × i(H) i(G))
is an equivalence of stacks. Therefore, the derived Artin stack i(F ) × i(H) i(G) is a derived enhancement (in the sense of Def. 4.3) of the usual fiber products of stacks.

A very simple, but fundamental, example is when F , G and H are all affine schemes given by a diagram of commutative k-algebras
A B C o o O O Then, the derived stack i(F )× i(H) i(G) is RSpec (A⊗ L C B),
where A⊗ L C B is the derived tensor product computed in simplicial commutative rings. We see that π i (A ⊗ L C B) = T or C i (A, B), and thus that the virtual structure sheaf (see point (6) of the last section) on Spec (A ⊗ C B) is T or C * (A, B). When H is a regular scheme scheme and F and G are closed subschemes intersecting properly, then this virtual structure sheaf on Spec (A ⊗ C B) precisely compute the correct intersection number.

An interesting general construction involving fiber products is the inertia stack. Recall that for a stack F , the inertia stack is I F := M ap(S 1 , F ) = F × F ×F F , and that it classifies objects endowed with an automorphism in F . Considering F as a derived stack i(F ) we get a derived inertia stack
RI F := I i(F ) := i(F ) × i(F )×i(F ) i(F ) ∈ dSt(k).
The derived stack RI F is of course a derived enhancement of the stack I F , and is naturally a derived group stack over F . When F is a scheme, then I F = F and thus RI F is a natural non trivial derived enhancement of F . For instance, when F = Spec A is an affine scheme, then we have
RI F = RSpec (A ⊗ L A⊗ L A A) whereas I F = F . As A ⊗ L A⊗ L A
A is known to be Hochschild homology of A, RI F is some sort of global version of Hochschild homology of the stack F .


## 2.

Derived schemes vs dg-schemes: Assume that k has characteristic zero. A dg-scheme is a pair (X, A X ), consisting of a scheme X together with a sheaf of quasi-coherent commutative dg-O X -algebras A X such that A 0 X = O X and A i X = 0 for i > 0. This notion has been introduced some years ago as models for derived schemes in order to construct derived moduli spaces (see ). There exists an obvious notion of morphisms of dg-schemes and of a quasi-isomorphisms between them. The Segal category of dg-schemes, obtained by localizing along quasi-isomorphisms will be denoted by L(dg −Sch). As explained in  it is possible to construct a functor Θ : L(dg − Sch) −→ dSt(k), and taking its values inside the sub-Segal category of derived schemes. When X = Spec A is affine and A X is given by a non positively graded commutative dg-algebra A X , then Θ(X, A X ) is defined as being RSpec D(A X ), where D(A X ) denotes the commutative simplicial algebra obtained by denormalization from A X . In general Θ(X, A X ) is defined using some covering of X by affine schemes and gluing in a rather straightforward way.

Essentially nothing is known about the functor Θ but I tend to think it is not well behaved (e.g. is not fully faithful). The reason for this feeling is that by definition for any dg-scheme (X, A X ) there exists a natural closed immersion of dg-schemes
(X, A X ) −→ (X, O X ) = X.
Moreover, any morphism between dg-schemes (X,
A X ) −→ (Y, A Y ) induces a commutative square of derived schemes (X, A X ) / / X (Y, A Y ) / / Y.
This most probably implies that Θ is not essentially surjective on derived schemes, because there are no reasons for a given derived scheme Z to be embeddable as a closed sub derived scheme of some ambiant scheme (though such an embedding always exists locally). If we think of derived schemes as being somehow analogs of formal schemes, the ones that have such embedding are analogs of the algebraizable formal schemes. Moreover, following this analogy, the morphisms of derived schemes Θ(X, A X ) −→ Θ(Y, A Y ) compatible with a morphism X −→ Y as above are analogs of the algebraizable morphisms between formal schemes. This analogy also suggests that Θ is probably not full.

Even though the functor Θ is probably not well behaved it can be used to produce examples of derived schemes as already some interesting example of dg-schemes have been constructed. This is for example the case of the derived Quot and Hilbert schemes, defined in . These dg-schemes have been defined in a rather ad-hoc manner, and they have not been constructed to represent any moduli functors (actually, dg-schemes do not seem to be well suited for the functorial point of view, due to the lack of a model structure on them that would allow to compute the maps in the localization L(dg − Sch)). A natural question is therefore to describe moduli characterizations of derived schemes arising from dg-schemes via the functor Θ. The two major examples are the derived schemes Θ(RQuot(X)) and Θ(RHilb(X)). The case of Θ(RQuot(X)) has been recently studied by J. Gorski in his thesis [Go].

To conclude this comparison between dg-schemes and derived schemes: dg-schemes seem to be only approximation of the correct notion of what a derived scheme is. Moreover, it seems there is nothing doable with dg-schemes that can not be done with derived schemes, but there are things doable with derived schemes that can not be done with dg-schemes (e.g. the construction of some derived moduli such as vector bundles on some smooth proper scheme, or also having functorial description of these derived moduli). It is therefore reasonable to suggest to simply forget about the notion of dg-schemes (and this has actually been suggested once to me by M. Kontsevich).

3. Linear derived stacks: As in example (2) of §3.2 it is possible to define the notion of linear stacks in the context of derived stacks. Let F be any derived Artin stack, and E ∈ L qcoh (F ). We define a derived stack RV(E) over F by
RV(E) : dSt(k)/F −→ T op (f : F ′ → F ) → M ap L(F ′ ,O F ′ ) (f * (E), O F ′ ).
The derived stack RV(E) is called the linear stack associated to E. By construction, it is characterized by the following universal property π 0 (M ap dSt(k)/F (F ′ , RV(E))) ≃ Ext 0 (f * (E), O F ′ ), for any f : F ′ −→ F in dSt(k)/F , and where the Ext 0 is computed in the derived category of complexes of O F ′ -modules.

The stack RV(E) is a derived Artin stack if E is perfect (i.e. its pull-backs to any derived affine scheme X = RSpec A −→ F ′ is a compact object in D(N (A)), the derived category of N (A)-dg-modules), and the morphism RV(E) −→ F is then strongly of finite presentation. The main difference with the notion of linear stacks in the underived situation is that RV(E) depends on the full complex E, and not only on its positive part. We have t 0 RV(E) ≃ V(E), and thus RV(E) is a natural derived enhancement of V(E).

For any derived Artin stack F , locally of finite presentation, the cotangent complex L F is perfect. The derived Artin stack RV(L F ) can then be identified with the derived tangent stack RT F := RMap(Spec k[ǫ], F ), defined as the derived stack of morphisms from Spec k[ǫ] to F (see point (4) below). It is important to note that when F is an Artin stack (i.e. F ≃ it 0 F ), then RT F is no longer an Artin stack except when F is itself smooth. Therefore, even though F is an Artin stack, RT F is in general a non trivial derived enhancement of the usual tangent stack T F . 4. Derived mapping stacks: As the Segal category dSt(k) is a Segal topos it has internal Homs objects. These objects are denoted by RMap, in order to avoid confusions with the one defined for underived stacks. The functor i : St(k) −→ dSt(k) does not commute with taking internal Homs, but its right adjoint t 0 does. In particular, for two Artin stacks F and G, the derived stack RMap(i(F ), i(G)) ∈ dSt(k) is such that t 0 RMap(i(F ), i(G)) ≃ Map(F, G), and is thus a derived enhancement of Map(F, G). This provides a systematic way to construct non trivial examples of derived stacks starting from underived stacks.

For a stack X and an Artin stack F there exist criteria ensuring that RMap(i(X), i(F )) is a derived Artin stack. The most powerful follows from Lurie's representability criterion (see [Lu1]), and states that this is the case as soon as X is a flat and proper scheme and F is an Artin stack locally of finite presentation. A simpler, but less prowerful, criterion is given in [HAGII, App. C], and states that this is the case if it is already known that Map(X, F ) is an Artin stack and under some additional mild conditions. These two criteria can be used to prove the existence of the following derived Artin stacks:

(a) For a finite and connected simplicial set K, the derived stack
RLoc n (K) := RMap(K, i(BGl n ))
is a derived Artin stack strongly of finite presentation and is called the derived moduli stack of rank n local systems on K (or on its geometric realization). Its truncation
Loc n (K) := Map(K, BGl n )
is the usual Artin 1-stack of rank n local systems on K, or equivalently of rank n linear representations of the group π 1 (K). Given a local system V ∈ Loc n (K)(k), the tangent complex of RLoc n (K) at the point V is
T V RLoc n (K) ≃ C * (K, V ⊗ V ∨ )[1],
where C * (K, V ⊗ V ∨ ) is the complex of cohomology of K with coefficients in the local system of endomorphisms of V . This implies in particular that RLoc n (K) depends on more than π 1 (K) alone, and also captures higher homotopical invariants of K.

(b) For a flat and proper scheme X, the derived stack RVect n (X) := RMap(i(X), i(BGl n )) is a derived Artin stack strongly of finite presentation and is called the derived moduli stack of rank n vector bundles on X. Its truncation Vect n (X) := Map(X, BGl n )

is the usual Artin 1-stack of rank n vector bundles on X. Moreover, for a vector bundle V on X we have
T V RVect n (X) ≃ C * (X, V ⊗ V ∨ )[1].
(c) Let k be a field of characteristic zero and X a smooth and projective scheme over Spec k.

We consider X DR as defined in point (4) of §3.3. The derived stack
RVect n (X DR ) := RMap(i(X DR ), i(BGl n ))
is a derived Artin stack strongly of finite presentation and is called the derived moduli stack of rank n flat vector bundles on X. Its truncation Vect n (X DR ) := Map(X DR , BGl n )

is the usual Artin 1-stack of rank n flat vector bundles on X. Moreover, for a flat vector bundle V on X we have
T V RVect n (X DR ) ≃ C * (X DR , V ⊗ V ∨ )[1],
where C * (X DR , V ⊗ V ∨ ) is the complex of de Rham cohomology of W with coefficients in the flat bundle of endomorphisms of V .

(d) Let M pre g,n be the Artin 1-stack of prestable curves of genus g and with n marked points, and let X be a smooth and proper scheme. We consider the universal prestable curve C g,n −→ M pre g,n . We define the derived stack of prestable maps to be
RM pre g,n (X) := RMap dSt(k)/i(M pre g,n ) (i(C g,n ), X × i(M pre g,n )),
where RMap dSt(k)/i(M pre g,n ) denotes the internal Homs of the comma Segal category of derived stacks over i(M pre g,n ). The derived stack RM pre g,n (X) is naturally a derived stack over i(M pre g,n ). Moreover, for
any Y = RSpec B −→ i(M pre g,n ) we have RM pre g,n (X) × i(M pre g,n ) Y ≃ RMap dSt(k)/Y (i(C g,n ) × i(M pre g,n ) Y, X × Y ).
where T C (− x i ) → f * (T X ) is a complex of sheaves on C concentrated in degrees [0, 1]. As a consequence of point (6) of §4.3 we immediately get a virtual structure sheaf π * (O virt ) on the usual stack of prestable maps M pre g,n (X) and therefore on the usual stack of stable maps M g,n (X).


## 5.

Objects in a dg-category: For a saturated dg-category T , the locally geometric Artin stack Parf T described in example (4) of §3.2 has a natural derived enhancement denoted by M T (see [To-Va] for a precise definition of the derived stack M T ). It can also be proved that M T is locally geometric (i.e. union of open derived Artin sub-stacks locally of finite presentation). In fact, the original proof of the local geometricity of Parf T is deduced from the one of M T which is somehow simpler, has explicit computations of cotangent complexes help proving the existence of a smooth atlas. For a given object E in T , the tangent complex is given by
T E M T ≃ Ext * (E, E)[1],
where Ext * (E, E) = T (E, E) is the complex of endomorphisms of E.

An important consequence of the local geometricity of M T is the existence of a local geometric derived stack RParf (X), of perfect complexes on some smooth and proper scheme. The derived stack RParf (X) is of course a derived enhancement of Parf (X) described in example (4) 
i(Coh(X)) / / i(Parf (X)) RCoh(X) / / RParf (X)
is cartesian.

This implies that RCoh(X) is a derived Artin stack. The derived stack RCoh(X) itself contains a derived open sub-stack RVect n (X) of vector bundles on X of rank n. This provides another direct proof of the geometricity of RVect n (X) without refering to any representability criterion. An interesting example is RPic(X) = RVect 1 (X), the derived Picard stack of X. Indeed, the truncation t 0 RPic(X) is the usual Picard stack of line bundles on X, and thus is smooth. However, though its truncation is smooth it is not true that RPic(X) = it 0 (RPic(X)) as this can be seen on the tangent complexes. This example shows that the usual intuition that moduli spaces are singular because of the existence of a non trivial derived structure is not always true in practice.

6. Dg-categories: The stack dgCat sat has a natural derived enhancement RdgCat sat defined in the following way. For any A ∈ sk − CAlg, we consider the commutative dg-algebra N (A) obtained by normalizing A. The category of N (A)-dg-modules has a natural symmetric monoidal structure, and therefore it make sense to talk about N (A)-dg-categories. Moreover, the notion of being saturated naturally extends from dg-categories over k to dg-categories over N (A). The functor sending A to the nerve of the category of quasi-equivalences between saturated N (A)-dg-categories is denoted by RdgCat sat . We clearly have t 0 RdgCat sat ≃ dgCat sat . As in the underived case, I believe that RdgCat sat is a locally geometric derived stack, and I think a direct approach using Lurie's representability criterion should be possible.

Question 4.5 Is the derived stack RdgCat sat locally geometric ?

Of course a positive answer to this question would also provide a positive answer to question 3.1. Naturally, it is expected that for a given saturated dg-category T the tangent complex is given by
T T RdgCat sat ≃ HH(T )[2],
where HH(T ) is the full Hochschild cohomology of T .


## Some developments

1. Representability criterion: Probably the most important recent development in the theory of derived stack is the representability criterion proved by J. Lurie in [Lu1], that we already mentioned several times but that we will not reproduce here. It is a generalization of the standard Artin's representability criterion for algebraic spaces and 1-stacks. However, the criterion in the derived setting is simpler as the part concerning having a good infinitesimal theory is now truly a property of the moduli functor and not an extra structure as we explained during the introduction of this section (see §4.1). This criterion is extremely powerful, though it is not always very easy to check the infinitesimal properties in practice, and it is sometimes easier to prove directly the geometricity and then deduced the infinitesimal theory from it (this is what is done for example in several examples in [HAGII]).

2. Formal theory and derived inertia stacks: Assume that k has characteristic zero. Let F be a derived Artin stack locally of finite presentation and RI F = RMap(S 1 , F ) be its derived inertia stack. The composition of loops makes RI F into a group object over F . In particular for any point x : Spec K −→ F , with K a field, we obtain RI F × F Spec K, which is a derived group Artin stack over Spec K. This group object has a tangent Lie algebra L x (which is well defined in the homotopy category of dg-Lie algebras over K). The precise relation between derived group stack and dg-Lie algebra has not been investigated yet, and there might be some foundational work to be done to explain what L x truly is. In any case, I will assume that we know how to do this. It is easy to see that, as a complex, L x is naturally quasi-isomorphic to T x F [−1], the shifted tangent complex of F at x. Therefore, we obtain a natural structure of dg-Lie algebra (or at least L ∞ -Lie algebra) on T x F [−1]. From this dg-Lie algebra L x we can define a formal derived moduli functor, defined on the category of augmented Artinian dg-algebras over K (see [Hin])

M C(L x ) : dg − Art/K −→ SSet.

On the other hand, the restriction of the derived stack F on dg − Art/K, pointed at x also provides a functor F x : dg − Art/K −→ SSet which is by definition the formal completion of F at the point x. It is expected that the two formal derived stacks M C(L x ) and F x are in fact equivalent. In other words, the tangent complex T x F together with the dg-Lie algebra structure on T x F [−1] determines the formal completion of the derived stack at x. This statement seems to have been proved for derived schemes and derived Deligne-Mumford stacks as it can be essentially reduced to the case of an affine derived stack which is somehow treated in [Hin, Man]. However, the general statement for higher derived stacks does not seem to be known.

Question 4.6 Compare the two formal derived stacks M C(L x ) and F x .

The local picture around the point x also has a global counter-part, as the group object RI F has a global sheaf of quasi-coherent dg-Lie algebras L on F , whose underlying complex is T F [−1] the shifted tangent complex of F . The sheaf of dg-Lie algebras L on F is supposed to control the formal completion of F × F along the diagonal (thought the precise meaning of this in the stack context is not completely clear).

3. Virtual fundamental classes: Let F be a derived Artin stack, t 0 F its truncation and π * (O virt F ) the graded virtual structure sheaf on t 0 F as defined in point (6) of §4.2. When the quasi-coherent sheaves π i (O virt F ) are all coherent and vanish for i big enough, we can define a virtual class in G-theory
[O F ] virt := (−1) i [π i (O virt F )] ∈ G 0 (t 0 F ). Note that when it 0 F ≃ F then [O F ] virt = [O F ].
The condition that the sheaves π i (O virt F ) are coherent and vanish for i big enough is not often satisfied and is a rather strong condition. It is known to be satisfied when k is noetherian and of characteristic zero, F is locally of finite presentation and the cotangent complex L F is of amplitude contained in [−1, ∞[. When F satisfies these two conditions we will say that F is quasi-smooth.

Assume now that k is noetherian of characteristic zero and and that F is a quasi-smooth derived Deligne-Mumford stack. On one hand we have the virtual class in G-theory [O F ] virt ∈ G 0 (t 0 F ), from which we can construct via the Grothendieck-Riemann-Roch transformation a class in the rational Chow groups τ ([O F ] virt ) ∈ CH * (t 0 F ) Q . On the other hand, we can pull-back the cotangent complex via the morphism j : it 0 F −→ F . The complex j * (L F ) is a perfect obstruction theory of amplitude [−1, 0] in the sense of [Be-Fa], and thus we can also construct a virtual fundamental class [F ] virt ∈ CH * (t 0 F ) Q . As far as I know the following question is still open. It seems that it is expected that these two classes only differ by a T d(T virt F ), where T F is the virtual tangent sheaf defined to be the dual of j * (L F ) (see [Be-Fa]). Some results in that direction are proved in [Jo].

Finally, when F is not quasi-smooth anymore, and more generally when the virtual structure sheaf has infinite non zero sheaves, it is very much unclear how to use this virtual sheaf in order to get interesting invariants generalizing the virtual class.


## A holomorphic Casson invariant:

Suppose now that k = C, and that X is a Calabi-Yau 3-fold. We consider RCoh(X) and its derived open sub-stack RCoh st,ν (X) consisting of stable coherent sheaves with some fixed numerical invariants ν ∈ K num 0 (X). We also assume that ν is chosen in such a way that semi-stable implies stable. Finally, we set M(X) := [RCoh st,ν (X)/RPic 0 (X)], the quotient derived stack of RCoh st,ν (X) by the natural action of RPic 0 (X) the derived group stack of line bundles of degree zero. The derived stack M(X, ν) is a proper derived algebraic space. Moreover, the tangent complex at a coherent sheaf E on X can be seen to fit in a triangle C * (X, O)[1] −→ C * (X, E ⊗ E ∨ )[1] −→ T E M(X, ν).

Using the trace morphism tr : C * (X, E ⊗ E ∨ ) −→ C * (X, O) we see that the above triangle splitts, and that the tangent complex at E is given by
T E M(X, ν) ≃ C * (X, E ⊗ E ∨ ) 0 [1],
where C * (X, E ⊗ E ∨ ) 0 is the kernel of the morphism tr.

The conclusion is that M(X, ν) is a quasi-smooth and proper derived algebraic space over Spec C, which is furthermore of virtual dimension zero. We can therefore define a holomorphic Casson invariant to be the lenght of M(X, ν) by the formula χ(X, ν) := (−1) i h i (M(X, ν), O M(X,ν) ).

As the derived stack M(X, ν) is proper and quasi-smooth, we see that χ(X, ν) is well defined. It is also equal to
p * ([O M(X,ν) ] virt ) ∈ G 0 (Spec C) = Z,
where p : t 0 M(X, ν) −→ Spec C is the projection and [O M(X,ν) ] virt is the virtual class in G-theory defined above in point (6) of §4.2.

By construction, the invariant χ(X, ν) counts the virtual number of stable sheaves with numerical invariants ν, with fixed determinants. It is natural to call it the holomorphic Casson invariant. It is probably very close to the one defined in [Th], as it surely satisfies the same deformation invariance property (this is an application of the base change formula, point (4) of §4.2 ). However, a precise comparison between these two invariants requires an answer to the question 4.7.

5. Concerning the geometric Langlands correspondence: As far as I understand the geometric version of the Langlands correspondence predicts that for any smooth and projective curve C over k = C, the existence of an equivalence of triangulated categories D(Vect n (C), D) ≃ D coh (Loc DR n (C))

where the left hand side is the derived category of D-modules on the stack Vect n (C) (with some finiteness conditions like being regular holonomic), and Loc DR n (C) := Map(C DR , BGl n ) is the stack of rank n flat bundles on C. I have recently learned from V. Lafforgue (and apparently this is a folklore knowledge shared by the experts) that in order for this equivalence to have a chance to exist the right hand side should rather be D coh (RLoc DR n (C)), where RLoc DR n (C) is the derived stack of rank n flat bundles discussed in example (4 − c) of §4.3. A striking example showing why this is so is when n = 1.

The stack Vect 1 (C) is equivalent to P ic 0 (C) × Z × K(G m , 1). On the other hand, the stack Loc DR 1 (C) is equivalent to P ic 0 (C) † × K(G m , 1), where P ic 0 (C) † is the universal extension of the Jacobian P ic 0 (C) by the vector space H 0 (C, Ω 1 C ). It is known that there exists an equivalence of triangulated categories (see [La] for the first of these two equivalences) D(P ic 0 (C), D) ≃ D coh (P ic 0 (C) † ) D(Z, D) ≃ D coh (K(G m , 1)).

Combining these two this shows that there exists an equivalence D(P ic 0 (C) × Z, D) ≃ D coh (Loc DR 1 (C)).

Therefore, we see that the part D(K(G m , 1), D) is not reflected in D coh (Loc DR 1 (C)) and that the originial predicted equivalence does not seem to exist.

Let RLoc DR 1 (C) be the derived moduli stack of rank 1 flat bundles on C. It can be seen that we have

RLoc Indeed, D(K(G m , 1), D) is equivalent to the derived category of S 1 -equivariant complexes of C-vector spaces, which is well known (via some bar-cobar construction) to be equivalent to the derived category of C[C[1]]-dg-modules.

The conclusion is that the statement of the geometric Langlands correspondence is truly about the derived category of the derived stack RLoc DR n (C). In the example above we also see that the "stacky part" K(G m , 1) of Vect 1 (C) correspond through the Langlands correspondence to the "derived part" RSpec C[C[1]] of RLoc DR 1 (C). This seems to be a general phenomenon, and explains somehow that there exists some kind of duality between the stacky direction and the derived direction. On the infinitesimal level these two directions can be respectively observed as the negative part and the positive part of the tangent complex. In general, this duality between the stacky and the derived part can be understood in terms of characteristic cycles of D-modules on higher stacks. Indeed, for a given Artin stack F , and a D-module E on F , the characteristic cylce of E is supposed to live on the total cotangent stack of F . A reasonable candidate to be the cotangent stack would be V(T F ), the linear stack associated to the tangent complex of F . But, when F has a non trivial stacky direction (i.e. when it is at least a 1-Artin stack), then the complex T F has non trivial negative cohomology sheaves, and thus we have seen in example (3) of §4.3 that V(T F ) has a natural non trivial derived enhancement RV(T F ). The correct cotangent stack of F is therefore a derived Artin stack, and the characteristic cycle of E is now expected to live on RV(T F ).

6. Categorified quantum cohomology: Let RM g,n+1 (X) be the derived stack of stable maps to a smooth and projective complex variety X (see example (4 − d) of §4.3). Let us fix a class β ∈ H 2 (X, Z), and let RM g,n+1 (X, β) the derived sub-stack of maps having β as fundamental class. Forgetting the map to X and eveluating at the marked points provide a natural diagram of derived stacks RM g,n+1 (X, β) / / X M g,n × X n .

This diagram induces by pull-back and push-forward a functor on the Segal categories of quasi-coherent complexes L qcoh (M g,n ) × L qcoh (X) n −→ L qcoh (X).

This should be thought of as some kind of action of the system of Segal derived categories {L qcoh (M g,n )} n,g on L qcoh (X). The precise meaning of this action must be made precise, and should be somehow an "action" of some kind of operad objects in Segal categories (here it is preferable to use dg-categories instead of Segal categories in order to keep track of the linear structure). Note that the fact that this "action" satisfies the expected associativity axioms will follow from the base change formula (point (4) of §4.2), showing the importance to use the derived stacks RM g,n+1 (X, β) in the construction.

This "action" of {L qcoh (M g,n )} n,g on L qcoh (X) can be thought of as a categorified version of quantum cohomolgy, as passing from Segal categories to their Hochschild homology group would give back something close to the quantum cohomology of X. What seems interesting with this construction is that the action of {L qcoh (M g,n )} n,g on L qcoh (X) makes sense even though X is not smooth (one problem though is that the action of {L qcoh (M g,n )} n,g on L qcoh (X) does not preserve bounded coherent complexes anymore).

## 7 .
7Derived categories of O-modules: To each stack F we can associate a Segal topos St(F ) := St(k)/F of stacks over F . The Segal topos possesses a natural ring object O F := A 1 × F −→ F making it into a ringed Segal topos (i.e. a Segal topos St(F ) together with a colimit commuting morphism from St(F ) to the opposite category of commutative rings). As to any ringed topos (T, O) is associated a derived category D(T, O) of (unbounded) complexes O-modules, the ringed Segal topos (St(F ), O F ) gives rise to a derived Segal category L(F, O F ) of O F -modules (see [To-Va-Ve]). Its homotopy category will be denoted by D(F, O F ) := Ho(L(F, O F )) and is called the derived category of F .

## 8 .
8The l-adic formalism: Let l be a number invertible in k. For any Artin stack F , we consider Et/F the full sub-Segal category of St(k)/F consisting of morphisms u : F ′ −→ F with F ′ an Artin stack and u an etale morphism. The Segal category Et/F possesses a natural topology induced from the one on St(k)/F , and is thus a Segal site (see [To-Ve1]). The Segal category of stacks over Et/F will be denoted by St(F et ), and is called the small etale topos of F . The constant sheaf of rings Z/l i on Et/F endows St(F et ) with a structure of a ringed Segal topos. The derived Segal category of this ringed Segal topos will be denoted by L(F et , Z/l i )


and where the Ext 0 is computed in the derived category of complexes of O F ′ -modules.


where the Ext-groups are computed in the triangulated category associated to T . The substack Parf simp T is an Artin 1-stack which is a gerbe over an algebraic space π 0 (Parf simp T ) denoted by M simp T . This algebraic space M simp T is a coarse moduli space for simple objects in T . It can be identified with the quotient stack


A 0 -module M , if A 0 ⊕M denotes the trivial square zero extension of A 0 by M , then the fibers of F (A 0 ⊕ M ) −→ F (A 0 ) are isomorphic to [L, M ] = Ext 0 (L, M ) (we assume here that F is a set valued functor for the sake of simplicity). This suggest that Ext 1 (L, I) = [L, I[1]] should be the fiber of the morphism F (A 0 ⊕ I[1]) −→ F (A 0 ). Of course A 0 ⊕ I[1]


of §2.2). The Segal category of derived pre-stacks is then defined to be dk − Af f := RHom(dk − Af f op , T op).


of §2.2), a concrete model for dSt(k) is the homotopy theory of functors F : sk − CAlg −→ SSet satisfying the following three properties: 1. For any equivalence A −→ B in sk − CAlg the induced morphism F (A) −→ F (B) is an equivalence of simplicial sets.


in the underived case any derived stack F has a Segal category L(F, O F ) of (unbounded) complexes of O F -modules (see [To-Va-Ve] for more details). First of all the Segal topos dSt(k) has a natural ring object, denoted by O and represented by A 1 . The object O can also be seen as a colimit preserving functor O : dSt(k) −→ L(sk − CAlg), from dSt(k) to the Segal category of simplicial commutative k-algebras. The pair (dSt(k), O) is a ringed Segal topos (see [To-Va-Ve]). In the same way, for any derived stack F , A 1 × F represents a ring object O F in dSt(k)/F , and the pair (dSt(k)/F, O F ) is a ringed Segal topos. The derived Segal category of (dSt(k)/F, O F ) is denoted by L(F, O F ) (see [To-Va-Ve] for a precise definition).

## 5 .
5Tangent and cotangent complexes: For any derived Artin stack F there exists an object L F ∈ L qcoh (F ) called the cotangent complex of F . It is characterized by the following universal property: for any A ∈ sk − CAlg, any morphism x : X = RSpec A −→ F and any simplicial A-module M , there exists a natural equivalence between the homotopy fiber of F (A ⊕ M ) −→ F (A) at x, and M ap N (A)−Mod (x * (L F ), N (M )) (here N is the normalization functor going from simplicial algebras and simplicial modules to dg-algebras and dg-modules).

## Question 4. 7
7What is the relation between τ ([O F ] virt ) and [F ] virt ?

## DR 1 (
1C) ≃ P ic 0 (C) † × K(G m , 1) × RSpec C[C[1]], where C[C[1]] is the trivial square zero extension of C by C[1] (as a commutative dg-algebra it is freely generated by an element in degree -1). Moreover, it can be shown that there exists an equivalence of derived categoriesD(K(G m , 1), D) ≃ D coh (RSpec C[C[1]]).

## 8 .# Introduction

The notion of algebraic (1-)stack was introduced in the late sixties, and since then it has been highly developed and has now become a full theory by its own: it is based on solid foundational material (existence of a nice 2-category of algebraic stacks, notion of sheaves and derived categories . . . ), it contains many interesting and geometrically meaningful examples (the stack of stable maps, the stack of coherent sheaves on a variety . . . ), many theories have been developed for stacks themselves (intersection theory, l-adic formalism, vanishing theorems, motivic cohomology, Riemann-Roch formula, motivic integration . . . ) and these theories have applications to several other contexts (Gromov-Witten invariants, birational geometry, arithmetic geometry, Hodge theory . . . ). I think everyone would agree today that the theory of algebraic stack is an important theory.

Approximately ten years ago C. Simpson introduced in [S3] a notion of algebraic n-stack, and more recently notions of derived scheme and of derived algebraic n-stacks have been introduced in [To-Ve3, HAGII,Lu1]. The purpose of this text is to give an overview on the recent works on the theories of higher algebraic stacks and of higher derived algebraic stacks, and to show that although these theories are not as developed as the theory of algebraic 1-stacks, they are based on solid foundational material, contain interesting and geometrically meaningful examples, and also have interesting developments and applications.

This work is organized in three sections. The first part ( §2) is devoted to the general theory of higher stacks (which is used all along this work), in which I tried to explain the motivations and to give some ideas of the foundations of the theory. As there exist several ways to motivate the theory of higher stacks I had to make a choice and have decided to take the point of view of moduli theory, but contemplating the theory from another point of view would maybe emphasis different motivations. I also had to make a choice concerning the foundations of the theory of higher stacks, as there also exist several possible approaches. I have decided to use the theory of Segal categories (as it seems to me the best model for higher categories available today) but also have tried to systematically make a bridge with model category theory which provides another approach to higher stacks.

In the second part of this work ( §3) I discuss higher Artin stacks (or algebraic n-stacks). I first present the basic notions of the theory, such as the definition of higher Artin stacks and some fundamental notions such as different properties of morphisms (etale, smooth, flat), some sheaf theory (quasi-coherent and l-adic) . . . . Then some examples are discussed, trying to present the most significant ones. Finally I present some developments and applications of higher Artin stacks. Most of them appear already in the literature but some of them are only ideas of possible applications and have not been fully investigated. The third part of this work ( §4) is devoted to derived Artin stacks. It starts by some motivations, and then follows the same presentation as the part on higher Artin stacks.

To finish this short introduction I would like to thank C. Simpson, G. Vezzosi and J. Lurie for numerous conversations about this subject and from which I have learned a lot. I am also grateful to J. Kock and to H.H. Tseng for their comments.

Conventions: The expression stacks always refer to the notion of ∞-stacks (in groupoids). To denote the usual notion of stacks in groupoids as presented in [La-Mo] we will use the expression 1-stacks.

All along this text we assume that the reader knows some basic notions of algebraic (1-)stacks (e.g. as presented in the first chapters of [La-Mo]), and also has some intuitive knowledge of higher category theory (see e.g. the introduction of [Le2]).


# Higher stacks

The main references for this section are [S1,HAGI,Lu2] (see also [Br] for a different approach to 2-stacks).


## Why higher stacks ?

Moduli theory is about classification of objects and families of objects. Its fundamental concept is that of a moduli problem. A moduli problem is a (contravariant) functor F , defined on a certain category C of geometric objects (e.g. schemes, smooth manifolds, topological spaces . . . ), and whose value F (S) is a structure which is supposed to classify families of objects parametrized by the geometric object S ∈ C. In the ancient times the values F (S) of a moduli problem were taken to be sets, and thus it was implicitly assumed that objects were classified up to equality (two points in a sets are or are not equal). However, many moduli problems intend to classify objects non only up to equality but also up to isomorphisms, and it was early recognized that the existence of objects having non trivial automorphisms makes the set of isomorphism classes of objects badly behaved. Because of this, many interesting moduli problems could not be representable by conventional geometric objects such as schemes, smooth manifolds, topological spaces . . . . The theory of 1stacks (in groupoids) proposes a solution to this problem by enhancing the classical notion of moduli functors from set valued functors into groupoid valued functors.

One possible starting point of higher stack theory is the observation that there exist natural and interesting moduli problems for which objects are classified up to a notion of equivalence which is weaker than the notion of isomorphisms. Typical examples are complexes of abelian groups (or sheaves of abelian groups) up to quasi-isomorphisms, topological spaces up to weak homotopy equivalences, or abelian categories up to equivalences of categories. These moduli problems naturally arise as functors F : C op −→ Cat, for which F (S) must be thought as the category of objects parametrized by S and equivalences between them. In these new situations, the values of the moduli functor F are not sets or groupoids anymore but categories. Moreover, the morphisms in these categories must be "inverted", or "localized", in some sense in order to truly classify objects up to equivalences. There exist well known constructions to "invert" a set of morphisms in a category, characterized by universal problems in a 2-categorical context. For instance, the Gabriel-Zisman localization is a solution of a universal problem in the 2-category of categories. There also exists a localization as a solution to a universal problem in the 2-category of "dérivateurs" (see [Cis]). However, in the same way that the construction sending a groupoid to its set of objects is badly behaved, none of these 2-categorical constructions are well behaved. It turns out that the meaningful way to "invert" a set of morphisms in a category is by stating a universal problem in the context of ∞-categories (the precise meaning of this, which requires to fix a theory of ∞-categories, will be discussed in the next paragraph, and the motivated reader can also consult [To1] for a general discussion of the localization problem). In particular, "inverting" the equivalences in our moduli functor F provides an ∞-groupoid valued functor. As a conclusion of this short discussion it seems vertical morphism above is an isomorphism (as well as similar conditions for the higher structures), and thus Segal categories generalize S-categories. In fact, the two notions are equivalent in some sense (see [Ber1]) and the reader can think only in terms of S-categories, keeping in mind that Segal categories behave better for certain purposes and that using S-categories could be rather technical at some point.

The theory of Segal categories works in a very similar manner to usual category theory and most (if not all) of the standard categorical notions can be reasonably defined in the Segal setting.

Here follows a sample of examples (once again we refer to the overview [To-Ve1] for more details).

1. Categories, S-categories and Segal categories: Segal categories form a category SeCat for the obvious notion of morphisms. We will use interchangeably the expression morphisms between Segal categories and functors between Segal categories.

There is a fully faithful functor S − Cat −→ SeCat from the category of S-categories into the category of Segal categories, and thus any S-category will be considered as a Segal category. Moreover, as there is a fully faithful functor Cat −→ S − Cat, we also get a full embedding of the category of categories to the category of Segal categories, and will consider categories as a special kind of Segal categories (they are the ones for which the simplicial sets of morphisms are discrete).

2. Homotopy categories: Any Segal category A possesses a homotopy category Ho(A) (which is a category in the usual sense), having the same objects as A, and for two objects a and b morphisms in Ho(A) are given by Ho(A)(a, b) = π 0 (A(a, b)). The composition is induced by the diagram π 0 (A(a, b, c)) / / ≃ π 0 (A(a, c)) π 0 (A(a, b)) × π 0 (A(b, c)).

The fact that this composition is associative follows from the higher structures on A. The functor SeCat −→ Cat sending A to Ho(A) is left adjoint to the embedding Cat −→ SeCat.

A morphism (between two objects a and b) in a Segal category A is a zero simplex of the simplicial set A(a, b). A morphism is an equivalence in A if its image in Ho(A) is an isomorphism.

3. Equivalences of Segal categories: For a morphism of Segal categories f : A −→ B, we say that f is essentially surjective (resp. fully faithful ) if the induced functor Ho(f ) : Ho(A) −→ Ho(B) is essentially surjective (resp. if for any two objects a and b in A the induced morphism f a,b : A(a, b) −→ B(f (a), f (b)) is an equivalence of simplicial sets). We say that f is an equivalence if it is both fully faithful and essentially surjective. When A and B are categories, and thus Ho(A) = A and Ho(B) = B, this notion of equivalence is the usual notion of equivalences of categories.


## The model category of Segal categories:

The foundational result about Segal categories is the existence of a model structure whose weak equivalences are the equivalences above (see Pe,Ber1]). To be precise this model structure does not exist on the category of Segal categories itself but on a slightly larger category of Segal precategories, but I will simply neglect this fact. For this model structure, every object is cofibrant, but not every Segal category is a fibrant object, and in general fibrant objects are quite difficult to describe (see however [Ber2]). The existence of this model structure is far from being formal and has many consequences. First of all it can be used to state that the theory of S-categories and of Segal categories are equivalent in some sense, as it is known that their model categories are Quillen equivalent (see [Ber1]). The model category of Segal categories can be shown to be enriched over itself (i.e. is an internal model category in the sense of [H-S, §11], see also [Pe,Ber1]). This implies that given two Segal categories A and B it is possible to associate a Segal category of morphisms
RHom(A, B) := Hom(A, RB),
where RB is a fibrant model for B and Hom denotes the internal Hom's in the category of Segal categories. From the point of view of ∞-categories, RHom(A, B) is a model for the ∞category of (lax) functors from A to B. In general, the expression f : A −→ B is a morphism of Segal categories will mean that f is an object in RHom(A, B), or equivalently a morphism in the homotopy category Ho(SeCat). In other words we implicitly allow ourselves to first take a fibrant replacement of B before considering morphisms into B.


## 5.

The 2-Segal category of Segal categories: Considering fibrant Segal categories and their internal Homs as above provides a category enriched over SeCat, denoted by SeCat. This is a 2-Segal category (see [H-S]), and is a model for the ∞-category of (1, ∞)-categories. I will not really use the 2-Segal category SeCat in the sequel, but it is a good idea to keep in mind that it exists.

6. Segal groupoids and delooping: There is a notion of Segal groupoid : by definition a Segal category A is a Segal groupoid if its homotopy category Ho(A) is a groupoid in the usual sense.

For any Segal category A, we can define its geometric realization |A|, which is the diagonal simplicial set of the underlying bi-simplicial of A (see [H-S, §2], where |A| is denoted by R ≥0 (A)). The construction A → |A| has a right adjoint, sending a simplicial set X to its fundamental Segal groupoid Π ∞ (X) (it is denoted by Π 1,se (X) in [H-S, §2]). By definition, the set of objects of Π ∞ (X) is the set of 0-simplex in X, and for two points (x, y) ∈ X 2 0 the simplicial set of morphisms Π ∞ (X)(x, y) is the subsimplicial set of X ∆ 1 sending the two vertices of ∆ 1 to x and y. A fundamental theorem states that the constructions A → |A| and X → Π ∞ (X) provide an equivalence between the homotopy theories of Segal groupoids and of simplicial sets (see [Pe,§6.3]). This last equivalence is a higher categorical version of the well known equivalence between the homotopy theories of 1-truncated homotopy types and of groupoids.

7. Localization of Segal categories: Given a Segal category A and a set of morphisms S in Ho(A), there exists a Segal category L(A, S) obtained by inverting the arrows in S. This construction is the Segal analog of the Gabriel-Zisman localization for categories. By definition, the Segal category L(A, S) comes with a localization morphism l : A −→ L(A, S) satisfying the following universal property: for any Segal category B, the induced morphism
l * : RHom(L(A, S), B) −→ RHom(A, B)
is fully faithful, and its essential image consists of morphisms A −→ B sending morphisms of S into equivalences in B (i.e. isomorphisms in Ho(B)). The fact that L(A, S) always exists is not an easy result (see e.g. [H-S], or [To2] for a linear analog). When applied to the case where A is a category considered as a Segal category, the construction L(A, S) described above coincides, up to an equivalence, with the simplicial localization construction of . It is important to note that Ho(L(A, S)) is naturally equivalent to the Gabriel-Zisman localization S −1 A, but that in general the natural morphism
L(A, S) −→ S −1 A
is not an equivalence (examples will be given below). 
LM int / / LM Ho(M ) int / / Ho(M ),
where Ho(M ) int is the maximal subgroupoid of Ho(M ). As LM int is a Segal groupoid it is determined by its geometric realization by the formula LM int ≃ Π ∞ (|LM int |). It is possible to show that there exists a natural equivalence of simplicial sets |LM int | ≃ |W |, where |W | is the nerve of the category W (it is also its geometric realization as a Segal category). Thus, we have LM int ≃ Π ∞ (|W |), and the Segal groupoid LM int is essentially the same thing as the simplicial set |W |. This fact explains that topologists often refer to the simplicial set |W | as the classifying space of objects in M : it truly is a model for the ∞-groupoid obtained from M by inverting the morphisms in W . This fact will be highly used in the construction and the description of higher stacks.

10. The Yoneda embedding: Given a Segal category A there is a Yoneda embedding morphism
h : A −→ RHom(A op , T op),
which is known to be fully faithful (this is the Segal version of the Yoneda lemma). Any morphism A op −→ T op in the essential image of this morphism is called representable. Dually, there is a notion of corepresentable morphism.


## 11

. Adjunctions: Given a morphism of Segal categories f : A −→ B, we say that f has a right adjoint if there exists a morphism g : B −→ A and a point h ∈ RHom(A, A)(Id, gf ), such that for any two objects a ∈ A and b ∈ B the natural morphism induced by h
A(f (a), b) g * / / A(gf (a), g(b)) h * / / A(a, g(b))
is an equivalence of simplicial sets. This definition permits to talk about adjunction between Segal categories. An important fact is that a Quillen adjunction between model categories
f : M −→ N M ←− N : g
gives rise to a natural adjunction of Segal categories
Lf : LM −→ LN LM ←− LN : Lg.
12. Limits: Given two Segal categories A and I, we say that A has limits (resp. colimits) along I if the constant diagram morphism A −→ RHom(I, A) has a right adjoint (resp. left adjoint). This gives a notion of Segal categories having (small) limits (resp. colimits), or finite limits (resp. colimits). In particular we can talk about fibered and cofibered squares, final and initial objects, left and right exactness . . . .

13. The strictification theorem: Let M be a cofibrantly generated model category, and C a category with a subcategory S ⊂ C. We consider the category M C of functors from C to M , and M (C,S) the subcategory of functors sending morphisms in S to equivalences in M . The notion of equivalences in M induces a levelwise notion of equivalences in M (C,S) . An important theorem, called the strictification theorem, states that there exists a natural equivalence of Segal categories L(M (C,S) ) ≃ RHom(L(C, S), LM ).

A proof can be found in [H-S] (see also [To2] in the context of dg-categories that can easily be translated to the simplicial setting). This theorem is very important as it provides a rather good dictionary between constructions in the context of model categories and constructions in the context of Segal categories. For instance, for a model category M the existence of homotopy limits and colimits in M implies that the Segal category LM possesses limits and colimits in the sense of (12).

Another important consequence of the strictification theorem and of the Yoneda lemma (12) [S4]).

Finally, the strictification theorem also possesses a relative version, for presheaves of model categories on C op (the absolute version above being for the constant presheaf with values M ), but we will not reproduce it here. This generalized strictification theorem is important for stack theory as it allows to describe certain homotopy limits (see e.g. [HAGII, App. B]) of Segal categories in terms of model categories, and is often a key statement to check that something is a stack.

The previous list of facts shows that through the construction M → LM , model category theory is somehow an approximation of Segal category theory, and thus of the theory of (1, ∞)-catgeories. The main advantage of passing from model categories to Segal categories is the existence of the internal Hom object RHom, as well as a gain of functoriality. However, model categories are 1-categorical structures, and thus it is reasonable to say that model categories are in some sense strict forms of (1, ∞)-categories. We finish this paragraph by stipulated this as another important principle:

Principle 2: Model categories are strict forms of (1, ∞)-categories, and model category theory is a strict form of the theory of (1, ∞)-catgeories.

This principle is not only a conceptual one, and it can be verified dramatically in practice. Typically, general constructions are done using Segal categories as they are more functorial, but explicit computations are usually done using model category techniques. I personally like to think that chosing a model category which is a model for a given Segal category (i.e. strictifying the Segal category) is very much like chosing a system of local coordinates on a manifold: the intrinsic object is the Segal category, but the model category is useful to have hands on it. For an example of application of the principle 2 to the construction of higher stacks see the end of the next section.

To finish this part on Segal categories we introduce the following notations for a Segal category A and two objects a and b
M ap A (a, b) := A(a, b) [a, b] A := π 0 (A(a, b)) = Ho(A)(a, b).
When A is clear from the context we will simply write M ap(a, b) for M ap A (a, b) and [a, b] for [a, b] A .


## Higher stacks

We are now ready to explain what are higher stacks (in groupoids). For this let me first remind the following characterization of the category Sh(C) of sheaves of sets on a Grothendieck site C.

There exists a functor, which is the Yoneda embedding followed by the associated sheaf functor, h : C −→ Sh(C). This functor can be characterized by a universal property in the following way. First of all for two categories A and B with colimits we will denote by Hom c (A, B) the category of functors commuting with colimits ("c" stands for "continuous"). Also, recall from [DHI] the notion of an hypercovering in C (and noticed that an hypercovering in C is not a simplicial object in C but only in presheaves of sets over C). Then the functor h : C −→ Sh(C) is characterized up to equivalence by the following properties.

• The category Sh(C) has colimits.

• For any category with colimits B, the induced functor
h * : Hom c (Sh(C), B) −→ Hom(C, B)
is fully faithful and its image consists of functors F : C −→ B such that for any object X ∈ C and any hypercovering U * → X in C the natural morphism in B
Colim [n]∈∆ op F (U n ) −→ F (X) is an isomorphism 3 .
Such a characterization also exists for the 2-category of 1-stacks, but in the setting of 2categories. The definition of the Segal category of stacks on C is simply the Segal anolog of these two properties.

Definition 2.1 Let C be a Grothendieck site. A Segal category of stacks on C is a Segal category A together with a morphism h : C −→ A such that the following two properties are satisfied.

1. The Segal category A has colimits.


## For any Segal category with colimits B, the induced morphism
h * : RHom c (A, B) −→ RHom(C, B)
is fully faithful and its image consists of morphisms F : C −→ B such that for any object X ∈ C and any hypercovering U * → X in C the natural morphism in B
Colim [n]∈∆ op F (U n ) −→ F (X)
is an equivalence (i.e. an isomorphism in Ho(B)).

When it exists a Segal category of stacks over C will be denoted by St(C).

A fundamental result states that for any Grothendieck site C a Segal category of stacks on C exists and is unique up to equivalence. Once enough of the basic categorical constructions are extended to the Segal category setting and proved to behave correctly, this theorem is not difficult to prove and is proved in a similar way as the corresponding statement for categories of sheaves. We start by considering the Segal category of prestacks C := RHom(C op , T op), and we define St(C) a localization of C in order to invert all the morphisms of the form
colim [n]∈∆ op U n −→ X
for all hypercovering U * −→ X in C. The fact that this satisfies the correct universal property follows from the definition of the localization and from the fact that the Yoneda embedding C −→ C induces for any cocomplete Segal category B an equivalence
RHom c ( C, B) ≃ RHom(C, B),
(this last equivalece can be proved from the strictification theorem, point (13) of §2.2).

The Segal category of stacks St(C) possesses of course a model category counter part, which is extremely useful in practice. By definition, we start by the projective model structure on SP r(C), the category of simplicial presheaves on C (equivalences and fibrations are levelwise). We then define the model category SP r τ (C) of stacks over C as being the left Bousfield localization of SP r(C) along the set of morphisms U * −→ X for any hypercovering U * → X (here U * is considered as simplicial presheaf and thus as an object in SP r(C), and is a model for Hocolim [n]∈∆ op U n computed in SP r(C)). Using the strictification theorem (point (13) of §2.2) it is possible to prove that there are natural equivalences of Segal categories
L(SP r(C)) ≃ C L(SP r τ (C)) ≃ St(C).
This last equivalences explain that stacks are modeled by simplicial presheaves. This important fact has been first stressed by C. Simpson in [S1], and then has been used by several author (see e.g. [Hol,Ja2]). Another model for St(C) is the model category of simplicial sheaves, originally introduced by A. Joyal and revisited by J. Jardine (see [Joy,Ja1]). This last model shows that the Segal category St(C) only depends on the topos Sh(C), and not of the choice of the site C. By universal properties there exists a natural morphism π 0 : St(C) −→ Sh(C) which can be thought of as a trunction functor. This morphism has a fully faithful right adjoint Sh(C) −→ St(C) identifying Sh(C) with the full sub-Segal category of St(C) consisting of discrete objects (i.e. objects x for which for any other object y the simplicial set St(C)(y, x) is equivalent to a set). In the same way, the 2-category of 1-stacks can be seen as a full sub-Segal category of St(C) consisting of 1-truncated objects (see [Hol, HAGI]). More generally, the full sub-Segal category St ≤n (C) of St(C) consisting of n-truncated objects is a model for the (n+1)-category of n-stacks in groupoids, and the inclusion St ≤n (C) −→ St(C) possesses a right adjoint t ≤n : St(C) −→ St ≤n (C) called the n-th truncation functor (of course t ≤0 coincides with π 0 described above).

As for categories of sheaves the localization morphism (which must be considered as the associated stack functor)
a : C −→ St(C),
has a fully faithful right adjoint i : St(C) −→ C. Concrete models for St(C) and C can then be described as follows. A model for C is the S-category SP r(C) cf of cofibrant and fibrant objects in SP r(C). A model for St(C) is the full sub-S-category of SP r(C) cf consisting of functors F : C op −→ SSet such that for any hypercovering U * −→ X in C the natural morphism
F (X) −→ Holim [n]∈∆ F (U n )
is an equivalence. Even more concrete models for the homotopy categories Ho( C) and Ho(St(C)) are given by the homotopy category of presheaves of simplicial sets on C and its full subcategory consisting of functors satifying the descent condition above. With this models, the functor π 0 : Ho(St(C)) −→ Sh(C) mentioned above simply sends a simplicial presheaf F to its sheaf of connected component (i.e. the sheaf associated to the presheaf X → π 0 (F (X))).

An important fact is that the morphism a is left exact (i.e. commutes with finite limits). This has many interesting exactness consequences on the Segal catgeory St(C), as for instance the existence of internal Hom objects (i.e. existence of stacks of morphisms). These exactness properties are formally the same as the one satisfied by the Segal category T op, and can be summarized as Segal category versions of the standard Giraud's axioms for Grothendieck topos. The three fundamental properties are (see [HAGI,):

1. The Segal category St(C) has colimits and a set of small generators (this implies that it also has limits, which can also be seen directly).

2. Sums in St(C) are disjoints: for any family of objects {x i } i∈I in St(C) and any i 1 = i 2 in I the following diagrams
∅ / / x i2 x i1 / / x i1 x i1 / / i∈I x i x i1 / / i∈I x i are cartesian.
3. Equivalence relations are effective in St(C): for any groupoid object X 1 ⇒ X 0 with quotient |X * |, the natural morphism X 1 −→ X 0 × |X * | X 0 is an equivalence in St(C).

These three properties can be taken as the definition of a Segal topos. I refer to [To-Ve1, Lu2] for more on this notion. It can be proved that Segal topos are precisely the Segal categories which are exact localizations of Segal categories of the form RHom(T, T op) for some Segal category T . An important remark however is that there exists Segal topos which are not exact localizations of Segal categories of the form RHom(C, T op) for some category C, showing that there exists exotic Segal topos (i.e. which are not determined by a topos in the usual sense). Such an exotic Segal topos will be used to develop the theory of derived stacks later in this paper. Another example is the Segal category St(k)/F , for a stack F which is not a sheaf, which is a Segal topos not generated by a Grothendieck site in general.

To finish this section on higher stacks I would like to give one particular example of principle 2 of §2.2 in action, concerned with the construction of higher stacks from model category data.

Let C be a Grothendieck site. We are looking for a general procedure to construct stacks over C, i.e. simplicial presheaves with the descent conditions. From the point of view of moduli theory, a stack F , which is modeled by a simplicial presheaf F : C op −→ SSet, represents a moduli problem: for an object X ∈ C, the simplicial set F (X) is a classifying space of families of objects over X. From the dictionnay between Segal categories and model categories (see points (8) and (9) of §2.2), we can expect F (X) to be the nerve of the subcategory of equivalences in a model category M (X), depending on X, and being a model for the homotopy theory of families of objects parametrized by X 4 . The starting point is thus a presheaf of model categories M on C, also called a Quillen presheaf : it consists for any X ∈ C of a model category M (X), and for any morphism f : X −→ Y of a left Quillen functor f * : M (Y ) −→ M (X) satisfying f * • g * = (g • f ) * (there is of course a dual notion with right Quillen functors). From such a Quillen presheaf we construct a prestack sending X to F (X) := |W M (X) c |, the nerve of equivalences in M (X) c (i.e. between cofibrant objects), and f : X −→ Y to the induced morphism f * : F (Y ) −→ F (X). Note that the restriction to cofibrant objects is necessary to insure that f * preserves equivalences. However, as for any model category N the nerve of equivalences in N and in N c are naturally equivalent to each others, F (X) is a classifying space of objects in M (X), as required.

In this way, for any presheaf of model categories M we obtain a simplicial presheaf F , which by point (9) of §2.2 can be see as the ∞-prestack of objects in M up to equivalences. The next step is to add conditions on M to insure that the prestack F is a stack, i.e. satisfies the descent condition for hypercoverings. For any hypercovering U * −→ X in C, we can consider the the cosimplicial diagram of model categories n → M (U n ) (we make here the same abuse of notation as before, as U n is not an object in C but only a formal disjoint union of such, and M (U n ) means the product of the values of M over the various components of U n ). We consider Sect(U * , M ), the category of global section of this cosimplicial category: its objects are families of objects x n ∈ M (U n ) for any n, together with morphisms u * (x m ) → x n in M (U n ) for any simplicial map u : U n −→ U m , satisfying the usual cocycle condition (see [HAGII, App. B]). There exists a natural Quillen model structure on Sect(U * , M ) for which the equivalences and fibrations are defined levelwise. It is then possible to construct a natural adjunction
φ : Ho(M (X)) −→ Ho(Sect(U * , M )) Ho(M (X)) ←− Ho(Sect(U * , M )) : ψ.
We say that M satisfies homotopical descent (the reader will notice the analogy with usual cohomological descent for complexes of sheaves) if the above adjunction satisfies the following two conditions:

• The functor φ : Ho(M (X)) −→ Ho(Sect(U * , M )) is fully faifthul.

• An object x * ∈ Ho(Sect(U * , M )) is in the essential image of φ if and only if for any u :
U n −→ U m the induced morphism Lu * (x m ) −→ x n is an isomorphisms in Ho(M (U n )).
An important consequence of the strictification theorem (see point (13) of §2.2 as well as [HAGII, App. B]) states that with the notations above, the prestack F is a stack if M satisfies homotopical descent. As far as I know this is the most powerful way to construct examples of stacks, and many of the examples of stacks presented in the sequel are based on this construction.


# Higher Artin stacks

Let k be a commutative ring and k − Af f the category of affine k-schemes endowed with the faithfuly flat and quasi-compact topology. The Segal category of stacks St(k − Af f ) will simply be denoted by St(k), and its objects called k-stacks. The ffqc topology being subcanonical the natural morphism k − Af f −→ St(k) is fully faithful, and we will simply identify k − Af f with its essential image in St(k) (so any stack equivalent to an affine scheme will be called an affine scheme).

Recall that a model for St(k) is the model category of presheaves of simplicial sets with the local model structure as in [Ja1,DHI], and thus that objects in St(k) might be described concretely as functors
F : k − Af f op = k − CAlg −→ SSet,
from the opposite of the category of affine k-schemes or equivalently the category of commutative k-algebras, such that for any ffqc hypercovering of affine schemes U * −→ X the natural morphism
F (X) −→ Holim [n]∈∆ F (U n )
is an equivalence (once again we make the abuse of notation, as U n is only a formal disjoint union of affine schemes). We will often use this description in terms of simplicial presheaves in order to construct explicit objects in the Segal category St(k).

Recall also that we have introduced the following notations
M ap St(k) (F, G) := St(k)(F, G) [F, G] St(k) := π 0 (M ap(F, G)).
Moreover, the subscrite St(k) will not be mentioned when there are no ambiguities. From a model category theory point of view, if F and G are represented by simplicial presheaves we have
M ap(F, G) ≃ RHom(F, G) = Hom(QF, RG),
where Hom are the natural simplicial Hom's of the category of simplicial presheaves, and Q and R are cofibrant and fibrant replacement functors inside the category of simplicial presheaves endowed with its local projective model structure (see [Ja1,DHI]) The main references for higher Artin stacks are [S3] and [HAGII,§2.1]. The approach of [HAGII] uses model categories, and concerning notation the homotopy category of the Segal category St(k) is denoted by St(k) = Ho(St(k)) in [HAGII]. In the sequel we will work with the Segal category St(k), but the constructions and statements given below can also be translated into a model category language and considered in St(k) (e.g. the fiber product in the Segal category St(k) corresponds to the homotopy fiber products in St(k), denoted in [HAGII] by × h ).


## Basic notions

Higher Artin stacks will form a certain sub-Segal category of St(k) of objects obtained as nice quotients from affine schemes. The definition of an n-Artin stack goes by induction on n as follows.

• A (-1)-Artin stack is an affine scheme. A morphism f : F −→ G between stacks is (-1)representable, or affine, if for any affine scheme X and any morphism X −→ G the pull back F × G X is a (-1)-Artin stack.

• Let us assume that the notion of (n-1)-Artin stacks has been defined, as well as the notion of (n-1)-representable morphisms (one also says (n-1)-geometric morphisms) and smooth (n-1)-representable morphisms.

-A stack F is an n-Artin stack if there exists a disjoint union of affine schemes X and a smooth (n-1)-representable and surjective morphism X −→ F (here surjective must be understood in a sheaf-like sense, that for any affine scheme Y , any morphism Y −→ F factors through X locally on the ffqc on Y ). Such a morphism X −→ F is called a smooth n-atlas for F .

-A morphism f : F −→ G between stacks is called n-representable (or n-geometric) if for any affine scheme X and any morphism X −→ G the pull back F × G X is an n-Artin stack.

-An n-representable morphism f : F −→ G between stacks is called smooth if for any affine scheme X and any morphism X −→ G, there exists a smooth n-atlas U −→ F × G X such that the composition U −→ X is a smooth morphism of schemes.

• A stack F which is an n-Artin stack for some n is simply called an Artin stack. If furthermore F is n-truncated (i.e. its values as a simplicial presheaf are n-truncated simplicial sets, π i (F (X)) = 0 for all i > n and all X ∈ k − Af f ) then F is called an Artin n-stack. In the same way, a morphism f : F −→ G between stacks is called representable (or geometric) if it is n-representable for some n.

The reader is warned that there is a small discrepancy for the indices in the notions of n-Artin stack and Artin n-stack. For example a scheme is always an Artin 0-stack, but is only a 1-Artin stack. It is a 0-Artin stack if and only if its diagonal is an affine morphism (see [HAGII] for more details on this). To avoid confusion we will not use the terminology n-Artin stack which has been introduced only for the need of the inductive definition, and we will stay with the notion of Artin stack and Artin n-stack which are the pertinent ones for our purpose.

Most of the very basic properties of Artin 1-stacks can be shown to extend to the case of Artin stacks. Here follows a sample of results.

1. Properties of morphisms: Any property P of morphisms of schemes which is local for the smooth topology extends naturally to a property P of morphisms between Artin stacks (see [HAGII,1.3.6]). This provides notions of unramified, smooth, etale and flat morphisms. A morphism of Artin stacks F −→ G is an open (resp. closed) immersion if for any affine scheme X and any morphism X −→ G the stack F × G X is a scheme and the induced morphism F × G X −→ X is an open (resp. closed) immersion.

An Artin stack F is quasi-compact if it can be covered by an affine scheme (i.e. there exists a surjective morphism of stacks X −→ F with X affine). A morphism f : F −→ G between Artin stacks is quasi-compact if for any affine scheme X and any morphisms X −→ G the stack F × G X is quasi-compact. Finally, by induction on n, we say that an n-geometric stack F is strongly quasi-compact if it is quasi-compact and if the diagonal F −→ F × F is strongly quasi-compact (with the convention that a 0-geometric stack is strongly quasi-compact if it is quasi-compact).

Finally, an Artin stack F is locally of finite presentation if it has a smooth atlas U −→ F such that the scheme U is locally of finite presentation. An Artin stack F is strongly of finite presentation if it is strongly quasi-compact and locally of finite presentation.

2. Presentation as quotient stacks: The full sub-Segal category of St(k) consisting of Artin stacks is stable by finite limits and disjoint unions. Moreover, a stack F is an Artin n-stack if and only it is equivalent to the quotient stack of a groupoid object X 1 ⇒ X 0 with X 0 and X 1 being Artin (n-1)-stacks and the morphisms X 1 −→ X 0 being smooth (see [HAGII,§1.3.4]). As in the usual case of Artin 1-stacks, the geometry of such a quotient stack is the equivariant geometry of the groupoid X 1 ⇒ X 0 . This also provides a systematic way to construct examples of higher stacks by taking quotient of schemes by Artin group stacks. For instance, the quotient stack of a scheme by an action of an Artin group 1-stack is in general an Artin 2-stack.

3. Gerbes: An Artin stack F is a gerbe if its 0-truncation π 0 (F ) is an algebraic space and if the natural morphism F −→ π 0 (F ) is flat. It can be shown that an Artin stack F is a gerbe if and only if the projection
I F := F × F ×F F −→ F
is flat (I F is called the inertia stack of F , and is the stack of morphisms from the constant stack S 1 := K(Z, 1) to F ) (see [To3]).

By generic flatness it can thus been shown that any Artin n-stack F strongly of finite presentation over Spec k possesses a finite decreasing sequence of closed substacks
F r = ∅ / / F r−1 / / . . . F 1 / / F 0 = F, such that each stack F i − F i+1 is a gerbe.
4. Deligne-Mumford stacks: An Artin stack F is a Deligne-Mumford stack if there exists a smooth altas U −→ F which is an etale morphism. This is equivalent to the fact that the diagonal morphism F −→ F × F is unramified. However, the notion of a Deligne-Mumford n-stack is not very interesting for n > 1, as the 1-truncation τ ≤1 F is always a Deligne-Mumford 1-stack and the natural morphism F −→ τ ≤1 F is an etale morphism. Indeed, we can write F as the quotient of a groupoid object X 1 ⇒ X 0 where X 0 is a scheme, X 1 is a Deligne-Mumford (n-1)-stack and the morphism X 1 −→ X 0 is etale. The morphism X 1 −→ X 0 being etale, it is easy to check that the 0-truncation π 0 (X 1 ) is an algebraic space etale over X 0 , and that furthermore π 0 (X 1 ) ⇒ X 0 defines an etale groupoid whose quotient is equivalent to τ ≤1 F . This shows that τ ≤1 F is a Deligne-Mumford 1-stack, and the diagram
X 0 −→ F −→ τ ≤1 F shows that the projection F −→ τ ≤1 F is etale.

## Flat and smooth atlases:

A stack F is an Artin stack if and only there exists a scheme X and a a faithfully flat and locally finitely presented representable morphism p : X −→ F . This means that we would not gain anything by defining a generalized notion of being an Artin stack by only requiring the existence of a flat atlas. To show this we define X to be the stack of quasi-sections of the morphism p, as follows: for an affine scheme S a morphism S −→ X is by definition given by a commutative diagram in St(k)
S ′ f / / X S / / F,
where f is a finite flat morphism. The stack X can be seen to be an Artin stack together with a natural projection X −→ F . We denote by X lci the open substack of consisting of points for which the relative cotangent complex of the morphism S ′ −→ X is perfect of amplitude contained in [−1, 0]. Then, an argument of obstruction theory shows that the morphism X lci −→ F is smooth (note that it is automatically representable because of the condition on the diagonal of F ). Finally, the morphism X lci −→ F is surjective as it is so on points with values in algebraically closed fields (because any scheme locally of finite type over an algebraically closed field contains a point which is Cohen MacCauley).

6. Homotopy groups schemes: For any affine scheme and any morphism X −→ F of stacks we define the loop stack at x to be
Ω x F := X × F X,
which is a stack over X. The natural morphism
Ω x F × X Ω x F ≃ X × F X × F X −→ X × F X
makes Ω x F into a group stack over X. The n-th iterated loop stack is defined by induction
Ω (n) x F := Ω x (Ω (n−1) x F ),
which is again a group stack over X. The n-th homotopy sheaf of F at the point x is defined to be π n (F, x) := π 0 (Ω (n) x F ) and is a sheaf of groups (abelian for n > 1) on X.

It can be shown that if F is an Artin stack strongly of finite presentation then for any k-field K and any morphism x : Spec K −→ F , the sheaf of groups π n (F, x) is representable by a group scheme of finite presentation over Spec K (see [To3]). The group scheme π n (F, x) is the group of n-automorphisms of the points x in F , and are higher analogs of the isotropy groups of Artin 1-stacks. However, the notion of derived category of a ringed Segal topos is bit beyond the scope of this overview and we will rather give an explicit description of L(F, O F ) as follows. The stack F can be writen as a colimit (in St(k)) of a simplicial scheme X * . For any n, the category C(X, O Xn ) of complexes of (big) O Xn -modules on X n can be endowed with a cofibrantly model category structure for which the equivalences are the quasi-isomorphisms (see [Ho2]). Moreover, for any transition morphism a : X n −→ X m the adjunction
a * : C(X, O Xm ) −→ C(X, O Xn ) C(X, O Xm ) ←− C(X, O Xn ) : a *
is a Quillen adjunction. Passing to the localizations (in the sense of point (7) of §2.2) of the subcategories of cofibrant objects we obtain a cosimplicial diagram of Segal categories
∆ −→ SeCat n → L(C(X, O Xn ) c ).
The homotopy limit of this diagram, taken in the homotopy theory of Segal categories gives a Segal category L(F, O) which is the derived Segal category of O F -modules. Its homotopy category is by definition To1], and thus its homotopy category D(F, O F ) inherits a natural triangulated structure.
D(F, O F ). The Segal category L(F, O F ) is stable in the sense of [To-Ve2,
It is important to note that D(F, O F ) is in general not the derived category of a ringed topos (as soon as F is not 0-truncated, i.e. a sheaf of sets), and this is directly related to the fact that the topos St/F is in general not generated by a Grothendieck topos. The derived category D(F, O F ) can also be identified with the full sub-category of the derived category of the simplicial scheme X * consisting of objects satisfying the cohomological descent condition. When F is a scheme, L(F, O F ) is the Segal category of complexes of big O F -modules, and thus D(F, O F ) is the usual derived category of sheaves of O F on the big ffqc site of F .

We define a full sub-Segal category L qcoh (F ) of L(F, O F ) consisiting of objects E such that for any affine scheme X and any morphism u : X −→ F , the object u * (E) ∈ D(X, O X ) is a quasi-coherent complex. Objects in L qcoh (F ) will be called quasi-coherent complexes of O F -modules. When F is an Artin stack, it is possible to define a t-structure on L qcoh (F ), by defining objects with non positive amplitude to be E ∈ L qcoh (F ) such that for any affine scheme X and any morphism u : X −→ F , the complex u * (E) has no non zero positive cohomology sheaves. Dually, an object E is of non negative amplitude if for any affine scheme and flat morphism u : X −→ F , the quasi-coherent complex u * (E) on X has no non zero negative cohomology sheaves (as sheaves on the small Zariski site of X). The heart of this t-structure is denoted by QCoh(F ), and is called the abelian category of quasi-coherent sheaves on F .

For any morphism of stacks f : F −→ F ′ there exists an adjunction of Segal categories
f * : L(F ′ , O F ′ ) −→ L(F, O F ) L(F ′ , O F ′ ) ←− L(F, O F ) : f *
The functor f * preserves quasi-coherent complexes, and induces a functor
f * : L qcoh (F ′ ) −→ L qcoh (F ).
It can be shown that this functor admits a right adjoint f qoch *
f qcoh * : L qcoh (F ′ ) −→ L qcoh (F ).
However, in general f * does not preserves quasi-coherent complexes and thus f qcoh * is not induced by the functor f * in general. However, if f : F −→ F ′ is a strongly quasi-compact morphisms between Artin stacks, and if E L qcoh (F ) is bounded below, then there exists a natural equivalence in L(F ′ , O F ′ ) between f * (E) and f qcoh * (E). (see [To-Va-Ve]). Once again, the notion of a derived Segal category of ringed Segal topos is outside of the scope of this overview, so it is preferable to give the following more explicit description of L(F et , Z/l i ). We write F as the colimit in St(k) of a simplicial diagram of schemes X * . For each n, we consider the category C((X n ) et , Z/l i ) of (unbounded) complexes of sheaves of Z/l i -modules on the small etale site of X. The localization of C((X n ) et , Z/l i ) along the quasi-isomorphisms is by definition the Segal category L((X n ) et , Z/l i ). For each simplicial morphism X n −→ X m there is a natural pull back morphism
L((X m ) et , Z/l i ) −→ L((X n ) et , Z/l i ).
We get that way a cosimplicial diagram n → L((X n ) et , Z/l i ) of Segal categories and we set
L(F et , Z/l i ) = Holim n∈∆ L((X n ) et , Z/l i ),
where the homotopy limit in taken in the model category of Segal categories. Finally, the natural morphisms Z/l i −→ Z/l i−1 induce natural morphisms of Segal categories
L(F et , Z/l i ) −→ L(F et , Z/l i−1 ),
and by definition the l-adic derived Segal category of F is
L(F et , Z l ) = Holim i L(F et , Z/l i ).
As for the case of complexes of O F -modules, the associated homotopy category
D(F et , Z/l i ) := Ho(L(F et , Z/l i ))
is not the derived category of a Grothendieck topos, and this related to the fact that Et/F is not generated by a Grothendieck site except when F is an algebraic space.

For any morphism of Artin stacks f : F −→ F ′ there exists a natural adjunction
f * : L(F ′ et , Z l ) −→ L(F et , Z l ) L(F ′ et , Z l ) ←− L(F et , Z l ) : f * .
It is also possible to define a direct image with compact supports
f ! : L(F et , Z l ) −→ L(F ′ et , Z l ),
at least when the morphism f is strongly of finite type. This morphism has a right adjoint
f ! : L(F ′ et , Z l ) −→ L(F et , Z l ).
These four operations can be completed into six operations by introducing a tensor product and a corresponding internal Hom operations. The six operations can then be used to prove a base change formula as well as a trace formula for certain kind of l-adic complexes satisfying some finiteness conditions. These results are out of the scope of the present overview, and the reader will find the details in the forthcoming work [To-Va-Ve]. I would also like to mention [Be] and [La-Ol] where the l-adic formalism has been studied for Artin 1-stacks, and [To3] for a particular case of the trace formula for special Artin stacks (see below for the definition).

9. Tangent and cotangent spaces: Let F be an Artin stack, X = Spec A an affine scheme and x : X −→ F be a morphism of stacks. We define a morphism of Segal categories
Der F (X, −) : A − M od −→ T op
in the following way. For an A-module M we consider the trivial square zero extension A⊕M , and the natural closed embedding of affine schemes X −→ X[M ] := Spec A ⊕ M . We set
Der F (X, M ) := M ap X/St(k) (X[M ], F ).
It can be shown that there exists a unique objects Ω 1 F,x ∈ D ≥0 (A), in the positive derived category of A-modules with natural equivalences
Der F (X, M ) ≃ M ap(Ω 1 F,x , M )
, where the mapping space on the right hand side is taken in the model category of unbounded complexes of A-modules (see [Ho1]). The complex Ω 1 F,x is called the cotangent space of F at x, thought its not an A-module but only a complex of A-modules. The negative part of the dual complex of A-modules is called the tangent space of F at x and is denoted by
T x F := RHom(Ω 1 F,x , A) ≤0 ∈ D ≤0 (A). The relation between Ω 1
F,x and the tangent stack is the following. We define a stack T F −→ F by setting
T F := Map(Spec k[ǫ], F ), where k[ǫ]
is the k-algebra of dual numbers and where Map are the internal Homs of St(k) (i.e. the stacks of morphisms). For a point x : X −→ F as above we have a natural equivalence of stacks over X
X × F T F ≃ V(Ω 1 F,x ), where V(Ω 1 F,x )
is the linear stack associated to Ω 1 F,x as defined in the example (2) of the section §3.2 below.

It is also possible to glue all the complexes Ω 1 F,x for x : X −→ F varying in the Segal category of smooth morphisms to F and to obtain an object Ω F ∈ L ≥0 qcoh (F ), called the cotangent sheaf of F , thought its not a sheaf but a complexes of sheaves. The negative part of the dual of Ω F , as a complex of O F -modules, is called the tangent sheaf of F and is denoted by T F . In general T F is not quasi-coherent anymore (except when Ω 1 F is perfect). There is of course a natural equivalence of stacks over F
T F ≃ V(Ω F ).
Finally, in the section on derived stacks (see §4) we will see that Ω F is only the truncated version of a cotangent complex encoding important informations about the deformation theory of F . 10. Complex Artin stacks and analytic stacks: Assume now that k = C. We can define a Segal category St(C) an of analytic stacks, as well as a notion of Artin analytic n-stacks. We start with Stein, the site of Stein analytic spaces endowed with natural transcendent topology. The Segal category of stacks on Stein is denoted by St(C) an . The notion of Artin n-stacks in St(C) an is defined using a straightforward analog of the algebraic notion.

The analytification functor provides a functor a : C − Af f −→ Stein, which is a continuous morphism of sites. It induces an adjunction on the Segal categories of stacks
a ! : St(C) −→ St(C) an St(C) ←− St(C) an : a * ,
where on the level of simplicial presheaves the functor a * is defined by the formula a * (F )(X) := F (X an ). The functor a ! is denoted by F → F an and is called the analytification functor.

Being an inverse image functor induced from a continuous morphism of sites it commutes with finite limits. Moreover, as it sends smooth morphisms between affine C-schemes it is easy to check that it preserves Artin n-stacks.


## Some examples

1. Eilenberg-MacLane stacks: For a sheaf of abelian groups A (on the site of affine kschemes), we can consider the stack K(A, n) ∈ St(k). The stack K(A, n) is characterized, up to equivalence in St(k), by the following universal property: for any affine k-scheme X there are functorial bijections π 0 (M ap(X, K(A, n))) ≃ H n f f qc (X, A).

More generally, there exist functorial equivalences of simplicial sets
M ap(X, K(A, n)) ≃ DK(H f f qc (X, A))
,

where H f f qc (X, A) is the complex of cohomology of X with coefficients in the sheaf A, and DK is the Dold-Kan functor from complexes to simplicial sets. This implies in particular that we have π i (M ap(X, K(A, n))) ≃ H n−i f f qc (X, A). The Eilenberg-MacLane stacks can be used to define the cohomology groups of any stack F ∈ St(k) with coefficients in the sheaf of abelian groups A by the formula
H n (F, A) := π 0 (M ap(F, K(A, n)) = [F, K(A, n)].
This gives a good notion of cohomology for any Artin stacks with coefficients in some sheaf of abelian groups. Of course, as we use the ffqc topology this is ffqc cohomology, and for a scheme X and a sheaf of groups A we have H n (X, A) = H n f f qc (X, A). Finally, when the sheaf of groups A is represented by a an algebraic space which is flat and locally of finite presentation over Spec k, then K(A, n) is an Artin n-stack. In this case the stack K(A, n) is moreover smooth over Spec k, as this can been checked inductively on n (the case n = 1 being treated in [La-Mo]).

2. Linear stacks: Let F be an Artin stack and let E ∈ L(F, O F ) be a quasi-coherent complex over F . We define a stack V(E) over F by
V(E) : St(k)/F −→ T op (f : F ′ → F ) → M ap L(F ′ ,O F ′ ) (f * (E), O F ′ ).
The stack V(E) is an generalization of the total affine space associated to a quasi-coherent sheaf, and is called the linear stack associated to E. By construction, it is characterized by the following universal property The stack V(E) is an Artin stack if E is a perfect complex (i.e. its pull-backs to any affine scheme is quasi-isomorphic to a bounded complex of vector bundles of finite rank), and the morphism V(E) −→ F is then strongly of finite presentation. If moreover E is perfect with amplitude contained in [a, b] then V(E) is an Artin (b+1)-stack. Finally, if E is perfect and of positive amplitude then the morphism V(E) −→ F is smooth (see [To-Va]).
π 0 (M ap St(k)/F (F ′ , V(E))) ≃ Ext 0 (f * (E), O F ′ ), for any f : F ′ −→ F in St(k)/F ,
3. The stack of abelian categories: (see [An]) For any k ′ ∈ k − CAlg we consider k ′ − Ab the category whose objects are abelian k ′ -linear categories A which are equivalent to B − M od, for some associative k ′ -algebra B which is projective and of finite type as a module over k ′ . The morphisms in k ′ − Ab are taken to be the k ′ -linear equivalences. For a morphism k ′ → k ′′ in k − CAlg, there exists a base change functor
k ′ − Ab −→ k ′′ − Ab
sending a category A to the category of k ′′ -modules in A. This defines a presheaf of categories on k − Af f , and passing to the nerve provides a simplicial presheaf
Ab : k − CAlg −→ SSet k ′ → Ab(k ′ ) := N (k ′ − Ab).
The homotopy groups of the simplicial set Ab(k ′ ) can been described explicitely in the following way. The set π 0 (Ab(k ′ )) is the set of equivalences classes of abelian k ′ -linear categories in k ′ −Ab. For a given A ∈ Ab(k ′ ), the group π 1 (Ab(k ′ ), A) is naturally isomorphic to the group of isomorphisms classes of autoequivalences of A. The group π 2 (Ab(k ′ ), A) is the group of invertible elements in the center of A (i.e. the automorphism group of the identity functor of A). Finally, for any i > 2 we have π i (Ab(k ′ ), A) = 0.

The object Ab is considered as a simplicial presheaf over k − Af f , and thus as a stack Ab ∈ St(k). The simplicial presheaf itself is not a stack, and thus the natural morphism
Ab(k ′ ) −→ M ap St(k) (Spec k ′ , Ab)
is not an equivalence in general. This is due to the fact that there exist non trivial twisted form of abelian categories for the etale topology. The object Ab ∈ St(k) should therefore be truly considered as the associated stack to the simplicial presheaf described above.

It has been proved by M. Anel that Ab is an Artin 2-stack locally of finite presentation over Spec k (see [An]). Moreover, for an abelian k-linear category A, considered as a global point A ∈ Ab(k), then the tangent space of Ab at A is given by
T A Ab ≃ HH(A)[2] ≤0 ,
where HH(A) is the complex of Hochschild cohomology of A. Therefore, the Artin 2-stack Ab is a global geometric counter part of the formal moduli of abelian categories studied in [Lo-VdB1, Lo-VdB2].

4. The stack of perfect complexes: For any k ′ ∈ k − CAlg, we consider P arf (k ′ ) the category of flat perfect complexes of k ′ -modules and quasi-isomorphisms between them. As we restricted to flat complexes for any morphism k ′ → k ′′ there exists a well defined base change functor
− ⊗ k ′ k ′′ : P arf (k ′ ) −→ P arf (k ′′ ).
Passing to the nerve we get a simplicial presheaf
Parf : k − CAlg −→ SSet k ′ → N (P arf (k ′ )),
that we consider as an object in St(k). Using the techniques of left Quillen presheaves presented at the end of §2.3, it is possible to prove that the above simplicial presheaf is already a stack, and therefore that Parf (k ′ ) is equivalent to M ap(Spec k ′ , Parf ), and is a classifying space for perfect complexes of k ′ -modules. The set π 0 (Parf (k ′ )) is in natural bijection with the set of isomorphisms classes of D parf (k ′ ), the perfect derived category of k ′ . For a given perfect complex E ∈ Parf (k ′ ), the group π 1 (Parf (k ′ ), E) is naturally isomorphic to the automorphism group of the object E ∈ D parf (k ′ ). Moreover, the higher homotopy group π i (Parf (k ′ ), E) can be identified with Ext 1−i (E, E) for any i > 1. This provides a rather complete understanding of the stack Parf .

The stack Parf is not truncated as it classifies perfect complexes of abitrary amplitude, and thus can not be an Artin n-stack for any n. However, it can be written as a union of substacks Parf [a,b] of complexes of amplitude contained in [a, b]. It is a theorem that the stacks Parf [a,b] are Artin n-stacks for n = (b − a + 1) and locally of finite presentation over Spec k (see [To-Va] 
T E Parf ≃ REnd(E, E)[1] ≤0 .
The stack Parf can be generalized in the following way. Let B be an associative and unital dg-algebra over k. We assume that B is saturated, i.e. that it is perfect as complex of k-modules, but also as a bi-dg-module over itself. Then, for any k ′ ∈ k − CAlg we define Parf B (k ′ ) to be the nerve of the category of quasi-isomorphisms between perfect B ⊗ L k k ′ -dgmodules (see [To-Va]). This defines a stack Parf B ∈ St(k). As above, the set π 0 (Parf B (k ′ )) is in natural bijection with the set of isomorphisms classes of D parf (B ⊗ L k k ′ ), the perfect derived category of B ⊗ L k k ′ . For a given E ∈ Parf B (k ′ ), the group π 1 (Parf B (k ′ ), E) is naturally isomorphic to the automorphism group of the object E ∈ D parf (B ⊗ L k k ′ ). The higher homotopy groups π i (Parf (k ′ ), E) can be identified with Ext 1−i (E, E) for any i > 1, where the Ext-groups are computed in the triangulatd category D parf (B ⊗ L k k ′ ). It is useful to note that the stack Parf B only depends on the dg-category T of perfect B-dg-modules (i.e. is invariant under derived Morita equivalences). Therefore if T is a dg-category equivalent to the dg-category of perfect B-dg-modules for a saturated dg-algebra B we will simply write Parf T instead of Parf B . Using the notations of [To-Va], Parf T is the truncation of the derived stack M T .

The stack Parf B can be proved to be locally geometric (see [To-Va]). An important consequence of this theorem is the existence of a locally geometric stack of perfect complexes on a smooth and proper scheme X over k. Indeed, the derived category D qcoh (X) is known to have a compact generator E (see [Bo-VdB]). Therefore, if we set B := REnd(E), B is a saturared dg-algebra such that D parf (X) ≃ D parf (B), and thus Parf B can be identified with Parf (X) the moduli stack of perfect complexes on X. An important corollary of the geometricity of Parf B is thus the geometricity of Parf (X).

As a remark, the maximal sub-1-stack Parf (X) 1−rig ⊂ Parf (X), consisting of perfect complexes on X with non negative Ext-groups between themselves, is easily seen to be an open substack. The stack Parf (X) 1−rig is therefore an Artin 1-stack. The stack Parf (X) 1−rig has previously been shown to be an Artin 1-stack by M. Leiblich in [Lie].


## 5.

Mapping stacks: The Segal category of stacks St(k) possesses internal Homs: for any two objects F and G in St(k), the morphism
St(k) −→ T op H → M ap(H × F, G)
is representable by an object Map(F, G) ∈ St(k).

For a smooth and proper scheme X, and an Artin n-stack F locally of finite presentation, it can be proved that the stack Map(X, F ) is again an Artin n-stack locally of finite presentation. The proof of this general fact follows from a generalization of Artin's representability criterion to higher stacks which can be found in [Lu1]. In some cases (i.e. for some particular choices of X and/or F ), it can be proved directly that Map(X, F ) is an Artin n-stack. This is for instance the case when F = Parf [a,b] as we mentioned in the last example. Also, when X is finite over Spec k, the geometricity of Map(X, F ) can be proved by an explicit construction of an atlas.

A much easier situation is for K a finite simplicial set (weakly equivalent to a finite simplicial set is enough), considered as a constant simplicial presheaf over k−Af f and thus as an object in St(k). For any Artin n-stack F the stack Map(K, F ) can be written as a finite limit of the stack F itself, and thus is again an Artin n-stack. When K represents the homotopy type of a compact CW complex X, then Map(K, F ) should be understood as the stack of non-abelian cohomology of X with coefficients in F . The fact that Map(K, F ) is an Artin n-stack when F is so is in some sense a generalization of the fact that the 1-stack of local systems of X is an Artin 1-stack.

6. The stack of saturated dg-categories: Recall from [To-Va] and from the point 4 above the notion of a saturated dg-category over the ring k. They are the dg-categories quasiequivalent to the dg-category of perfect B-dg-module for an associative dg-algebra B which is perfect as a complex of k-module and as (B ⊗ L k B op )-dg-module. For k ′ ∈ k − CAlg we consider dgCat k ′ the category of small dg-categories over k ′ . There exists a model category structure on dgCat k ′ whose equivalences are the quasi-equivalences (see [Tab]). We consider dgCat cof k ′ the subcategory of dgCat k ′ consisting of cofibrant objects. We set dgCat sat (k ′ ) to be the nerve of the category of quasi-equivalences between saturated dg-categories over k ′ . This defines a simplicial presheaf over k − Af f and thus an object dgCat sat ∈ St(k).

Question 3.1 Is the stack dgCat sat locally geometric ?

I believe that the answer to this question is positive. For an integer n > 0, we define a substack dgCat sat,n ⊂ dgCat sat of dg-categories T such that HH i (T ) = 0 for all i ≤ −n (here HH(T ) denotes the Hochschild cohomology of the dg-category T ). It follows from the results of [To2] that the substack dgCat sat,n is an (n + 2)-stack. Moreover, as for a given saturated dg-category T the Hochschild complex HH(T ) is perfect, we clearly have that dgCat sat is the union of dgCat sat,n . To answer positively the above question it is then enough to show that dgCat sat,n is an Artin (n + 2)-stack. This can be approached for example by a direct application of the Artin's representability criterion, or even better by its extension by J. Lurie to the derived case (see [Lu1]). As expected, the tangent complex should be given by
T T dgCat sat ≃ HH(T )[2] ≤0 .

## Some developments

1. Some representability statements: Recall from the example (4) of §3.2 that for any saturated dg-category T of the form P arf (B) for a saturated dg-algebra B, there exists a locally geometric stack Parf B classifying perfect B-dg-modules (or equivalently objects in T ). As the stack Parf B only depends on T and not on B itself we will denote it by Parf T .

As a first consequence of the geometricity of Parf T , if k is a field then the group aut(T ) of self-equivalences of T up to homotopy (aut(T ) is really a sheaf of groups) can be seen to be representable by an algebraic group scheme locally of finite type over k. Moreover, it can be shown that this group only has a countable number of connected components and thus can be written as an extension
1 / / aut(T ) e / / aut(T ) / / Γ / / 1
where Γ is a countable discrete group and aut(T ) e is a connected algebraic group of finite type over k (see [To-Va]).

Another interesting consequence is the existence of an algebraic space of simple objects in T . For this, we consider the open substack Parf simp We now suppose that k = C. When T is the dg-category of perfect complexes on a smooth and proper variety X, the algebraic space M simp T contains X as a closed and open subalgebraic space. Indeed, an embedding X ֒→ M simp T consists of sending a point x ∈ X to the class of the skyscraper sheaf k(x). Assume now that T is a dg-model for the Fukaya category of a Calabi-Yau variety X. It is expected that T is saturated, and thus the algebraic space M simp T is expected to exist. If a mirror X ′ of X exists, then by what we have just seen X ′ is a sup-space of M simp T . Therefore, it might be tempting to try to construct X ′ has a well chosen sub-space of M simp T . In order to be able to say exactly which sub-space X ′ is it is needed to have a reasonable stability condition on T , and to try to define X ′ as the sub-space of M simp T classifying stable simple objects E in T such that Ext * (E, E) ≃ Sym(Ext 1 (E, E)[−1]). This approach suggests that the construction of the mirror only depends on a good understanding of the Fukaya category of X (i.e. showing that it is saturated and constructing a meaningful stability structure on it).
T ⊂ Parf T consisting of objects E in T such that Ext i (E, E) = 0 ∀ i < 0 Ext 0 (E, E) = k,

## Motivic invariants:

We will say that an Artin stack F is special if it is strongly of finite presentation and if for any field K and any point x : Spec K −→ F the sheaf π i (F, x) is represented by an affine group scheme which is unipotent when i > 1. The class of special Artin stacks already contains several interesting examples, and they seem to be the reasonable coefficients for non-abelian Hodge cohomology (see [S1]).

We define an abelian group K(CH sp (k)) by taking the quotient of the free abelian group over equivalence classes of special Artin stacks by the following three relations: (c) LetF 0 be stack which is either an affine scheme, or K(G a , n) for some n > 0. Let f : F −→ F ′ be a morphism between Artin special stacks such that for any morphism X −→ F ′ with X an affine scheme, there exists a Zariski open covering U −→ X such that F × F U is equivalent as a stack over U to F 0 × U −→ U (we say that f is a Zariski locally trivial F 0 -fibration).
(a) [F F ′ ] = [F ] + [F ′ ] (b) Let f : F −→ F ′ beThen [F ] = [F ′ × F 0 ].
The group K(CH sp (k)) is made into a ring by setting
[F ].[F ′ ] := [F × F ′ ].
The ring K(CH sp (k)) is called the Grothendieck ring of special Artin stacks. It receives a natural morphism from the Grothendieck ring of varieties K(V(k)) −→ K(CH sp (k)). Here we define K(V(k)) to be the quotient of the free abelian group over isomorphism classes of schemes of finite type over Spec k by the following two relations:
(a) [X Y ] = [X] + [Y ]
(b) Let f : X −→ Y be a morphism between special Artin stacks, such that for any algebraically closed field K the induced morphism X(K) −→ Y (K) is an equivalence.


## Then we have [X] = [Y ].

This definition of the Grothendieck ring K(V(k)) only differs from the usual one in non-zero characteristic. In general our group K(V(k)) is the quotient of the usual Grothendieck group obtained by also inverting the purely inseparable morphisms.

It can be proved, that if L = [A 1 ] then the natural inclusion morphism
K(V(k))[L −1 , {(L i − 1) −1 } i>0 ] −→ K(CH sp (k))[L −1 , {(L i − 1) −1 } i>0 ]
is an isomorphism (see [To3]). As a consequence we obtain that any additive invariant for schemes (i.e. an invariant factorizing through the ring K(V(k))) extends uniquely as an additive invariant of special Artin stacks). It is possible this way to define the motivic Euler characteristic χ mot (F ) of any special Artin stack as a class in the Grothendieck ring of motives (suitably localized). Taking the Hodge realization we obtain a definition of the Hodge numbers for any special Artin stack. Taking the l-adic realization we obtain a version of the trace formula expression the number of rational point of special Artin stacks over finite field in termes of the trace of the Frobenius acting on some complex of l-adic cohomology with compact supports.

As an example, for any compact CW complex X, represented by a finite simplicial set K, and for any special Artin stack F , the stack Map(K, F ) is again a special Artin stack. The Hogde numbers of Map(K, F ) provide interesting homotopy invariants of X, mesuring in some sense the size of the space of non-abelian cohomology of X with coefficients in F .


## 3.

Hall algebras for dg-categories: We let F be a stack and we assume that it is locally special in the sense that it is the union of its open special Artin sub-stacks. We define a relative Grothendieck ring K(CH sp (F )) by taking the free abelian group over equivalence classes of morphisms F ′ −→ F with F ′ a special Artin stack, and imposing the same three relations. The fiber product over F makes K(CH sp (F )) into a commutative ring (without unit unless F itself special and not only locally special).

For any morphism f : F −→ G between locally special stacks there exists a natural pushforward f ! : K(CH sp (F )) −→ K(CH sp (G)), obtained by sending F ′ −→ F to the composite with f , which is a morphism of abelian groups. When f is strongly of finite type, then there also exists a pull-back
f * : K(CH sp (G)) −→ K(CH sp (F )), sending F ′ −→ G to F ′ × G F −→ F ,
which is a morphism of rings. The functorialities f ! and f * satisfy the base change formula when this makes sense.

Let T be a saturated dg-category and Parf T the stack of objects in T as presented in example (4) of §3.2. The stack Parf T is locally special, and thus we can consider its Grothendieck group K(CH sp (Parf T )). We will use the notation H abs (T ) := K(CH sp (Parf T )).

We also consider the dg-category T (1) of morphisms in T , which is again a saturated dgcategory (see [To-Va]). There exists a diagram of stacks
Parf T (1) c / / π Parf T Parf T × Parf T .
The morphism c sends a morphism x → y in T to the object y. The morphism π sends a morphism x → y to the pair (x, y/x), where y/x is the cone of the morphism. The morphism π can be seen to be strongly of finite type and thus we obtain a natural morphism
K(CH sp (Parf T × Parf T )) c ! •π * / / K(CH sp (Parf T )) ,
and therefore a multiplication µ : H abs (T ) ⊗ H abs (T ) −→ H abs (T ).

It can be checked that this multiplication makes H abs (T ) into an associative and unital algebra (by the same argument as in [To4]). The algebra H abs (T ) is called the absolute Hall algebra of T .

The algebra H abs (T ) is a two-fold generalization of the usual Hall algebra studied in the context of representation theory (see e.g. [De-Xi]). First of all it is defined for dg-categories instead of abelian categories, and moreover the base ring k needs not to be a finite field anymore. But it is also defined by geometric methods and is in some sense a universal object mapping to several possible incarnations by means of realization functors. As an example, if k = F q is a finite field, then there exists a morphism of algebras (surjective up to torsion)
H abs (T ) −→ DH(T ),
where DH(T ) is the derived Hall algebra defined in [To4]. This morphism simply sends an object p : F ′ −→ Parf T to the function on Parf T (F q ) which counts the number of rational points in the fiber of p. When T is a dg-model for the bounded derived category of an abelian category A, then DH(T ) contains a copy of the usual Hall algebra of A. This explains how H abs (T ) is a geometric counter-part of DH(T ), and thus how it generalizes usual Hall algebras. An important advantage of H abs (T ) compare to DH(T ) is that it is defined over Z.

It is expected that a suitable generalization of the construction T → H abs (T ) to the case of 2-periodic dg-categories (i.e. dg-categories for which the translation functor x → x[2] comes equiped with an equivalence with the identity) would give a direct construction of quantum enveloppping algebras, generalizing the fact that Hall algebras can be used to reconstruct the positive nilpotent part of quantum envopping algebras (see To4] for more on the subject).

4. The Riemann-Hilbert correspondence: Let X be a smooth and projective complex variety. We associate to it two stacks X B and X DR in St(C) as follows. The stack X B is the constant stack with values Sing(X(C)), the simplicial sets of singular simplicies of the topological space of complex points of X. The stack X DR is defined by its functor of points by X DR (A) := X(A red ) for any A ∈ C − CAlg. We assume that F is a special Artin stack (as defined above in point (2)) which is connected (i.e. the sheaf π 0 (F ) is isomorphic to * ). By example (5) of §3.2 we know that the stack Map(X B , F ) is an Artin stack strongly of finite type. It can also be proved that the stack Map(X DR , F ) is an Artin stack strongly of finite type (e.g. by using a Postnikov decomposition of F ). A version of the Riemann-Hilbert correspondence states that there exists a natural equivalence of analytic stacks (see [S1])
φ : Map(X B , F ) an ≃ Map(X DR , F ) an .
This equivalence is the starting point of a theory of higher non-abelian Hodge structures: the stack Map(X DR , F ) is considered as the de Rham non-abelian cohomology of X with coefficients in F , and the morphism φ as some kind of integral structure on it (at least when F is defined over Z). It is then possible to say what are the Hodge and weight filtrations on Map(X DR , F ), and to state a definition of a non-abelian mixted Hodge structure (see [Ka-Pa-Si]).

5. Schematic homotopy types: Let us assume that k is now a field. We let CH sp (k) ⊂ St(k) be the full sub-Segal category consisting of special Artin stacks (as defined in point (2)). For any connected simplicial set K, we consider the functor between Segal categories CH sp (k) −→ T op sending F to M ap(K, F ). This morphism is not corepresentable by a special Artin stack in general, but it can be proved to be corepresentable by an object (K ⊗ k) sch ∈ St(k) which is local with respect to the set of objects CH sp (k). In other words, there exists a morphism of stacks u : K −→ (K ⊗ k) sch satisfying the following two conditions:

(a) For any F ∈ CH sp (k), the induced morphism
u * : M ap((K ⊗ k) sch , F ) −→ M ap(K, F )
is an equivalence.

(b) If f : G −→ G ′ is a morphism of stacks such that for any F ∈ CH sp (k), the induced morphism
f * : M ap(G ′ , F ) −→ M ap(G, F )
is an equivalence, then the induced morphism
f * : M ap(G ′ , (K ⊗ k) sch ) −→ M ap(G, (K ⊗ k) sch )
is also an equivalence.

The existence of such a morphism K −→ (K ⊗ k) sch can easily be deduced from the results of [To5], and the two above properties characterizes (K ⊗ k) sch uniquely as a stack under K. The stack (K ⊗ k) sch is called the schematization of K over Spec k, and is somehow an envelope of K with respect to the objects of CH sp (k).

The stack (K ⊗ k) sch can be proved to satisfy the following properties.

(a) We have π 0 ((K ⊗ k) sch ) = * , and for any point x ∈ K, the sheaf π i ((K ⊗ k) sch , x) is representable by an affine group scheme which is unipotent for i > 1. Therefore, thought (K ⊗ k) sch is not an Artin stack (its diagonal is not locally of finite type in general), it is rather close to be a special Artin stack. In fact it can be shown that (K ⊗ k) sch is a limit of special Artin stacks, and in some sense it can be considered as a pro-object in CH sp (k).

(b) The affine group scheme π 1 ((K ⊗ k) sch , x) is isomorphic to the pro-algebraic completion of the discrete group π 1 (K, x) over the field k. Moreover, for a finite dimension linear representation V of π 1 ((K ⊗ k) sch , x), corresponding to a local system L of k-vector spaces on K, we have
H * ((K ⊗ k) sch , V ) ≃ H * (K, L).
(c) When K is simply connected and finite (i.e. each K n is finite), then there are isomorphisms
π i ((K ⊗ k) sch ) ≃ π i (K) ⊗ G a if char(k) = 0 π i ((K ⊗ k) sch ) ≃ π i (K) ⊗ Z p if char(k) = p > 0.
This shows that in this case (K ⊗ k) sch is a model for the rational homotopy type when k = Q and for the p-adic homotopy type when k = F p .

In [To5] the construction K → (K ⊗ k) sch has been proposed as a solution to the schematization problem stated in [Gr]. In [Ka-Pa-To] the schematization construction over C has been used in order to give an alternative to non-abelian Hodge theory. More precisely, for a smooth and projective complex manifold X, we take K to be the simplicial set of singular simplicies of the underlying topological space X top of X. The schematization of K is simply denoted by (X top ⊗ C) sch = (K ⊗ C) sch . The main theorem of [Ka-Pa-To] states that there exists an action of the discrete group C * on the stack (X top ⊗ C) sch , called the Hodge filtration. This action can be used to recover all previously known constructions of the Hodge filtration on cohomology, fundamental group and rational homotopy groups. It is also possible to prove a purity condition for this action, that have rather strong consequences on the stack (X top ⊗ C) sch and thus on the homotopy type of X top . New examples of homotopy types which are not realizable by smooth projective varieties can be constructed that way. I should also mention [Ol1,Ol2] in which a crystalline and a p-adic analog of the constructions above have been studied.

6. The period map to the moduli of dg-categories: Let Var smp be the stack of smooth and proper schemes over Spec k. It is a 1-stack and thus an object in St(k). The construction sending a smooth and proper scheme X to the dg-category L parf (X) of perfect complexes on X induces a morphism of stacks
φ : Var smp −→ dgCat sat .
This morphisms factors through the maximal sub-2-stack dgCat sat,0 and thus provides a morphism φ : Var smp −→ dgCat sat,0 .

When k is a field of characteristic zero, the tangent of the stack dgCat sat,0 at the point φ(X) can be identified with Hochschild cohomology of X shifted by 2, and thus we have
T φ(X) dgCat sat,0 ≃ p,q H p (X, ∧ q T X )[2 − p − q].
The map induced on the zero-th cohomology of the tangent spaces by φ is the natural embedding
H 1 (X, T X ) −→ H 0 (X, ∧ 2 T X ) ⊕ H 1 (X, T X ) ⊕ H 2 (X, O X ).
This suggests that the morphism φ is somehow unramified, and thus is a local immersion at least locally on Var smp where Var smp is an Artin 1-stack. In particular we should get that the fibers of φ are discrete (this is not really true because of stacky phenomenon, but anyway). I think this is a possible geometric approach to a conjecture (attributed to J. Kawamata) stating that given a given triangulated category T there exists a most finitely many smooth and projective varieties having T as perfect derived category.


# Derived stacks

The main references for derived stacks are [To-Ve3, HAGII, Lu1].


## Why derived stacks ?

We suppose that we are given a moduli functor
F : k − Af f op −→ SSet,
which is represented by a scheme X, or even an Artin n-stack also denoted by X. The classical problem of obstruction theory can be stated as follows: given any surjective morphism A −→ A 0 in k − CAlg, with kernel I such that I 2 = 0, study the fibers of the induced morphism
F (A) −→ F (A 0 ).
When F is given by a concrete moduli problem, there exists a complex L ∈ D(A 0 ), which is somehow "natural" (in the psycological sense of the word), and for any point x ∈ F (A 0 ) a class e ∈ Ext 1 (L, I), such that the fiber at x is non-empty if and only if e = 0. The first observation is that the complex L is by no means unique. In fact, there are situations for which there exist different possible choices for L, all of them being "natural" in some sense. Once again, they are natural only in the psyclolgical sense of the word and are definitely not natural in any mathematical sense, unless there will not be any choices. For instance, a morphism between moduli functors might not induce morphisms on the corresponding complexes. Moreover, forgetting the moduli functor F and only keeping the scheme, or Artin stack, X, there also exists the cotangent complex of X at the point x, L X,x ∈ D(A 0 ), and a natural obstruction class e ∈ Ext 1 (L X,x , I), such that the fiber at x is non-empty if and only if e = 0. A striking remark is that in practice, when F is a concrete moduli problem, then the two objects L and L X,x are in general not the same. Even more striking is the fact that for a concrete moduli problem F the complex L X,x is in general very hard (if not impossible) to compute in terms of F , whereas L has very concrete geometrical description.

Here is a typical example: let S be a smooth and proper scheme over k, and F = Vect(S) be the 1-stack of vector bundles on S, which is an Artin 1-stack. For a point x : X 0 := Spec A 0 −→ Vect(S), corresponding to a vector bundle E on S ×X 0 , the natural candidate for L is the complex REnd(E, E) ∨ [−1] ∈ D(A 0 ). However, REnd(E, E) ∨ [−1] being perfect and not of amplitude contained in [−1, ∞[ in general, it can not be the cotangent complex of any Artin stack locally of finite presentation. Moreover, the cotangent complex of the stack Vect(S) at the point x is not known. This example is not a pathology, and reflects the general situation.

What this example, and many other examples, shows is that in general the right complex to consider to understand osbtruction theory is L, not L X,x , but also that L is not the cotangent complex of any Artin stack (locally of finite presentation). One purpose of the notion of derived Artin stack is precisely to provide a new geometric context in which the complex L is truly the cotangent complex of some geometric object. In this new context, L being the cotangent complex of some geometric object will be natural, now in the mathematical sense of the word, and thus obstruction theory will become unambiguous.

Principle 3: Derived algebraic geometry is a generalization of algebraic geometry for which obstruction theory becomes natural.

Of course the price to pay is that the correct moduli space associated to F can not be a scheme or an Artin stack anymore, and other kind of geometrical objects are needed, called derived Artin stacks. In order to guess what these are I would like to come back to our example of a moduli functor F and to the infinitesimal lifting problem.

The problem is to understand the obstruction class e ∈ Ext 1 (L, I) from a geometric point of view. For this, recall that for any does not make sense in rings anymore, but can be defined as a commutative dg-algebra, or better as a simplicial commutative algebra with π 0 (A 0 ⊕ I[1]) = A 0 , π 1 (A 0 ⊕ I[1]) = I and π i (A 0 ⊕ I[1]) = 0 for i > 1. Therefore we already see that the obstruction space Ext 1 (L, I) will have a functorial description in terms of F as soon as F is extended from commutative rings to simplicial commutative rings. Moreover, there exists a homotopy pull back diagram of simplicial rings
A / / A 0 A 0 / / A 0 ⊕ I[1],
suggesting that when F is reasonable there exists a pull back diagram
F (A) / / F (A 0 ) F (A 0 ) / / F (A 0 ⊕ I[1]). sk − CAlg derived stacks / / SSet. Π1 O O
In this picture, sk −CAlg is the category of simplicial objects in k −CAlg, j is the natural inclusion functor seeing a k-algebra as a constant simplicial object, π 0 is the functor sending a groupoid to its set of isomorphism classes and Π 1 sends a simplicial set to its fundamental groupoid. An important new feature in the theory of derived stacks is that the category sk − CAlg of commutative simplicial k-algebras has a natural model category structure, and naturally the weak equivalences have to be "inverted" or "localized". Therefore, derived stacks should truly be morphisms of Segal categories L(sk − CAlg) −→ T op, and are not modeled by simplicial presheaves on some Grothendieck site anymore. We will see however that the Segal category L(sk − CAlg) has a natural extension of the usual ffqc topology, and that derived stacks can then be viewed as stacks on the Segal site (L(sk − CAlg), f f qc).


## Basic notions

We start with the category sk − CAlg of simplicial commutative k-algebras. There is a natural notion of weak equivalences between objects in sk − CAlg, defined as the morphisms inducing weak equivalences on the underlying simplicial sets (by forgetting the ring structure). The Segal category L(sk − CAlg) op , obtained by localizing the equivalences in sk − CAlg op is defined to be the Segal category of derived affine schemes and is denoted by
dk − Af f := L(sk − CAlg) op .
As there exists a simplicial model category structure on sk − CAlg, for which the equivalences and fibrations are defined on the underlying simplicial sets, the Segal category dk − Af f can be concretely described as Int(sk − CAlg) op (see point (8)  Using the dictionnary between model categories and Segal categories (see point (8) of §2.2) the Segal category dk − Af f can be described by the homotopy theory of equivalence preserving functors sk − CAlg −→ SSet. More precisely, we can define a model category M , by first considering the model category of functors SSet sk−CAlg endowed with the levelwise projective model structure, and then define M as the left Bousfield localization of SSet sk−CAlg along the equivalences in sk − CAlg (see [HAGI] for details). We then have a natural equivalence between dk − Af f and Int(M ). The next step is to endow dk − Af f with a topology. It can be shown that the natural notion of a Grothendieck topology on a Segal category A is nothing else than a Grothendieck topology on its homotopy category Ho(A) (see [HAGI, for a justification). For this we wil need the following important definitions. The fact that these definitions are reasonable extensions of the usual notions is explained in [HAGII,§2.2.2].
Definition 4.1 A morphism f : A −→ B in sk − CAlg is flat (resp. smooth, resp. etale, resp. a
Zariski open immersion) if it satisfies the following two conditions:

1. The induced morphism of affine scheme Spec π 0 (B) −→ Spec π 0 (A) is flat (resp. smooth, resp, etale, resp. a Zariski open immersion).

2. For any i > 0, the natural morphism
π i (A) ⊗ π0(A) π 0 (B) −→ π i (B)
is an isomorphism.

A finite family of morphisms {f i : A −→ B i } in sk − CAlg is a ffqc covering, if each f i is flat and if the induced morphism of affine schemes
Spec π 0 (B i ) −→ Spec π 0 (A)
is surjective.

We now define a Grothendieck topology on Ho(dk − Af f ) = Ho(sk − CAlg) op by defining a sieve to be a covering sieve if it contains a ffqc covering in the sense of the definition above. It can be checked that this defines a topology on Ho(dk − Af f ) and thus by definition a topology on the Segal category dk − Af f . The ffqc topology on dk − Af f induces a notion of hypercoverings in dk − Af f , and the Segal category of stacks over dk − Af f can then be defined in the following way.

Definition 4.2 The Segal category of derived stacks (also called D − -stacks) is the full sub-Segal category of dk − Af f consisting of morphisms
F : dk − Af f op −→ T op
such that for any ffqc hypercovering U * −→ X in dk − Af f , the induced morphism
F (X) −→ Lim n∈∆ F (U n )
is an equivalence in T op 5 . It is denoted by dSt(k).

Like in the case of Segal categories of stacks over a Grothendieck site (see §2.3), the Segal category dSt(k) can be characterized by a universal property. Also, using the dictionnary between Segal categories and model categories (see point (8)  2. For any coaugmented co-simplicial object A −→ B * in sk − CAlg, which correspond to a ffqc hypercovering in dk − Af f , the induced morphism
F (A) −→ Holim n∈∆ F (B n )
is an equivalence of simplicial sets.


## For any finite family of objects
{A i } in sk − CAlg, the natural morphism F ( A i ) −→ F (A i )
is an equivalence of simplicial sets.

The homotopy theory of these functors can be described by a natural model category, called the model category of derived stacks and which is denoted by D − k − Af f ∼,f f qc in [HAGII,§2.2].

To construct derived stacks we will often construct explicit objects in D − k − Af f ∼,f f qc and then consider them as objects in dSt(k) through the equivalence
dSt(k) ≃ L(D − k − Af f ∼,f f qc ).
The natural inclusion morphism dSt(k) ֒→ dk − Af f has an exact left adjoint a : dk − Af f −→ dSt(k), called the associated derived stacks functor. The exactness of a implies that dSt(k) does have the same exactness properties as the Segal category T op and that it is a Segal topos (see ). As a consequence it possesses all small limits and colimits, and has internal Homs.

Moreover, the ffqc topology can be seen to be subcanonical, and thus the Yoneda embedding provides a fully faithful functor dk − Af f ≃ L(sk − CAlg) op ֒→ dSt(k). 5 We make here the same abuse of notations as at the beginning of §2.3

On the level of simplicial commutative k-algebras this functor will be denoted by
RSpec : L(sk − CAlg) op ֒→ dSt(k).
For any A ∈ sk − CAlg, the derived stack RSpec A is explicitly given by
RSpec A : sk − CAlg −→ SSet B → M ap sk−CAlg (A, B).
The natural embedding i : k − CAlg ֒→ sk − CAlg, sending a commutative k-algebra to the associated constant simplicial object, induces a morphism on Segal categories of stacks
t 0 := j * : dSt(k) −→ St(k)
called the truncation functor (it is not the same as the truncation t ≤0 defined from (underived) stacks to sheaves and discussed in §2.3). This functor has a left adjoint
i := j ! : St(k) −→ dSt(k)
which can be shown to be fully faithful. In particular, any stack can be seen as a derived stack. However, the functor i is not compatible with finite limits, and therefore certain construction (such as fiber products or internal Homs) will not preserve stacks inside the Segal category of derived stacks. Because of this it is important to keep the notation i(F ), when a stack F is considered as a derived stack.
Definition 4.3 Let F be a stack. A derived enhancement of F is a derived stack F together with an equivalence t 0 F ≃ F .
Of course, a given stack F has many different derived enhancement, including the trivial one i(F ).

Using the notion of smooth morphism defined in def. 4.2, the notion of n-geometric stack can be naturally extended to the notion of n-geometric derived stack. As this is a formal generalization we will not give the precise definition here (the reader can consult [HAGII] for more details on the general notion of n-geometric stacks in various contexts). The two functors i and t 0 above are compatible with the geometricity notions in the sense that i sends n-geometric stacks to ngeometric derived stacks, and t 0 sends n-geometric derived stacks to n-geometric stacks. Moreover, a stack F is n-geometric if and only if i(F ) is an n-geometric derived stack. Finally, i and t 0 are also compatible with the notions of flat morphisms, smooth morphisms, etale morphisms and open Zariski morphisms.

Definition 4.4 A derived stack is a derived Artin n-stack if it is an m-geometric derived stack for some m, and if t 0 (F ) is an (Artin) n-stack. A derived Artin stack is an Artin n-stack for some n.

Here is a sample of basic notions and results concerning derived Artin stacks.

1. Properties of morphisms and presentations by groupoids: Both points (1) and (2) of the general properties stated in §3.1 generalize immediatly to the case of derived Artin stacks. Only two remarks have to be made concerning unramified morphisms and closed immersions. First of all, the notion of formally unramified morphisms in the context of derived Artin stacks is equivalent to the notion of formally etale morphism (see [HAGII,Prop. 2.2.2.9]). Also, the closed immersions of derived Artin stacks are not monomorphisms. In fact, a monomorphism of derived Artin stacks is automatically formally unramified and thus formally etale, which explains why it would not be reasonable that closed immersions be monomorphisms. As a consequence the notion of closed sub-stack does not make very much sense in the derived setting.

2. Truncation: For any derived Artin stack F , the adjonction morphim it 0 F −→ F is a closed immersion. If fact, if F is locally of the form RSpec A, for some A ∈ sk − CAlg, then it 0 is locally of the form i(Spec π 0 (A)). Therefore, any derived Artin stack F can be thought of as some kind of derived thickening of its truncation it 0 (F ). This derived thickening truly behaves as a formal thickening, and for instance the small etale sites of F and it 0 (F ) coincide (see [HAGII,Cor. 2.2.2.13]). According to definition 4.3, a derived enhancement of a stack can then be thought of as the data of a formal derived thickening.

3. Derived schemes and Deligne-Mumford stacks: A derived Artin stack F is a derived scheme (resp. a a derived Deligne-Mumford stack ) if there exists a smooth atlas U −→ F which is a Zariski open immersion (resp. etale). It can be shown that if F is a derived Artin stack then F is a derived scheme (resp. a derived Deligne-Mumford stack) if and only if its truncation t 0 is a scheme (resp. a Deligne-Mumford stack) in the non derived sense.


## Derived categories of O-modules:

Like We also have a sub-Segal category L qcoh (F ) ⊂ L(F, O F ) of quasi-coherent complexes, which can be described in the following way. We write F as the colimit of affine derived schemes F ≃ ColimX i , where X i = RSpec A i . For any i, we can consider the commutative dgalgebra N (A i ) obtained by normalizing A i , and thus its unbounded Segal category of modules L(N (A i ) − M od). One possible definition is
L qcoh (F ) = Holim i L(N (A i ) − M od),
where this homotopy limit is taken in the model category of Segal categories (see [To-Va] where this is done using dg-categories). Like in the underived situation, any morphism f : F −→ F ′ induces an adjunction
f * : L qcoh (F ′ ) −→ L qcoh (F, O F ) L qcoh (F ′ ) ←− L qcoh (F, O F ) : f qcoh *
, but again f qcoh * is not the functor induced by the direct image on the level of all complexes of O-modules.

When F is a derived Artin stack then the Segal category L qcoh (F ) has a natural t-structure. By definition, an object E ∈ L qcoh (F ) is of non positive amplitude if for any flat morphism u : X = RSpec A −→ F with A ∈ sk − CAlg, the corresponding object u * (E) ∈ L qcoh (X) ≃ L(N (A)−M od) is cohomolgically concentrated in non positive degrees (as a complex over k). The heart of this t-structure is denoted by QCoh(F ) is called the category of quasi-coherent sheaves over F . The natural morphism it 0 (F ) −→ F induces by direct images an equivalence QCoh(F ) ≃ QCoh(t 0 (F )).

In particular we see that the two Segal categories L qcoh (F ) and L qcoh (t 0 F ) are both endowed with a t-structure and have the same heart, but are different in general. In this way, the derived enhancement F of t 0 F can also be considered as a modification of the derived category D qcoh (t 0 F ), keeping the heart unchanged.

Let us assume that we have a pull-back square of derived Artin stacks
F ′ q / / v G ′ u F ′ p / / G.
Then there exists a base change natural transformation
α : u * • p qcoh * ⇒ q qcoh * • v * .
The natural transformation α is an equivalence in many interesting examples, for instance when F , G, F ′ and G ′ are all quasi-compact derived schemes with an affine diagonal (more generally when F , G, F ′ and G ′ are all strongly quasi-compact and p qcoh * and q qcoh * are of finite t-amplitude). That the base change formula is satisfied without any flatness assumptions on u is an important feature of derived algebraic geometry. Of course, when F = i(X) for X a scheme, then L X ∈ D qcoh (X) is the usual cotangent complex of X (e.g. as defined in [Il]). For x :
X = RSpec A −→ F we define the tangent complex of F at x to be T x F := RHom(x * (L F ), A), the dual of x * (L F ).
For any morphism of derived Artin stacks f : F −→ F ′ we define a relative cotangent complex by the following triangle in L qcoh (F )
f * (L F ′ ) −→ L F −→ L F/F ′ .
It can be shown that f is smooth if and only if it is locally of finite presentation and if L F/F ′ is of non negative t-amplitude (i.e. if [L F/F ′ , E[i]] = Ext i (L F/F ′ , E) = 0 for all i > 0 and for all E belonging to the non positive part of the t-structure on L qcoh (F )). In the same way f is etale if and only if it is locally of finite presentation and L F/F ′ ≃ 0 (see [HAGII,2.2.5]).

6. The virtual structure sheaf: Let F be a derived Artin stack and t 0 F its truncation. For a smooth morphism U = RSpec A −→ F , we can consider the graded π 0 (A)-module π * (A) as a graded quasi-coherent sheaf on Spec π 0 (A). When U varies over smooth morphisms to F , the various graded quasi-coherent sheaves π * (A) glue together and descend to a global graded quasi-coherent sheaf π * (O virt ) on the stack t 0 F . This graded sheaf is called the virtual structure sheaf of F . In any case it is an important invariant living on t 0 F and remembering some information about the derived enhancement F of t 0 F .


## Some examples

1. Derived fiber products of schemes and stacks: As we have said the natural inclusion functor i :
St(k) −→ dSt(k)
is not left exact an in particular does not preserve fiber products. Therefore, a very first example of derived Artin stacks is given by considering a diagram of Artin stacks
F G / / H, and then considering i(F ) × i(H) i(G). The natural morphism i(F × H G) −→ i(F ) × i(H) i(G)
is in general not an equivalence, thought the induced morphism on the truncations
t 0 (i(F × H G)) −→ t 0 (i(F ) × i(H) i(G))
is an equivalence of stacks. Therefore, the derived Artin stack i(F ) × i(H) i(G) is a derived enhancement (in the sense of Def. 4.3) of the usual fiber products of stacks.

A very simple, but fundamental, example is when F , G and H are all affine schemes given by a diagram of commutative k-algebras
A B C o o O O Then, the derived stack i(F )× i(H) i(G) is RSpec (A⊗ L C B),
where A⊗ L C B is the derived tensor product computed in simplicial commutative rings. We see that π i (A ⊗ L C B) = T or C i (A, B), and thus that the virtual structure sheaf (see point (6) of the last section) on Spec (A ⊗ C B) is T or C * (A, B). When H is a regular scheme scheme and F and G are closed subschemes intersecting properly, then this virtual structure sheaf on Spec (A ⊗ C B) precisely compute the correct intersection number.

An interesting general construction involving fiber products is the inertia stack. Recall that for a stack F , the inertia stack is I F := M ap(S 1 , F ) = F × F ×F F , and that it classifies objects endowed with an automorphism in F . Considering F as a derived stack i(F ) we get a derived inertia stack
RI F := I i(F ) := i(F ) × i(F )×i(F ) i(F ) ∈ dSt(k).
The derived stack RI F is of course a derived enhancement of the stack I F , and is naturally a derived group stack over F . When F is a scheme, then I F = F and thus RI F is a natural non trivial derived enhancement of F . For instance, when F = Spec A is an affine scheme, then we have
RI F = RSpec (A ⊗ L A⊗ L A A) whereas I F = F . As A ⊗ L A⊗ L A
A is known to be Hochschild homology of A, RI F is some sort of global version of Hochschild homology of the stack F .


## 2.

Derived schemes vs dg-schemes: Assume that k has characteristic zero. A dg-scheme is a pair (X, A X ), consisting of a scheme X together with a sheaf of quasi-coherent commutative dg-O X -algebras A X such that A 0 X = O X and A i X = 0 for i > 0. This notion has been introduced some years ago as models for derived schemes in order to construct derived moduli spaces (see ). There exists an obvious notion of morphisms of dg-schemes and of a quasi-isomorphisms between them. The Segal category of dg-schemes, obtained by localizing along quasi-isomorphisms will be denoted by L(dg −Sch). As explained in  it is possible to construct a functor Θ : L(dg − Sch) −→ dSt(k), and taking its values inside the sub-Segal category of derived schemes. When X = Spec A is affine and A X is given by a non positively graded commutative dg-algebra A X , then Θ(X, A X ) is defined as being RSpec D(A X ), where D(A X ) denotes the commutative simplicial algebra obtained by denormalization from A X . In general Θ(X, A X ) is defined using some covering of X by affine schemes and gluing in a rather straightforward way.

Essentially nothing is known about the functor Θ but I tend to think it is not well behaved (e.g. is not fully faithful). The reason for this feeling is that by definition for any dg-scheme (X, A X ) there exists a natural closed immersion of dg-schemes
(X, A X ) −→ (X, O X ) = X.
Moreover, any morphism between dg-schemes (X,
A X ) −→ (Y, A Y ) induces a commutative square of derived schemes (X, A X ) / / X (Y, A Y ) / / Y.
This most probably implies that Θ is not essentially surjective on derived schemes, because there are no reasons for a given derived scheme Z to be embeddable as a closed sub derived scheme of some ambiant scheme (though such an embedding always exists locally). If we think of derived schemes as being somehow analogs of formal schemes, the ones that have such embedding are analogs of the algebraizable formal schemes. Moreover, following this analogy, the morphisms of derived schemes Θ(X, A X ) −→ Θ(Y, A Y ) compatible with a morphism X −→ Y as above are analogs of the algebraizable morphisms between formal schemes. This analogy also suggests that Θ is probably not full.

Even though the functor Θ is probably not well behaved it can be used to produce examples of derived schemes as already some interesting example of dg-schemes have been constructed. This is for example the case of the derived Quot and Hilbert schemes, defined in . These dg-schemes have been defined in a rather ad-hoc manner, and they have not been constructed to represent any moduli functors (actually, dg-schemes do not seem to be well suited for the functorial point of view, due to the lack of a model structure on them that would allow to compute the maps in the localization L(dg − Sch)). A natural question is therefore to describe moduli characterizations of derived schemes arising from dg-schemes via the functor Θ. The two major examples are the derived schemes Θ(RQuot(X)) and Θ(RHilb(X)). The case of Θ(RQuot(X)) has been recently studied by J. Gorski in his thesis [Go].

To conclude this comparison between dg-schemes and derived schemes: dg-schemes seem to be only approximation of the correct notion of what a derived scheme is. Moreover, it seems there is nothing doable with dg-schemes that can not be done with derived schemes, but there are things doable with derived schemes that can not be done with dg-schemes (e.g. the construction of some derived moduli such as vector bundles on some smooth proper scheme, or also having functorial description of these derived moduli). It is therefore reasonable to suggest to simply forget about the notion of dg-schemes (and this has actually been suggested once to me by M. Kontsevich).

3. Linear derived stacks: As in example (2) of §3.2 it is possible to define the notion of linear stacks in the context of derived stacks. Let F be any derived Artin stack, and E ∈ L qcoh (F ). We define a derived stack RV(E) over F by
RV(E) : dSt(k)/F −→ T op (f : F ′ → F ) → M ap L(F ′ ,O F ′ ) (f * (E), O F ′ ).
The derived stack RV(E) is called the linear stack associated to E. By construction, it is characterized by the following universal property π 0 (M ap dSt(k)/F (F ′ , RV(E))) ≃ Ext 0 (f * (E), O F ′ ), for any f : F ′ −→ F in dSt(k)/F , and where the Ext 0 is computed in the derived category of complexes of O F ′ -modules.

The stack RV(E) is a derived Artin stack if E is perfect (i.e. its pull-backs to any derived affine scheme X = RSpec A −→ F ′ is a compact object in D(N (A)), the derived category of N (A)-dg-modules), and the morphism RV(E) −→ F is then strongly of finite presentation. The main difference with the notion of linear stacks in the underived situation is that RV(E) depends on the full complex E, and not only on its positive part. We have t 0 RV(E) ≃ V(E), and thus RV(E) is a natural derived enhancement of V(E).

For any derived Artin stack F , locally of finite presentation, the cotangent complex L F is perfect. The derived Artin stack RV(L F ) can then be identified with the derived tangent stack RT F := RMap(Spec k[ǫ], F ), defined as the derived stack of morphisms from Spec k[ǫ] to F (see point (4) below). It is important to note that when F is an Artin stack (i.e. F ≃ it 0 F ), then RT F is no longer an Artin stack except when F is itself smooth. Therefore, even though F is an Artin stack, RT F is in general a non trivial derived enhancement of the usual tangent stack T F . 4. Derived mapping stacks: As the Segal category dSt(k) is a Segal topos it has internal Homs objects. These objects are denoted by RMap, in order to avoid confusions with the one defined for underived stacks. The functor i : St(k) −→ dSt(k) does not commute with taking internal Homs, but its right adjoint t 0 does. In particular, for two Artin stacks F and G, the derived stack RMap(i(F ), i(G)) ∈ dSt(k) is such that t 0 RMap(i(F ), i(G)) ≃ Map(F, G), and is thus a derived enhancement of Map(F, G). This provides a systematic way to construct non trivial examples of derived stacks starting from underived stacks.

For a stack X and an Artin stack F there exist criteria ensuring that RMap(i(X), i(F )) is a derived Artin stack. The most powerful follows from Lurie's representability criterion (see [Lu1]), and states that this is the case as soon as X is a flat and proper scheme and F is an Artin stack locally of finite presentation. A simpler, but less prowerful, criterion is given in [HAGII, App. C], and states that this is the case if it is already known that Map(X, F ) is an Artin stack and under some additional mild conditions. These two criteria can be used to prove the existence of the following derived Artin stacks:

(a) For a finite and connected simplicial set K, the derived stack
RLoc n (K) := RMap(K, i(BGl n ))
is a derived Artin stack strongly of finite presentation and is called the derived moduli stack of rank n local systems on K (or on its geometric realization). Its truncation
Loc n (K) := Map(K, BGl n )
is the usual Artin 1-stack of rank n local systems on K, or equivalently of rank n linear representations of the group π 1 (K). Given a local system V ∈ Loc n (K)(k), the tangent complex of RLoc n (K) at the point V is
T V RLoc n (K) ≃ C * (K, V ⊗ V ∨ )[1],
where C * (K, V ⊗ V ∨ ) is the complex of cohomology of K with coefficients in the local system of endomorphisms of V . This implies in particular that RLoc n (K) depends on more than π 1 (K) alone, and also captures higher homotopical invariants of K.

(b) For a flat and proper scheme X, the derived stack RVect n (X) := RMap(i(X), i(BGl n )) is a derived Artin stack strongly of finite presentation and is called the derived moduli stack of rank n vector bundles on X. Its truncation Vect n (X) := Map(X, BGl n )

is the usual Artin 1-stack of rank n vector bundles on X. Moreover, for a vector bundle V on X we have
T V RVect n (X) ≃ C * (X, V ⊗ V ∨ )[1].
(c) Let k be a field of characteristic zero and X a smooth and projective scheme over Spec k.

We consider X DR as defined in point (4) of §3.3. The derived stack
RVect n (X DR ) := RMap(i(X DR ), i(BGl n ))
is a derived Artin stack strongly of finite presentation and is called the derived moduli stack of rank n flat vector bundles on X. Its truncation Vect n (X DR ) := Map(X DR , BGl n )

is the usual Artin 1-stack of rank n flat vector bundles on X. Moreover, for a flat vector bundle V on X we have
T V RVect n (X DR ) ≃ C * (X DR , V ⊗ V ∨ )[1],
where C * (X DR , V ⊗ V ∨ ) is the complex of de Rham cohomology of W with coefficients in the flat bundle of endomorphisms of V .

(d) Let M pre g,n be the Artin 1-stack of prestable curves of genus g and with n marked points, and let X be a smooth and proper scheme. We consider the universal prestable curve C g,n −→ M pre g,n . We define the derived stack of prestable maps to be
RM pre g,n (X) := RMap dSt(k)/i(M pre g,n ) (i(C g,n ), X × i(M pre g,n )),
where RMap dSt(k)/i(M pre g,n ) denotes the internal Homs of the comma Segal category of derived stacks over i(M pre g,n ). The derived stack RM pre g,n (X) is naturally a derived stack over i(M pre g,n ). Moreover, for
any Y = RSpec B −→ i(M pre g,n ) we have RM pre g,n (X) × i(M pre g,n ) Y ≃ RMap dSt(k)/Y (i(C g,n ) × i(M pre g,n ) Y, X × Y ).
where T C (− x i ) → f * (T X ) is a complex of sheaves on C concentrated in degrees [0, 1]. As a consequence of point (6) of §4.3 we immediately get a virtual structure sheaf π * (O virt ) on the usual stack of prestable maps M pre g,n (X) and therefore on the usual stack of stable maps M g,n (X).


## 5.

Objects in a dg-category: For a saturated dg-category T , the locally geometric Artin stack Parf T described in example (4) of §3.2 has a natural derived enhancement denoted by M T (see [To-Va] for a precise definition of the derived stack M T ). It can also be proved that M T is locally geometric (i.e. union of open derived Artin sub-stacks locally of finite presentation). In fact, the original proof of the local geometricity of Parf T is deduced from the one of M T which is somehow simpler, has explicit computations of cotangent complexes help proving the existence of a smooth atlas. For a given object E in T , the tangent complex is given by
T E M T ≃ Ext * (E, E)[1],
where Ext * (E, E) = T (E, E) is the complex of endomorphisms of E.

An important consequence of the local geometricity of M T is the existence of a local geometric derived stack RParf (X), of perfect complexes on some smooth and proper scheme. The derived stack RParf (X) is of course a derived enhancement of Parf (X) described in example (4) 
i(Coh(X)) / / i(Parf (X)) RCoh(X) / / RParf (X)
is cartesian.

This implies that RCoh(X) is a derived Artin stack. The derived stack RCoh(X) itself contains a derived open sub-stack RVect n (X) of vector bundles on X of rank n. This provides another direct proof of the geometricity of RVect n (X) without refering to any representability criterion. An interesting example is RPic(X) = RVect 1 (X), the derived Picard stack of X. Indeed, the truncation t 0 RPic(X) is the usual Picard stack of line bundles on X, and thus is smooth. However, though its truncation is smooth it is not true that RPic(X) = it 0 (RPic(X)) as this can be seen on the tangent complexes. This example shows that the usual intuition that moduli spaces are singular because of the existence of a non trivial derived structure is not always true in practice.

6. Dg-categories: The stack dgCat sat has a natural derived enhancement RdgCat sat defined in the following way. For any A ∈ sk − CAlg, we consider the commutative dg-algebra N (A) obtained by normalizing A. The category of N (A)-dg-modules has a natural symmetric monoidal structure, and therefore it make sense to talk about N (A)-dg-categories. Moreover, the notion of being saturated naturally extends from dg-categories over k to dg-categories over N (A). The functor sending A to the nerve of the category of quasi-equivalences between saturated N (A)-dg-categories is denoted by RdgCat sat . We clearly have t 0 RdgCat sat ≃ dgCat sat . As in the underived case, I believe that RdgCat sat is a locally geometric derived stack, and I think a direct approach using Lurie's representability criterion should be possible.

Question 4.5 Is the derived stack RdgCat sat locally geometric ?

Of course a positive answer to this question would also provide a positive answer to question 3.1. Naturally, it is expected that for a given saturated dg-category T the tangent complex is given by
T T RdgCat sat ≃ HH(T )[2],
where HH(T ) is the full Hochschild cohomology of T .


## Some developments

1. Representability criterion: Probably the most important recent development in the theory of derived stack is the representability criterion proved by J. Lurie in [Lu1], that we already mentioned several times but that we will not reproduce here. It is a generalization of the standard Artin's representability criterion for algebraic spaces and 1-stacks. However, the criterion in the derived setting is simpler as the part concerning having a good infinitesimal theory is now truly a property of the moduli functor and not an extra structure as we explained during the introduction of this section (see §4.1). This criterion is extremely powerful, though it is not always very easy to check the infinitesimal properties in practice, and it is sometimes easier to prove directly the geometricity and then deduced the infinitesimal theory from it (this is what is done for example in several examples in [HAGII]).

2. Formal theory and derived inertia stacks: Assume that k has characteristic zero. Let F be a derived Artin stack locally of finite presentation and RI F = RMap(S 1 , F ) be its derived inertia stack. The composition of loops makes RI F into a group object over F . In particular for any point x : Spec K −→ F , with K a field, we obtain RI F × F Spec K, which is a derived group Artin stack over Spec K. This group object has a tangent Lie algebra L x (which is well defined in the homotopy category of dg-Lie algebras over K). The precise relation between derived group stack and dg-Lie algebra has not been investigated yet, and there might be some foundational work to be done to explain what L x truly is. In any case, I will assume that we know how to do this. It is easy to see that, as a complex, L x is naturally quasi-isomorphic to T x F [−1], the shifted tangent complex of F at x. Therefore, we obtain a natural structure of dg-Lie algebra (or at least L ∞ -Lie algebra) on T x F [−1]. From this dg-Lie algebra L x we can define a formal derived moduli functor, defined on the category of augmented Artinian dg-algebras over K (see [Hin])

M C(L x ) : dg − Art/K −→ SSet.

On the other hand, the restriction of the derived stack F on dg − Art/K, pointed at x also provides a functor F x : dg − Art/K −→ SSet which is by definition the formal completion of F at the point x. It is expected that the two formal derived stacks M C(L x ) and F x are in fact equivalent. In other words, the tangent complex T x F together with the dg-Lie algebra structure on T x F [−1] determines the formal completion of the derived stack at x. This statement seems to have been proved for derived schemes and derived Deligne-Mumford stacks as it can be essentially reduced to the case of an affine derived stack which is somehow treated in [Hin, Man]. However, the general statement for higher derived stacks does not seem to be known.

Question 4.6 Compare the two formal derived stacks M C(L x ) and F x .

The local picture around the point x also has a global counter-part, as the group object RI F has a global sheaf of quasi-coherent dg-Lie algebras L on F , whose underlying complex is T F [−1] the shifted tangent complex of F . The sheaf of dg-Lie algebras L on F is supposed to control the formal completion of F × F along the diagonal (thought the precise meaning of this in the stack context is not completely clear).

3. Virtual fundamental classes: Let F be a derived Artin stack, t 0 F its truncation and π * (O virt F ) the graded virtual structure sheaf on t 0 F as defined in point (6) of §4.2. When the quasi-coherent sheaves π i (O virt F ) are all coherent and vanish for i big enough, we can define a virtual class in G-theory
[O F ] virt := (−1) i [π i (O virt F )] ∈ G 0 (t 0 F ). Note that when it 0 F ≃ F then [O F ] virt = [O F ].
The condition that the sheaves π i (O virt F ) are coherent and vanish for i big enough is not often satisfied and is a rather strong condition. It is known to be satisfied when k is noetherian and of characteristic zero, F is locally of finite presentation and the cotangent complex L F is of amplitude contained in [−1, ∞[. When F satisfies these two conditions we will say that F is quasi-smooth.

Assume now that k is noetherian of characteristic zero and and that F is a quasi-smooth derived Deligne-Mumford stack. On one hand we have the virtual class in G-theory [O F ] virt ∈ G 0 (t 0 F ), from which we can construct via the Grothendieck-Riemann-Roch transformation a class in the rational Chow groups τ ([O F ] virt ) ∈ CH * (t 0 F ) Q . On the other hand, we can pull-back the cotangent complex via the morphism j : it 0 F −→ F . The complex j * (L F ) is a perfect obstruction theory of amplitude [−1, 0] in the sense of [Be-Fa], and thus we can also construct a virtual fundamental class [F ] virt ∈ CH * (t 0 F ) Q . As far as I know the following question is still open. It seems that it is expected that these two classes only differ by a T d(T virt F ), where T F is the virtual tangent sheaf defined to be the dual of j * (L F ) (see [Be-Fa]). Some results in that direction are proved in [Jo].

Finally, when F is not quasi-smooth anymore, and more generally when the virtual structure sheaf has infinite non zero sheaves, it is very much unclear how to use this virtual sheaf in order to get interesting invariants generalizing the virtual class.


## A holomorphic Casson invariant:

Suppose now that k = C, and that X is a Calabi-Yau 3-fold. We consider RCoh(X) and its derived open sub-stack RCoh st,ν (X) consisting of stable coherent sheaves with some fixed numerical invariants ν ∈ K num 0 (X). We also assume that ν is chosen in such a way that semi-stable implies stable. Finally, we set M(X) := [RCoh st,ν (X)/RPic 0 (X)], the quotient derived stack of RCoh st,ν (X) by the natural action of RPic 0 (X) the derived group stack of line bundles of degree zero. The derived stack M(X, ν) is a proper derived algebraic space. Moreover, the tangent complex at a coherent sheaf E on X can be seen to fit in a triangle C * (X, O)[1] −→ C * (X, E ⊗ E ∨ )[1] −→ T E M(X, ν).

Using the trace morphism tr : C * (X, E ⊗ E ∨ ) −→ C * (X, O) we see that the above triangle splitts, and that the tangent complex at E is given by
T E M(X, ν) ≃ C * (X, E ⊗ E ∨ ) 0 [1],
where C * (X, E ⊗ E ∨ ) 0 is the kernel of the morphism tr.

The conclusion is that M(X, ν) is a quasi-smooth and proper derived algebraic space over Spec C, which is furthermore of virtual dimension zero. We can therefore define a holomorphic Casson invariant to be the lenght of M(X, ν) by the formula χ(X, ν) := (−1) i h i (M(X, ν), O M(X,ν) ).

As the derived stack M(X, ν) is proper and quasi-smooth, we see that χ(X, ν) is well defined. It is also equal to
p * ([O M(X,ν) ] virt ) ∈ G 0 (Spec C) = Z,
where p : t 0 M(X, ν) −→ Spec C is the projection and [O M(X,ν) ] virt is the virtual class in G-theory defined above in point (6) of §4.2.

By construction, the invariant χ(X, ν) counts the virtual number of stable sheaves with numerical invariants ν, with fixed determinants. It is natural to call it the holomorphic Casson invariant. It is probably very close to the one defined in [Th], as it surely satisfies the same deformation invariance property (this is an application of the base change formula, point (4) of §4.2 ). However, a precise comparison between these two invariants requires an answer to the question 4.7.

5. Concerning the geometric Langlands correspondence: As far as I understand the geometric version of the Langlands correspondence predicts that for any smooth and projective curve C over k = C, the existence of an equivalence of triangulated categories D(Vect n (C), D) ≃ D coh (Loc DR n (C))

where the left hand side is the derived category of D-modules on the stack Vect n (C) (with some finiteness conditions like being regular holonomic), and Loc DR n (C) := Map(C DR , BGl n ) is the stack of rank n flat bundles on C. I have recently learned from V. Lafforgue (and apparently this is a folklore knowledge shared by the experts) that in order for this equivalence to have a chance to exist the right hand side should rather be D coh (RLoc DR n (C)), where RLoc DR n (C) is the derived stack of rank n flat bundles discussed in example (4 − c) of §4.3. A striking example showing why this is so is when n = 1.

The stack Vect 1 (C) is equivalent to P ic 0 (C) × Z × K(G m , 1). On the other hand, the stack Loc DR 1 (C) is equivalent to P ic 0 (C) † × K(G m , 1), where P ic 0 (C) † is the universal extension of the Jacobian P ic 0 (C) by the vector space H 0 (C, Ω 1 C ). It is known that there exists an equivalence of triangulated categories (see [La] for the first of these two equivalences) D(P ic 0 (C), D) ≃ D coh (P ic 0 (C) † ) D(Z, D) ≃ D coh (K(G m , 1)).

Combining these two this shows that there exists an equivalence D(P ic 0 (C) × Z, D) ≃ D coh (Loc DR 1 (C)).

Therefore, we see that the part D(K(G m , 1), D) is not reflected in D coh (Loc DR 1 (C)) and that the originial predicted equivalence does not seem to exist.

Let RLoc DR 1 (C) be the derived moduli stack of rank 1 flat bundles on C. It can be seen that we have

RLoc Indeed, D(K(G m , 1), D) is equivalent to the derived category of S 1 -equivariant complexes of C-vector spaces, which is well known (via some bar-cobar construction) to be equivalent to the derived category of C[C[1]]-dg-modules.

The conclusion is that the statement of the geometric Langlands correspondence is truly about the derived category of the derived stack RLoc DR n (C). In the example above we also see that the "stacky part" K(G m , 1) of Vect 1 (C) correspond through the Langlands correspondence to the "derived part" RSpec C[C[1]] of RLoc DR 1 (C). This seems to be a general phenomenon, and explains somehow that there exists some kind of duality between the stacky direction and the derived direction. On the infinitesimal level these two directions can be respectively observed as the negative part and the positive part of the tangent complex. In general, this duality between the stacky and the derived part can be understood in terms of characteristic cycles of D-modules on higher stacks. Indeed, for a given Artin stack F , and a D-module E on F , the characteristic cylce of E is supposed to live on the total cotangent stack of F . A reasonable candidate to be the cotangent stack would be V(T F ), the linear stack associated to the tangent complex of F . But, when F has a non trivial stacky direction (i.e. when it is at least a 1-Artin stack), then the complex T F has non trivial negative cohomology sheaves, and thus we have seen in example (3) of §4.3 that V(T F ) has a natural non trivial derived enhancement RV(T F ). The correct cotangent stack of F is therefore a derived Artin stack, and the characteristic cycle of E is now expected to live on RV(T F ).

6. Categorified quantum cohomology: Let RM g,n+1 (X) be the derived stack of stable maps to a smooth and projective complex variety X (see example (4 − d) of §4.3). Let us fix a class β ∈ H 2 (X, Z), and let RM g,n+1 (X, β) the derived sub-stack of maps having β as fundamental class. Forgetting the map to X and eveluating at the marked points provide a natural diagram of derived stacks RM g,n+1 (X, β) / / X M g,n × X n .

This diagram induces by pull-back and push-forward a functor on the Segal categories of quasi-coherent complexes L qcoh (M g,n ) × L qcoh (X) n −→ L qcoh (X).

This should be thought of as some kind of action of the system of Segal derived categories {L qcoh (M g,n )} n,g on L qcoh (X). The precise meaning of this action must be made precise, and should be somehow an "action" of some kind of operad objects in Segal categories (here it is preferable to use dg-categories instead of Segal categories in order to keep track of the linear structure). Note that the fact that this "action" satisfies the expected associativity axioms will follow from the base change formula (point (4) of §4.2), showing the importance to use the derived stacks RM g,n+1 (X, β) in the construction.

This "action" of {L qcoh (M g,n )} n,g on L qcoh (X) can be thought of as a categorified version of quantum cohomolgy, as passing from Segal categories to their Hochschild homology group would give back something close to the quantum cohomology of X. What seems interesting with this construction is that the action of {L qcoh (M g,n )} n,g on L qcoh (X) makes sense even though X is not smooth (one problem though is that the action of {L qcoh (M g,n )} n,g on L qcoh (X) does not preserve bounded coherent complexes anymore).

## 7 .
7Derived categories of O-modules: To each stack F we can associate a Segal topos St(F ) := St(k)/F of stacks over F . The Segal topos possesses a natural ring object O F := A 1 × F −→ F making it into a ringed Segal topos (i.e. a Segal topos St(F ) together with a colimit commuting morphism from St(F ) to the opposite category of commutative rings). As to any ringed topos (T, O) is associated a derived category D(T, O) of (unbounded) complexes O-modules, the ringed Segal topos (St(F ), O F ) gives rise to a derived Segal category L(F, O F ) of O F -modules (see [To-Va-Ve]). Its homotopy category will be denoted by D(F, O F ) := Ho(L(F, O F )) and is called the derived category of F .

## 8 .
8The l-adic formalism: Let l be a number invertible in k. For any Artin stack F , we consider Et/F the full sub-Segal category of St(k)/F consisting of morphisms u : F ′ −→ F with F ′ an Artin stack and u an etale morphism. The Segal category Et/F possesses a natural topology induced from the one on St(k)/F , and is thus a Segal site (see [To-Ve1]). The Segal category of stacks over Et/F will be denoted by St(F et ), and is called the small etale topos of F . The constant sheaf of rings Z/l i on Et/F endows St(F et ) with a structure of a ringed Segal topos. The derived Segal category of this ringed Segal topos will be denoted by L(F et , Z/l i )


and where the Ext 0 is computed in the derived category of complexes of O F ′ -modules.


where the Ext-groups are computed in the triangulated category associated to T . The substack Parf simp T is an Artin 1-stack which is a gerbe over an algebraic space π 0 (Parf simp T ) denoted by M simp T . This algebraic space M simp T is a coarse moduli space for simple objects in T . It can be identified with the quotient stack


A 0 -module M , if A 0 ⊕M denotes the trivial square zero extension of A 0 by M , then the fibers of F (A 0 ⊕ M ) −→ F (A 0 ) are isomorphic to [L, M ] = Ext 0 (L, M ) (we assume here that F is a set valued functor for the sake of simplicity). This suggest that Ext 1 (L, I) = [L, I[1]] should be the fiber of the morphism F (A 0 ⊕ I[1]) −→ F (A 0 ). Of course A 0 ⊕ I[1]


of §2.2). The Segal category of derived pre-stacks is then defined to be dk − Af f := RHom(dk − Af f op , T op).


of §2.2), a concrete model for dSt(k) is the homotopy theory of functors F : sk − CAlg −→ SSet satisfying the following three properties: 1. For any equivalence A −→ B in sk − CAlg the induced morphism F (A) −→ F (B) is an equivalence of simplicial sets.


in the underived case any derived stack F has a Segal category L(F, O F ) of (unbounded) complexes of O F -modules (see [To-Va-Ve] for more details). First of all the Segal topos dSt(k) has a natural ring object, denoted by O and represented by A 1 . The object O can also be seen as a colimit preserving functor O : dSt(k) −→ L(sk − CAlg), from dSt(k) to the Segal category of simplicial commutative k-algebras. The pair (dSt(k), O) is a ringed Segal topos (see [To-Va-Ve]). In the same way, for any derived stack F , A 1 × F represents a ring object O F in dSt(k)/F , and the pair (dSt(k)/F, O F ) is a ringed Segal topos. The derived Segal category of (dSt(k)/F, O F ) is denoted by L(F, O F ) (see [To-Va-Ve] for a precise definition).

## 5 .
5Tangent and cotangent complexes: For any derived Artin stack F there exists an object L F ∈ L qcoh (F ) called the cotangent complex of F . It is characterized by the following universal property: for any A ∈ sk − CAlg, any morphism x : X = RSpec A −→ F and any simplicial A-module M , there exists a natural equivalence between the homotopy fiber of F (A ⊕ M ) −→ F (A) at x, and M ap N (A)−Mod (x * (L F ), N (M )) (here N is the normalization functor going from simplicial algebras and simplicial modules to dg-algebras and dg-modules).

## Question 4. 7
7What is the relation between τ ([O F ] virt ) and [F ] virt ?

## DR 1 (
1C) ≃ P ic 0 (C) † × K(G m , 1) × RSpec C[C[1]], where C[C[1]] is the trivial square zero extension of C by C[1] (as a commutative dg-algebra it is freely generated by an element in degree -1). Moreover, it can be shown that there exists an equivalence of derived categoriesD(K(G m , 1), D) ≃ D coh (RSpec C[C[1]]).

## 8 .
8Model categories and Segal categories: Given a model category M , we can construct a Segal category LM := L(M, W ) by localizing M (in the sense as above) along its subcategory of equivalences W . This provides a lot of examples of Segal categories. Using the main result of [Dw-Ka2] the Segal categories LM can be explicitly described in terms of mapping spaces in M . In particular, when M is a simplicial model category LM is equivalent to Int(M ), the S-category of fibrant-cofibrant objects in M . For the model category of simplicial sets we will use the notation T op := LSSet, for which one model is the S-category of Kan simplicial sets. For a simplicial set X, considered as an object in T op, we have a natural equivalence T op( * , X) ≃ X, showing that T op is not equivalent to Ho(T op) the homotopy category of spaces. This is the generic situation, and for a general model category M the Segal category LM is not equivalent to its homotopy category Ho(M ) = Ho(LM ). The construction M → LM can be made functorial with respects to Quillen functors as follows. For f : M −→ N a right Quillen functor, its restriction to fibrant objects f : M f −→ N f preserves equivalences, and thus induces a morphism of Segal categories LM f −→ LN f . The existence of fibrant replacements implies that the natural inclusion functors LM f −→ LM and LN f −→ LN are equivalences. We thus obtain a morphism of Segal categories Lf 2 : LM −→ LN , well defined in the homotopy category of Segal categories, which is often enough for applications. The functor Lf : LM −→ LN above can be characterized by a universal property in the Segal category RHom(LM, LN ), showing that it is uniquely determined by f and equivalences in M and N (in particular it does not depend on choices of fibrant replacement functors in M and N ). For this we consider the composite functor M f / / N l / / LN , as an object l • f ∈ RHom(M, LN ). In the same way, we have Lf • l ∈ RHom(M, LN ). By construction there exists a natural morphism l•f → Lf in the Segal category RHom(M, LN ). It is possible to show that l • f → Lf is initial among morphism from l • f to functors g : M −→ LN sending equivalences in M to equivalences in LN . In other words, the functor Lf is the total right derived functor of f , in the sense of Segal categories. 9. Classifying spaces of model categories: For a model category M with subcategory of equivalences W , we can consider LM as well as its maximal sub-Segal groupoid LM int ⊂ LMdefined as the pull-back of Segal categories 




states that any Segal category A possesses fully faithful embedding A −→ LM for some model category M . This remark implies that model categories and Segal categories are essentially the same thing, and this relation can be made precise by showing that Segal categories of the form LM for M a cofibrantly generated model category are exactly the locally presentable Segal categories (i.e. the cocomplete Segal categories having a set of small generators, see


). Moreover, the natural inclusions Parf[a,b]  ֒→ Parf [a ′ ,b ′ ]are Zariski open immersion, and therefore the whole stack Parf is an increasing union of open Artin substacks. Such a stack is called locally geometric. The tangent space of Parf taken at a perfect complex E is given by


a morphism between special Artin stacks, such that for any algebraically closed field K the induced morphism M ap(Spec K, F ) −→ M ap(Spec K, F ′ ) is an equivalence. Then we have [F ] = [F ′ ].


of §3.2. Inside the stack Parf (X) sits as an open sub-stack Coh(X) the 1-stack of coherent sheaves on X. As the stack Parf (X) and RParf (X) have the same topology (and in particular the same open substacks), there exists a unique open derived sub-stack RCoh(X) ⊂ RParf (X) such that the diagram
The expression higher category will always refer to the weak notion, we will never consider strict higher categories which are somehow useless for the purpose of stack theory.
Be careful that the "L" in "Lf" stands for "localization" and not for "left derived". In fact, as f is right Quillen the morphism Lf is a model for the right derived functor Rf . In order to avoid confusion left derived stuff will be denoted using the symbol L.
Here, as well as in the sequel, we make an abuse of language which is commonly used in the litterature. The hypercovering U * is not a simplicial object in C as each Un is only a disjoint union of representable presheaves over C, and must be understood as a formal disjoint union of objects in C. For U = U i such a formal disjoint union the notation F (U ) stands for F (U i ).
In general F (X) is only expected to be a full subsimplicial set (i.e. union of connected components) of the nerve of equivalences in M (X) consisting of objects satisfying certain additional conditions (typically finiteness conditions)
T f RM g,n (X) ≃ C * (C, T C (− x i ) → f * (T X ))[1],
The obstruction class e is then expected to be the image of the point x ∈ F (A 0 ) in F (A 0 ⊕ I[1]), which naturally lives in the fiber of the projection to F (A 0 ) and thus in Ext 1 (L, I).We conclude that the obstruction theory of F can be explained as soon as F is extended to a functor defined on the category of simplicial rings. If such an extension is given, we clearly expect that Ext i (L, I) is the fiber of F (A 0 ⊕ I[i]) −→ F (A 0 ). This suggest that once an extension F to simplicial rings is given then L becomes uniquely determined by F , and should be thought of as the cotangent complex of F . The non uniqueness of L with respect to F is then related to the non uniqueness of the extension of F to simplicial rings.The conclusion of this small discussion is: as stacks are functors defined on the category of commutative rings, derived stacks are functors defined on the category of simplicial rings. I like to draw the following picture, relating sheaves, 1-stacks, higher stacks and derived stacks all together This implies that the morphism RM  where M g,n (X) ⊂ M pre g,n (X) is the substack of stable maps. The truncation of RM g,n (X) is by construction the usual stack of stable maps to X, and therefore we see that RM g,n (X) is a derived Deligne-Mumford stack. The tangent of RM g,n (X) at a morphism f : C −→ X, is given by
. M , in preparationM. Anel, in preparation.

Derived l-adic categories for algebraic stacks. K Behrend, Mem. Amer. Math. Soc. 16377493K. Behrend Derived l-adic categories for algebraic stacks, Mem. Amer. Math. Soc. 163 (2003), no. 774, viii+93 pp.

The intrinsic normal cone. K Behrend, B Fantechi, Invent. Math. 1281K. Behrend, B. Fantechi, The intrinsic normal cone, Invent. Math. 128 (1997), No. 1, 45-88.

Three models for the homotopy theory of homotopy theories. J Bergner, Preprint math.AT/0504334J. Bergner, Three models for the homotopy theory of homotopy theories, Preprint math.AT/0504334.

Van Den Bergh, Generators and representability of functors in commutative and non-commutative geometry. J Bergner, ; A Bondal, M , Mosc. Math. J. 31A characterization of fibrant Segal categories, Preprint math.AT/0603400J. Bergner, A characterization of fibrant Segal categories, Preprint math.AT/0603400. [Bo-VdB] A. Bondal, M. Van Den Bergh, Generators and representability of functors in commu- tative and non-commutative geometry, Mosc. Math. J. 3 (2003), no. 1, 1-36.

On classification of 2-gerbes and 2-stacks. L Breen, Astérisque. 225Soc. Math. de FranceL. Breen, On classification of 2-gerbes and 2-stacks, Astérisque 225, Soc. Math. de France 1994.

Derived Quot schemes. I Ciocan-Fontanine, M Kapranov, Ann. Sci. Ecole Norm. Sup. 4Ci-Ka1[Ci-Ka1] I. Ciocan-Fontanine, M. Kapranov, Derived Quot schemes, Ann. Sci. Ecole Norm. Sup. (4) 34 (2001), 403-440.

Derived Hilbert Schemes. I Ciocan-Fontanine, M Kapranov, J. Amer. Math. Soc. 154Ci-Ka2[Ci-Ka2] I. Ciocan-Fontanine, M. Kapranov, Derived Hilbert Schemes, J. Amer. Math. Soc. 15 (2002), no. 4, 787-815.

Images directes cohomologiques dans les catégories de modèles. D.-C Cisinski, Ann. Math. Blaise Pascal. 102D.-C. Cisinski, Images directes cohomologiques dans les catégories de modèles, Ann. Math. Blaise Pascal 10 (2003), no. 2, 195-244.

On Ringel-Hall algebras. ] B De-Xi, J Deng, Xiao, Representations of finite dimensional algebras and related topics in Lie theory and geometry. Providence, RIAmer. Math. Soc40[De-Xi] B. Deng, J. Xiao, On Ringel-Hall algebras, in Representations of finite dimensional algebras and related topics in Lie theory and geometry, 319-348, Fields Inst. Commun., 40, Amer. Math. Soc., Providence, RI, 2004.

Hypercovers and simplicial presheaves. D Dugger, S Hollander, D Isaksen, Math. Proc. Cambridge Philos. Soc. 136D. Dugger, S. Hollander, D. Isaksen, Hypercovers and simplicial presheaves, Math. Proc. Cambridge Philos. Soc. 136 (2004), 9-51.

Simplicial localization of categories. W Dwyer, D Kan, J. Pure and Appl. Algebra. 17Dw-Ka1[Dw-Ka1] W. Dwyer, D. Kan, Simplicial localization of categories, J. Pure and Appl. Algebra 17 (1980), 267-284.

Function complexes in homotopical algebra. W Dwyer, D Kan, 427 − 440Topology. 19W. Dwyer, D. Kan, Function complexes in homotopical algebra, Topology 19 (1980), 427 − 440.

Representability of the derived Quot functor, thesis. J Gorski, J. Gorski, Representability of the derived Quot functor, thesis.

Pursuing stacks, unpublished manuscript. A Grothendieck, A. Grothendieck, Pursuing stacks, unpublished manuscript.

Formal stacks as dg-coalgebras. V Hinich, J. Pure Appl. Algebra. 1622-3V. Hinich, Formal stacks as dg-coalgebras, J. Pure Appl. Algebra 162 (2001), No. 2-3, 209- 250.

Descente pour les n-champs. A Hirschowitz, C Simpson, preprint math.AG/9807049A. Hirschowitz, C. Simpson, Descente pour les n-champs, preprint math.AG/9807049.

A homotopy theory for stacks. S Hollander, preprint math.AT/0110247S. Hollander, A homotopy theory for stacks, preprint math.AT/0110247.

M Hovey, Model categories, Mathematical surveys and monographs. Amer. Math. Soc. Providence63M. Hovey, Model categories, Mathematical surveys and monographs, Vol. 63, Amer. Math. Soc. Providence 1998.

Model category structures on chain complexes of sheaves. M Hovey, Trans. Amer. Math. Soc. 3536M. Hovey, Model category structures on chain complexes of sheaves, Trans. Amer. Math. Soc. 353 (2001), no. 6, 2441-2457.

Complexe cotangent et déformations I. L Illusie, Lecture Notes in Mathematics. 239Springer VerlagL. Illusie, Complexe cotangent et déformations I, Lecture Notes in Mathematics 239, Springer Verlag, Berlin, 1971.

Simplicial presheaves. J F Jardine, J. Pure and Appl. Algebra. 47J. F. Jardine, Simplicial presheaves, J. Pure and Appl. Algebra 47 (1987), 35-87.

Stacks and the homotopy theory of simplicial sheaves. J F Jardine, Equivariant stable homotopy theory and related areas. Stanford, CA3J. F. Jardine, Stacks and the homotopy theory of simplicial sheaves, in Equivariant stable homotopy theory and related areas (Stanford, CA, 2000). Homology Homotopy Appl. 3 (2001), No. 2, 361-384.

Riemann-Roch for algebraic stacks III: Virtual structure sheaves and virtual fundamental classes. R Joshua, preprint available atR. Joshua, Riemann-Roch for algebraic stacks III: Virtual structure sheaves and virtual fun- damental classes, preprint available at http://www.math.ohio-state.edu/∼joshua/pub.html.

Letter to Grothendieck. A , A. Joyal, Letter to Grothendieck.

Non-abelian mixed Hodge structures. Ka-Pa-Si , ] L Katzarkov, T Pantev, C Simpson, preprint math.AG/0006213Ka-Pa-Si] L. Katzarkov, T. Pantev, C. Simpson, Non-abelian mixed Hodge structures, preprint math.AG/0006213.

Schematic homotopy types and non-abelian Hodge theory. ] L Ka-Pa-To, T Katzarkov, B Pantev, Toën, preprint math.AG/0107129Ka-Pa-To] L. Katzarkov, T. Pantev, B. Toën, Schematic homotopy types and non-abelian Hodge theory, preprint math.AG/0107129.

Transformation de Fourier generalisée, Preprint alg-geom/9603004. G Laumon ; G. Laumon, L Moret-Bailly, Champs algébriques, A series of Modern Surveys in Mathematics. Springer-Verlag39G. Laumon, Transformation de Fourier generalisée, Preprint alg-geom/9603004. [La-Mo] G. Laumon and L. Moret-Bailly, Champs algébriques, A series of Modern Surveys in Mathematics vol. 39, Springer-Verlag 2000.

The six operations for sheaves on Artin stacks I: Finite Coefficients. ] Y La-Ol, M Laszlo, Olsson, math.AG/0512097[La-Ol] Y. Laszlo, M. Olsson, The six operations for sheaves on Artin stacks I: Finite Coefficients, Preprint math.AG/0512097.

A survey of definitions of n-category. T Leinster, Theory and Applications of Categories. 101T. Leinster, A survey of definitions of n-category, Theory and Applications of Categories 10 (2002), no. 1, 1-70.

Higher Categories. T Leinster, Higher Operads, London Mathematical Society Lecture Note Series. 298Cambridge University PressT. Leinster, Higher Operads, Higher Categories, London Mathematical Society Lecture Note Series 298, Cambridge University Press.

Moduli of complexes on a proper morphism. M Lieblich, to appear in Journal of Algebraic GeometryM. Lieblich, Moduli of complexes on a proper morphism, to appear in Journal of Algebraic Geometry.

Van den Bergh, Deformation theory of abelian categories, to appear in Trans. W T Lowen, M , Amer. Math. Soc[Lo-VdB1] W. T. Lowen, M. Van den Bergh, Deformation theory of abelian categories, to appear in Trans. Amer. Math. Soc.

Van den Bergh,Hochschild cohomology of abelian categories and ringed spaces. W T Lowen, M , Adv. in Math. 1981[Lo-VdB2] W. T. Lowen, M. Van den Bergh,Hochschild cohomology of abelian categories and ringed spaces, Adv. in Math. 198 (2005), no. 1, 172-222.

Derived algebraic geometry, thesis, available at the author's home page. J Lurie, J. Lurie, Derived algebraic geometry, thesis, available at the author's home page.

J Lurie, On ∞-topoi. Preprint math.CT/0306109J. Lurie, On ∞-topoi, Preprint math.CT/0306109.

Extended deformation functors. M Manetti, Int. Math. Res. Not. 14M. Manetti, Extended deformation functors, Int. Math. Res. Not. 14 (2002), 719-756.

. M Olsson, Preprint available atM. Olsson, F-isocrystals and homotopy types, Preprint available at http://www.ma.utexas.edu/∼molsson/.

Towards non-abelian P -adic Hodge theory in the good reduction case. M Olsson, Preprint available atM. Olsson, Towards non-abelian P -adic Hodge theory in the good reduction case, Preprint available at http://www.ma.utexas.edu/∼molsson/.

R Pellissier, Catégories enrichies faibles. Université de Nice-Sophia AntipolisThèseR. Pellissier, Catégories enrichies faibles, Thèse, Université de Nice-Sophia Antipolis, June 2002, available at http://math.unice.fr/ ∼ lemaire.

Homotopy over the complex numbers and generalized cohomology theory. C Simpson, Moduli of vector bundles (Taniguchi Symposium. M. Maruyama ed.Dekker PublC. Simpson, Homotopy over the complex numbers and generalized cohomology theory, in Moduli of vector bundles (Taniguchi Symposium, December 1994), M. Maruyama ed., Dekker Publ. (1996), 229-263.

The Hodge filtration on non-abelian cohomology, Algebraic geometry-Santa Cruz. C Simpson, Proc. Sympos. Pure Math. 622Amer. Math. SocC. Simpson, The Hodge filtration on non-abelian cohomology, Algebraic geometry-Santa Cruz 1995, 217-281, Proc. Sympos. Pure Math., 62, Part 2, Amer. Math. Soc., Providence, RI, 1997.

Algebraic n-stacks. C Simpson, Preprint math.AG/9609014C. Simpson, Algebraic n-stacks, Preprint math.AG/9609014.

A Giraud-type characterisation of the simplicial categories associated to closed model categories as ∞-pretopoi. C Simpson, Preprint math.AT/9903167C. Simpson, A Giraud-type characterisation of the simplicial categories associated to closed model categories as ∞-pretopoi, Preprint math.AT/9903167.

Une structure de catégorie de modèles de Quillen sur la catégorie des dgcatégories. G Tabuada, 340Comptes Rendus de l'Académie de Sciences de ParisG. Tabuada, Une structure de catégorie de modèles de Quillen sur la catégorie des dg- catégories, Comptes Rendus de l'Académie de Sciences de Paris, 340 (2005), 15-19.

A holomorphic Casson invariant for Calabi-Yau 3-folds, and bundles on K3 fibrations. R Thomas, J. Differential Geom. 542R. Thomas, A holomorphic Casson invariant for Calabi-Yau 3-folds, and bundles on K3 fibrations, J. Differential Geom. 54 (2000), no. 2, 367-438.

Homotopical and higher categorical structures in algebraic geometry, habilitation thesis. B Toën, preprint math.AG/0312262B. Toën, Homotopical and higher categorical structures in algebraic geometry, habilitation thesis, preprint math.AG/0312262.

The homotopy theory of dg-categories and derived Morita theory. B Toën, math.AG/0408337B. Toën, The homotopy theory of dg-categories and derived Morita theory, Preprint math.AG/0408337.

Grothendieck rings of higher Artin stacks. B Toën, math.AG/0509098PreprintB. Toën, Grothendieck rings of higher Artin stacks, Preprint math.AG/0509098.

Derived Hall algebras, Preprint math. B Toën, QA/0501343B. Toën, Derived Hall algebras, Preprint math.QA/0501343.

Champs affines. B Toën, math.AG/0012219Preprint Preprintto appear in Selecta (also available asB. Toën, Champs affines, to appear in Selecta (also available as Preprint Preprint math.AG/0012219).

Moduli of objects in dg-categories, preprint math.AG/0503269. B Toën, M Vaquié ; B. Toën, M Vaquié, G Vezzosi, Higher derived categories. in preparationB. Toën, M. Vaquié, Moduli of objects in dg-categories, preprint math.AG/0503269. [To-Va-Ve] B. Toën, M. Vaquié, G. Vezzosi, Higher derived categories, in preparation.

Homotopical algebraic geometry I: Topos theory. B Toën, G Vezzosi, Adv. Math. 1932B. Toën, G. Vezzosi, Homotopical algebraic geometry I: Topos theory, Adv. Math. 193 (2005), no. 2, 257-372.

Homotopical algebraic geometry II: Geometric stacks and applications. B Toën, G Vezzosi, to appear in Memoires of the AMS (also available as Preprint math.AG/0404373B. Toën, G. Vezzosi, Homotopical algebraic geometry II: Geometric stacks and applica- tions, to appear in Memoires of the AMS (also available as Preprint math.AG/0404373).

Segal topoi and stacks over Segal categories. B Toën, G Vezzosi, Proceedings of the Program "Stacks, Intersection theory and Non-abelian Hodge Theory. the Program "Stacks, Intersection theory and Non-abelian Hodge TheoryMSRI, BerkeleyTo-Ve1. also available as Preprint math.AG/0212330[To-Ve1] B. Toën, G. Vezzosi, Segal topoi and stacks over Segal categories, December 25, 2002, to appear in Proceedings of the Program "Stacks, Intersection theory and Non-abelian Hodge Theory", MSRI, Berkeley, January-May 2002 (also available as Preprint math.AG/0212330).

A remark on K-theory and S-categories. B Toën, G Vezzosi, Topology. 434To-Ve2[To-Ve2] B. Toën, G. Vezzosi, A remark on K-theory and S-categories, Topology 43, No. 4 (2004), 765-791.

From HAG to DAG: derived moduli stacks. B Toën, G Vezzosi, Axiomatic, enriched and motivic homotopy theory. DordrechtKluwer Acad. Publ131To-Ve3[To-Ve3] B. Toën, G. Vezzosi, From HAG to DAG: derived moduli stacks, in Axiomatic, enriched and motivic homotopy theory, 173-216, NATO Sci. Ser. II Math. Phys. Chem., 131, Kluwer Acad. Publ., Dordrecht, 2004.